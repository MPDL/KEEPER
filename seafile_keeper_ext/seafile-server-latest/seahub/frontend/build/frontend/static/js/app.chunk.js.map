{"version":3,"sources":["../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","../node_modules/react-tooltip/node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/react-tooltip/node_modules/prop-types/lib/ReactPropTypesSecret.js","components/dialog/image-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/dialog/sort-options.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/search-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/xmlhttprequest.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","../node_modules/@seafile/react-image-lightbox/dist/index.es.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","../node_modules/react-tooltip/node_modules/prop-types/index.js","components/context-menu/actions.js","components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/react-select/lib/AsyncCreatable.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js"],"names":["Emitter","obj","key","prototype","mixin","module","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","splice","emit","args","Array","len","slice","listeners","hasListeners","base64encoder","keys","require","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","navigator","test","userAgent","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","message","upgrade","noop","packetslist","err","type","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","e","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","substring","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","parseInt","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","props","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","isTagSelected","className","onClick","style","backgroundColor","color","name","React","Component","TagList","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","toggle","toggleCancel","gettext","href","createNewTag","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","isOpen","onClose","handleShowEvent","hasOwnProp","show","handleHideEvent","hide","register","showCallback","hideCallback","uniqueId","unregister","canUseDOM","window","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","document","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","isVisible","position","x","y","currentObject","menuList","callIfExists","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","rtl","opacity","pointerEvents","role","display","ref","menuItem","index","data-operation","value","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","newInput","createRef","focus","setSelectionRange","for","innerRef","input","onKeyPress","onChange","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleKeyDown","onDropdownToggleClick","toggleOperationMenu","freezeItem","onMenuItemKeyDown","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","toggleClass","tagName","data-toggle","title","aria-label","aria-expanded","onKeyDown","divider","tag","tabIndex","defaultProps","str","hasOwnProperty","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","a","b","constructor","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","ImageDialog","imageItems","imageIndex","imageItemsLength","imageCaption","url","mainSrc","src","imageTitle","nextSrc","prevSrc","onCloseRequest","closeImagePopup","onMovePrevRequest","moveToPrevImage","onMoveNextRequest","moveToNextImage","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","dangerouslySetInnerHTML","__html","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_this","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","toLowerCase","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","to","aria-hidden","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","canPublishRepo","draftCounts","pill","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","onCloseAboutDialog","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","SidePanel","isSidePanelClosed","onCloseSidePanel","MainPanel","script","createElement","async","body","appendChild","children","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","encodePath","serviceURL","fileLink","bind","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","onScroll","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","Fragment","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","currentPerm","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","showAdmin","Object","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","isTextMode","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","JSON","stringify","objUrl","view_cnt","ShareAdminShareLinks","deleteShareLink","uploadItem","listUserShareLinks","ShareLink","ShareAdminUploadLinks","deleteUploadLink","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","storage_name","doi","LibsMobileThead","_slicedToArray","arr","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","unsupportedIterableToArray","TypeError","SortOptions","sortOptions","sortBySize","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","save","toggleSortOptionsDialog","isSortOptionsDialogOpen","load","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","currentPath","downloadFile","downloadUrl","shared_by","DirPath","turnPathToLink","pathList","nodePath","data-path","pathElem","MainPanelTopbar","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","repo","passwd","storages","libraryTemplates","repoPasswordMinLength","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","visitDeletedviaKey","onShowSidePanel","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","concat","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","mode","onDirentItemClick","thead","onSelectChange","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","pills","aria-selected","aria-controls","tabId","folderName","maxWidth","Rename","nativeEvent","stopImmediatePropagation","onRenameConfirm","validateInput","isValid","onRenameCancel","renameInput","hasSuffix","endIndex","lastIndexOf","MylibRepoMenu","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","operations","folderPermEnabled","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","unshift","RepoAPITokenPermissionEditor","onHideSelect","isEditing","onEditPermission","onSelectHandler","optionTranslation","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","rel","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","placement","helpText","KeeperArchiveMetadataForm","isFieldValid","RegExp","Boolean","isFormValid","validMd","outer","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","promiseOptions","Promise","resolve","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","v","hideDialog","header","paddingBottom","row","sm","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","query","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","onSearchedClick","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","aria-haspopup","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","getUserPermission","customPermission","canUpload","canCreate","upload","create","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","searchPlaceholder","isDirentSelected","tabName","tagTitle","pathPrefix","showName","zIndex","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","oldTime","participants","showIconTip","defaultStyle","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","CommentItem","convertComment","mdFile","processor","process","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","draggedItem","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","isHasPermissionToShare","isSelected","getDirentItemMenuList","data-tip","data-for","delayHide","effect","preview","activeDirent","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","data-op","DirentsDraggedPreview","handleDragEnd","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","documentElement","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","isImagePopupOpen","prevState","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","isRepoInfoBarShow","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","onNodeExpanded","onNodeCollapse","onUnFreezedItem","DirColumnFile","goDraftPage","hash","isFileLoadedErr","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","Math","round","newFileName","isUploading","aria-valuenow","aria-valuemin","aria-valuemax","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","bootstrap","firedRetry","resumableObj","getUpdateLink","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","onDeleteItems","deleteMutipleDirents","deleteDirents","createDir","addDirent","createFile","paths","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","repoRes","RepoInfo","permissionID","getCustomPermission","permissionRes","custom_permission","lib_need_decrypt","unwatchRepo","queryAsyncOperationProgress","successful","deleteDir","deleteItemAjaxCallback","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","changeMode","SearchGroupMembers","q","searchGroupMember","isInit","MANAGEMENT_MODE","toggleManageMembersDialog","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","GeneralToolbar","MainContentWrapper","WrapperedComponent","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","ShareAdminShareLinksWrapper","ShareAdminUploadLinksWrapper","App","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","contentClassName","ReactDOM","render","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","random","ii","debug","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","add","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","self","Function","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","writable","onData","onPacket","CreateTagDialog","selectTagcolor","createTag","createRepoTag","newTag","canSave","ShareAdminLink","copyToClipboard","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","draftItem","DraftItem","ReadmeDialog","readmeContent","showTOC","scriptSource","RepoInfoBar","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","exec","uri","source","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$1","$2","call","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","reset","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","prev","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","sent","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","WikiMarkdownViewer","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","MarkdownViewer","_defineProperties","descriptor","enumerable","configurable","defineProperty","_createClass","Constructor","protoProps","staticProps","_defineProperty","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_assertThisInitialized","ReferenceError","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","translate","replaceStrings","translated","getWindowWidth","global","getHighestSafeWindowContext","referrer","getOrigin","parent","MAX_ZOOM_LEVEL","KEYS","ReactImageLightbox","_Component","instance","_classCallCheck","_possibleConstructorReturn","isClosing","animationDisabled","shouldAnimate","zoomLevel","offsetX","offsetY","loadErrorStatus","outerEl","zoomInBtn","zoomOutBtn","caption","closeIfClickInner","handleImageDoubleClick","handleImageMouseWheel","handleKeyInput","handleMouseUp","handleMouseDown","handleMouseMove","handleOuterMousewheel","handleTouchStart","handleTouchMove","handleTouchEnd","handlePointerEvent","handleCaptionMousewheel","handleWindowResize","handleZoomInButtonClick","handleZoomOutButtonClick","requestClose","requestMoveNext","requestMovePrev","subClass","superClass","_inherits","mouseEvent","touchPointer","identifier","pointerEvent","pointerId","_ref","_ref$x","_ref$y","_ref$zoom","zoom","targetWidth","nextX","windowWidth","scaleFactor","transform","timeouts","currentAction","eventsSource","pointerList","preventInnerClose","preventInnerCloseTimeout","keyPressed","imageCache","lastKeyDownTime","resizeTimeout","wheelActionTimeout","resetScrollTimeout","scrollX","scrollY","moveStartX","moveStartY","moveStartOffsetX","moveStartOffsetY","swipeStartX","swipeStartY","swipeEndX","swipeEndY","pinchTouchList","pinchDistance","keyCounter","moveRequested","_this2","windowContext","resize","mouseup","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","handleWheel","passive","loadAllImages","_this3","sourcesChanged","prevSrcDict","nextSrcDict","getSrcTypes","srcType","_this4","didUnmount","tid","_setTimeout","_x","_x2","_this5","_this6","imageSrc","fitSizes","isImageLoaded","getFitSizes","targetHeight","stretch","boxSize","getLightboxRect","currentImageInfo","getBestImageForType","maxX","minX","maxY","minY","zoomMultiplier","getZoomMultiplier","keyEnding","pow","right","_clearTimeout","_x3","enableZoom","nextZoomLevel","imageBaseSize","currentZoomMultiplier","nextZoomMultiplier","boxRect","pointerX","pointerY","currentImageOffsetX","currentImageOffsetY","nextImageRealOffsetX","nextImageRealOffsetY","nextOffsetX","nextOffsetY","maxOffsets","getMaxOffsets","isAnimating","which","keyRepeatLimit","keyRepeatKeyupBonus","_this7","deltaY","abs","deltaX","changeZoom","newOffsetY","newOffsetX","filterPointersBySource","pointer","_ref2","_this8","_ref3","shouldHandleEvent","isTargetMatchImage","addPointer","parseMouseEvent","multiPointerStart","multiPointerMove","removePointer","multiPointerEnd","parsePointerEvent","_this9","changedTouches","eventTouch","parseTouchPointer","_this10","touch","handleSwipeStart","handleMoveStart","handleEnd","decideMoveOrSwipe","handlePinchStart","handleMove","handleSwipe","handlePinch","setPreventInnerClose","handleMoveEnd","handleSwipeEnd","handlePinchEnd","_ref4","_ref5","_this11","animationDuration","_ref6","_ref7","xDiff","xDiffAbs","yDiffAbs","_ref8","_ref9","sqrt","_ref10","_ref11","_ref12","calculatePinchDistance","oldPointer","newDistance","_this$calculatePinchC","calculatePinchCenter","forceUpdate","_this$caption$current2","_this12","inMemoryImage","Image","imageCrossOrigin","crossOrigin","errorEvent","onImageLoadError","onImageLoad","_this13","generateLoadDoneCallback","loadImage","_this14","closeLightbox","animationOnKeyInput","direction","_this15","requestMove","_this16","_this$props","clickOutsideToClose","discourageDownloads","toolbarButtons","reactModalStyle","_onAfterOpen","onAfterOpen","reactModalProps","_this$state","transitionStyle","transition","keyEndings","_ref13","images","addImage","imageClass","transforms","bestImageInfo","imageStyle","getTransform","cursor","backgroundImage","onDoubleClick","onWheel","loadingIcon","modalStyle","overlay","border","borderRadius","Modal","onRequestClose","contentLabel","appElement","wrapperClassName","animationDirection","onTouchStart","onTouchMove","onKeyUp","propTypes","mainSrcThumbnail","prevSrcThumbnail","nextSrcThumbnail","CopyMoveDirentProgressDialog","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","renderChildren","paddingLeft","hasChildren","hlClass","TreeView","dragStartNodeData","isTreeViewDropTipShow","dropNodeData","parseuri","loc","createDebug","namespace","prevTime","enabled","curr","ms","diff","coerce","formatter","formatters","val","formatArgs","logFn","log","console","useColors","colors","selectColor","init","instances","stack","disable","enable","namespaces","skips","humanize","s","h","plural","ceil","isNaN","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","code","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","j","empty","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","complete","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","rand","deviation","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","prop","r","storage","DEBUG","lastC","removeItem","WebkitAppearance","firebug","exception","chrome","local","localStorage","localstorage","default","_Async","_Creatable","_stateManager","_interopRequireDefault","_Select","__esModule","SelectCreatable","makeCreatableSelect","SelectCreatableState","_default","makeAsyncSelect","it","fails","require$$0","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","1","V","bitmap","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","all","IS_HTMLDDA","argument","isCallable","aFunction","isPrototypeOf","Deno","versions","v8","V8_VERSION","sham","getBuiltIn","require$$3","$Symbol","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","copyright","toObject","hasOwn","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","isSymbol","getMethod","P","ordinaryToPrimitive","pref","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","f","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","getter","setter","arity","trunc","toIntegerOrInfinity","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","every","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","ActiveXObject","domain","iframeDocument","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","initEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","hideTooltip","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","place","desiredPlace","getDimensions","tipWidth","tipHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","getTipOffsetTop","t","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","newPlace","chosen","choose","isNewState","boundingClientRect","targetTop","targetLeft","disToMouse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","fill","defaultColors","dark","background","arrow","warning","info","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","ReactTooltip","CONSTANT","rebuild","globalRebuild","mount","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","insecure","class","delayUpdate","globalEventOff","afterShow","afterHide","overridePosition","scrollHide","clickable","disableInternalStyle","newAriaProps","methodArray","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","querySelector","textContent","matches","msMatchesSelector","mozMatchesSelector","selector","escaped","nodeListToArray","shadowRoot","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","isGlobalCall","switchToSolid","FocusEvent","getPosition","reshowDelay","updateState","addScrollListener","updatePosition","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","isScroll","isMyElement","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","tooltipClass","hasCustomColors","Wrapper","supportedWrappers","htmlContent","data-id","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id || this.state.isVisible) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const imageCaption = imageItemsLength && (\n      <Fragment>\n        <span>{gettext('%curr% of %total%').replace('%curr%', imageIndex + 1).replace('%total%', imageItemsLength)}</span>\n        <br />\n        <a href={imageItems[imageIndex].url} target=\"_blank\">{gettext('Open in New Tab')}</a>\n      </Fragment>\n    );\n\n    return (\n      <Lightbox\n        mainSrc={imageItems[imageIndex].src}\n        imageTitle={imageItems[imageIndex].name}\n        imageCaption={imageCaption}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@reach/router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canPublishRepo,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Library Details\")}</span>\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            {canPublishRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"published\"\n                  )}`}\n                  to={siteRoot + \"published/\"}\n                  title={gettext(\"Published Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"published\")}\n                >\n                  <span\n                    className=\"sf2-icon-wiki-view\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Published Libraries\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"draft-info nav-text\">\n                    {gettext(\"Drafts\")}\n                    {this.props.draftCounts === 0 ? (\n                      \"\"\n                    ) : (\n                      <Badge color=\"info\" pill>\n                        {this.props.draftCounts}\n                      </Badge>\n                    )}\n                  </span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\"></span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br /> 2023 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  }\n\n  onFooterExpandedToggle = () => {\n    this.setState({collapsed: !this.state.collapsed});\n  }\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? '0' : '30rem',\n      borderBottomWidth: this.state.collapsed ? '0' : '1px',\n    };\n    return (\n        <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span aria-hidden=\"true\"\n              className={(this.state.collapsed ? 'keeper-icon-triangle-up' : 'keeper-icon-triangle-down') + ' vam'}\n              onClick={this.onFooterExpandedToggle}/>&nbsp;\n            <a href={siteRoot + 'project-catalog/'} target=\"_blank\" className=\"item\">{gettext('Project Catalog')}</a>\n            <a href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\" target=\"_blank\"\n              className=\"item\">{gettext('Help / Knowledge Base')}</a>\n            <a className=\"item cursor-pointer last-item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br/>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\" target=\"_blank\">About Keeper</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\" target=\"_blank\">Cared Data\n                                Commitment</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/f62758e53c/\" target=\"_blank\">Terms of Service</a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">Download the Keeper client for Windows, Linux, Mac, Android and iPhone</a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img className=\"logo\" id=\"seafile-logo\" src=\"/media/custom/seafile_logo_footer.png\"/>&nbsp; 2022 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img className=\"logo\" id=\"MPDL-logo\" src=\"/media/custom/mpdl.png\"/>\n                </a><br/><br/>\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">Contact Keeper Support</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\" target=\"_blank\">Impressum</a><br/>\n                <a href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\" target=\"_blank\">Privacy Policy</a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow &&\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle}/>\n            </ModalPortal>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel o-hidden\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, is_admin, isOpIconShown, isPermSelectDialogOpen } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={this.state.isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, isOpIconShown, isPermSelectDialogOpen } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n          }\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n            <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n              </li>\n              {canGenerateUploadLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n              )}\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n          <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              {canGenerateShareLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n              )}\n              <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from \"../utils/utils\";\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@reach/router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n    const desktopItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td><Link to={shareRepoUrl}>{data.repo_name}</Link></td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link><br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) &&\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>\n                  }\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you dont receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    let operations = [\"Rename\", \"Transfer\"];\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n    }\n    //KEEPER\n    operations.push(\"Divider\");\n    if (showAssignDoiMenuItem) {\n      operations.push(\"Assign DOI to current state\");\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push(\"Archive Library\");\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push(\"Certify Library\");\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push(\"Edit Metadata\");\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/lib/AsyncCreatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Frderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under Library Details on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MediaQuery from \"react-responsive\";\nimport moment from \"moment\";\nimport { Link, navigate } from \"@reach/router\";\nimport { Utils } from \"../../utils/utils\";\nimport { keeperAPI, seafileAPI } from \"../../utils/seafile-api\";\nimport { gettext, siteRoot, storages } from \"../../utils/constants\";\nimport ModalPortal from \"../../components/modal-portal\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport toaster from \"../../components/toast\";\nimport DeleteRepoDialog from \"../../components/dialog/delete-repo-dialog\";\nimport TransferDialog from \"../../components/dialog/transfer-dialog\";\nimport LibHistorySettingDialog from \"../../components/dialog/lib-history-setting-dialog\";\nimport ChangeRepoPasswordDialog from \"../../components/dialog/change-repo-password-dialog\";\nimport ResetEncryptedRepoPasswordDialog from \"../../components/dialog/reset-encrypted-repo-password-dialog\";\nimport LabelRepoStateDialog from \"../../components/dialog/label-repo-state-dialog\";\nimport LibSubFolderPermissionDialog from \"../../components/dialog/lib-sub-folder-permission-dialog\";\nimport Rename from \"../../components/rename\";\nimport MylibRepoMenu from \"./mylib-repo-menu\";\nimport RepoAPITokenDialog from \"../../components/dialog/repo-api-token-dialog\";\nimport RepoShareUploadLinksDialog from \"../../components/dialog/repo-share-upload-links-dialog\";\nimport LibOldFilesAutoDelDialog from \"../../components/dialog/lib-old-files-auto-del-dialog\";\nimport AssignDoiDialog from \"../../components/dialog/assign-doi-dialog\";\nimport ArchiveLibraryDialog from \"../../components/dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../../components/dialog/certify-library-dialog\";\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    \"Can not archive library due to unknown reason, please contact support.\";\n  if (d.status === \"success\") obj.setState({ quota: d.quota });\n  else if (d.status === \"in_processing\") msg = d.msg;\n  else if (d.status === \"quota_expired\")\n    error = gettext(\n      \"Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.\"\n    );\n  else if (d.status === \"snapshot_archived\")\n    error = gettext(\n      \"Cannot archive, since the library snapshot has already been archived.\"\n    );\n  else if (d.status === \"is_too_big\")\n    error = gettext(\"Cannot archive, since the library is too large.\");\n  else if (d.status === \"metadata_error\") {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === \"system_error\") error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false,\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch (item) {\n      case \"Star\":\n      case \"Unstar\":\n        this.onToggleStarRepo();\n        break;\n      case \"Share\":\n        this.onShareToggle();\n        break;\n      case \"Delete\":\n        this.onDeleteToggle();\n        break;\n      case \"Rename\":\n        this.onRenameToggle();\n        break;\n      case \"Transfer\":\n        this.onTransferToggle();\n        break;\n      case \"History Setting\":\n        this.onHistorySettingToggle();\n        break;\n      case \"Change Password\":\n        this.onChangePasswordToggle();\n        break;\n      case \"Reset Password\":\n        this.onResetPasswordToggle();\n        break;\n      case \"Folder Permission\":\n        this.onFolderPermissionToggle();\n        break;\n      case \"Label Current State\":\n        this.onLabelToggle();\n        break;\n      case \"API Token\":\n        this.onAPITokenToggle();\n        break;\n      case \"Share Links Admin\":\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case \"Old Files Auto Delete\":\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case \"Assign DOI to current state\":\n        this.onAssignDoiToggle();\n        break;\n      case \"Archive Library\":\n        this.onArchiveLibraryToggle();\n        break;\n      case \"Certify Library\":\n        this.onCertifyLibraryToggle();\n        break;\n      case \"Edit Metadata\":\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI\n        .unstarItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully unstarred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully starred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({ isDeleteDialogShow: !this.state.isDeleteDialogShow });\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferToggle = () => {\n    this.setState({ isTransferDialogShow: !this.state.isTransferDialogShow });\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({\n      isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow,\n    });\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({\n      isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow,\n    });\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({\n      isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow,\n    });\n  };\n\n  onLabelToggle = () => {\n    this.setState({\n      isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen,\n    });\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({\n      isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow,\n    });\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({ isAPITokenDialogShow: !this.state.isAPITokenDialogShow });\n  };\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({\n      isRepoShareUploadLinksDialogOpen:\n        !this.state.isRepoShareUploadLinksDialogOpen,\n    });\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({\n      isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen,\n    });\n  };\n\n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI\n      .renameRepo(repoID, newName)\n      .then(() => {\n        this.props.onRenameRepo(repo, newName);\n        this.onRenameCancel();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI\n      .transferRepo(repoID, user.email)\n      .then((res) => {\n        this.props.onTransferRepo(repoID);\n        let message = gettext(\"Successfully transferred the library.\");\n        toaster.success(message);\n      })\n      .catch((error) => {\n        if (error.response) {\n          toaster.danger(error.response.data.error_msg || gettext(\"Error\"), {\n            duration: 3,\n          });\n        } else {\n          toaster.danger(gettext(\"Failed. Please check the network.\"), {\n            duration: 3,\n          });\n        }\n      });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI\n      .deleteRepo(repo.repo_id)\n      .then((res) => {\n        this.setState({\n          isRepoDeleted: true,\n          isDeleteDialogShow: false,\n        });\n\n        this.props.onDeleteRepo(repo);\n        let name = repo.repo_name;\n        var msg = gettext(\"Successfully deleted {name}.\").replace(\n          \"{name}\",\n          name\n        );\n        toaster.success(msg);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext(\"Error\")) {\n          let name = repo.repo_name;\n          errMessage = gettext(\"Failed to delete {name}.\").replace(\n            \"{name}\",\n            name\n          );\n        }\n        toaster.danger(errMessage);\n\n        this.setState({ isRepoDeleted: false });\n      });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(\n      repo.repo_name\n    )}/`;\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n        onFocus={this.onFocus}\n      >\n        <td className=\"text-center\">\n          <a\n            href=\"#\"\n            role=\"button\"\n            aria-label={\n              this.state.isStarred ? gettext(\"Unstar\") : gettext(\"Star\")\n            }\n            onClick={this.onToggleStarRepo}\n          >\n            <i\n              className={`fa-star ${\n                this.state.isStarred ? \"fas\" : \"far star-empty\"\n              }`}\n            ></i>\n          </a>\n        </td>\n        <td>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Link to={repoURL}>{repo.repo_name}</Link>\n          )}\n          {!this.state.isRenaming &&\n            !repo.repo_name &&\n            gettext(\n              \"Broken (please contact your administrator to fix this library)\"\n            )}\n        </td>\n        <td>\n          {repo.repo_name && this.state.isOpIconShow && (\n            <div>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-share\"\n                title={gettext(\"Share\")}\n                role=\"button\"\n                aria-label={gettext(\"Share\")}\n                onClick={this.onShareToggle}\n              ></a>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-delete\"\n                title={gettext(\"Delete\")}\n                role=\"button\"\n                aria-label={gettext(\"Delete\")}\n                onClick={this.onDeleteToggle}\n              ></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format(\"llll\")}>\n          {moment(repo.last_modified).fromNow()}\n        </td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = (this.repoURL = `${siteRoot}library/${\n      repo.repo_id\n    }/${Utils.encodePath(repo.repo_name)}/`);\n\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n      >\n        <td onClick={this.visitRepo}>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name && (\n            <div>\n              (gettext('Broken (please contact your administrator to fix this\n              library)'))\n            </div>\n          )}\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span\n            className=\"item-meta-info\"\n            title={moment(repo.last_modified).format(\"llll\")}\n          >\n            {moment(repo.last_modified).fromNow()}\n          </span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">{this.renderPCUI()}</MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={\"library\"}\n              itemName={repo.repo_name}\n              itemPath={\"/\"}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      // scene one: (Share, Delete, itemToggle and other operations);\n      // scene two: (Share, Unshare), (Share), (Unshare)\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      if (operations.length == 2) {\n        return (\n          <Fragment>\n            {shareOperation}\n            {unshareOperation}\n          </Fragment>\n        );\n      }\n      if (operations.length == 1 && operations[0] === 'Share') {\n        return shareOperation;\n      }\n\n      if (operations.length == 1 && operations[0] === 'Unshare') {\n        return unshareOperation;\n      }\n    }\n    return null;\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n  \n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport { Utils } from \"../../utils/utils\";\nimport { gettext } from \"../../utils/constants\";\nimport ModalPortal from \"../modal-portal\";\nimport CreateFolder from \"../../components/dialog/create-folder-dialog\";\nimport CreateFile from \"../../components/dialog/create-file-dialog\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport ViewModeToolbar from \"./view-mode-toolbar\";\nimport ArchiveLibraryDialog from \"../dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../dialog/certify-library-dialog\";\nimport KeeperEditMetadataDialog from \"../dialog/keeper-edit-metadata-dialog\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { handleCanArchiveResponse } from \"../../pages/my-libs/mylib-repo-list-item\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: \".md\",\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: \"\",\n      isMobileOpMenuOpen: false,\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({ isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen });\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top = targetRect.bottom;\n    let style = { position: \"fixed\", display: \"block\", left: left, top: top };\n    this.setState({ operationMenuStyle: style });\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: true,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: true,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow,\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \"\",\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".md\",\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".xlsx\",\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".pptx\",\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".docx\",\n    });\n  };\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({ isCreateFileDialogShow: false });\n    this.props.onAddFile(filePath, isDraft);\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({ isCreateFolderDialogShow: false });\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some((object) => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\" || d.status === \"metadata_error\")\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === \"/\" ? \"library\" : \"dir\";\n    let itemName = path == \"/\" ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } =\n      Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ? (\n                <Fragment>\n                  <button\n                    className=\"btn btn-secondary operation-item\"\n                    onClick={this.onUploadClick}\n                    aria-haspopup=\"true\"\n                    aria-expanded={this.state.isUploadMenuShow}\n                    aria-controls=\"upload-menu\"\n                  >\n                    {gettext(\"Upload\")}\n                  </button>\n                  {this.state.isUploadMenuShow && (\n                    <div\n                      className=\"menu dropdown-menu\"\n                      style={this.state.operationMenuStyle}\n                      role=\"menu\"\n                      id=\"upload-menu\"\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFile}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Files\")}\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFolder}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Folder\")}\n                      </button>\n                    </div>\n                  )}\n                </Fragment>\n              ) : (\n                <button\n                  className=\"btn btn-secondary operation-item\"\n                  title={gettext(\"Upload\")}\n                  onClick={this.onUploadFile}\n                >\n                  {gettext(\"Upload\")}\n                </button>\n              )}\n            </Fragment>\n          )}\n          {canCreate && (\n            <Fragment>\n              <button\n                className=\"btn btn-secondary operation-item\"\n                onClick={this.onCreateClick}\n                aria-haspopup=\"true\"\n                aria-expanded={this.state.isUploadMenuShow}\n                aria-controls=\"new-menu\"\n              >\n                {gettext(\"New\")}\n              </button>\n              {this.state.isCreateMenuShow && (\n                <div\n                  className=\"menu dropdown-menu\"\n                  style={this.state.operationMenuStyle}\n                  role=\"menu\"\n                  id=\"new-menu\"\n                >\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFolderToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Folder\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFileToggle}\n                  >\n                    {gettext(\"New File\")}\n                  </button>\n                  <div className=\"dropdown-divider\"></div>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateMarkdownToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Markdown File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateExcelToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Excel File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreatePPTToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New PowerPoint File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateWordToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Word File\")}\n                  </button>\n                </div>\n              )}\n            </Fragment>\n          )}\n          {showShareBtn && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Share\")}\n              onClick={this.onShareClick}\n            >\n              {gettext(\"Share\")}\n            </button>\n          )}\n          {/* KEEPER */}\n          {isArchiveBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Archive\")}\n              onClick={this.onArchiveLibraryToggle}\n            >\n              {gettext(\"Archive\")}\n            </button>\n          )}\n          {isCertifyBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Certify\")}\n              onClick={this.onCertifyLibraryToggle}\n            >\n              {gettext(\"Certify\")}\n            </button>\n          )}\n          {isEditMetadataBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Metadata\")}\n              onClick={this.onEditMetadataToggle}\n            >\n              {gettext(\"Metadata\")}\n            </button>\n          )}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown\n          isOpen={this.state.isMobileOpMenuOpen}\n          toggle={this.toggleMobileOpMenu}\n        >\n          <DropdownToggle\n            tag=\"span\"\n            className=\"sf2-icon-plus mobile-toolbar-icon\"\n          />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>\n                {gettext(\"Upload\")}\n              </DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>\n                  {gettext(\"New Folder\")}\n                </DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>\n                  {gettext(\"New File\")}\n                </DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === \"rw\" || userPerm === \"admin\" || isCustomPermission) && (\n          <div className=\"dir-operation\">{content}</div>\n        )}\n        {Utils.isDesktop() && (\n          <ViewModeToolbar\n            currentMode={this.props.currentMode}\n            switchViewMode={this.props.switchViewMode}\n            isCustomPermission={isCustomPermission}\n          />\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let {dirent} = this.props;\n    this.changeState(dirent);\n    this.newInput.focus();\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport CommonToolbar from \"../../components/toolbar/common-toolbar\";\nimport ViewModeToolbar from \"../../components/toolbar/view-mode-toolbar\";\nimport DirOperationToolBar from \"../../components/toolbar/dir-operation-toolbar\";\nimport MultipleDirOperationToolbar from \"../../components/toolbar/multiple-dir-operation-toolbar\";\nimport ViewFileToolbar from \"../../components/toolbar/view-file-toolbar\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired, // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n  render() {\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span\n              className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n              title={gettext(\"Side Nav Menu\")}\n              onClick={this.props.onSideNavMenuClick}\n            ></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n              isCustomPermission={isCustomPermission}\n            />\n          </div>\n          <CommonToolbar\n            isLibView={true}\n            repoID={this.props.repoID}\n            repoName={this.props.repoName}\n            onSearchedClick={this.props.onSearchedClick}\n            searchPlaceholder={gettext(\"Search files in this library\")}\n          />\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.onSideNavMenuClick}\n          ></span>\n          {this.props.isDirentSelected ? (\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          ) : (\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          )}\n        </div>\n        <CommonToolbar\n          isLibView={true}\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          onSearchedClick={this.props.onSearchedClick}\n          searchPlaceholder={gettext(\"Search files in this library\")}\n        />\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport InternalLinkDialog from '../dialog/internal-link-dialog';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile &&\n          <InternalLinkDialog\n            repoID={this.props.repoID}\n            path={this.props.currentPath}\n          />\n        }\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : []}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({ isRenameing: false });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                {/* KEEPER bxb button */}\n                {this.props.isRepoOwner &&\n                  dirent.permission === \"rw\" &&\n                  dirent.type === \"file\" && (\n                    <a className=\"op-icon\" data-tip data-for=\"bloxberg\">\n                      <img\n                        className=\"small-icon\"\n                        src={bergImage}\n                        onClick={this.onItemCertify}\n                      />\n                      <ReactTooltip\n                        className=\"hover-keep\"\n                        id=\"bloxberg\"\n                        delayHide={1000}\n                        effect=\"solid\"\n                      >\n                        <span className=\"tooltip-bold\">\n                          {gettext(\n                            \"Certify your file via the bloxberg blockchain.\"\n                          )}\n                        </span>\n                      </ReactTooltip>\n                    </a>\n                  )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={this.canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    let currentNode = this.props.currentNode;\n    this.changeState(currentNode);\n    this.newInput.focus();\n    let type = currentNode.object.type;\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@reach/router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and other {n} items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and other {n} items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.deleteDir(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n      this.updateDirent(dirent, 'file_tags', fileTags);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      )\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel o-hidden\">\n          <div className=\"main-panel-north border-left-show\">\n            <LibContentToolbar\n              isViewFile={this.state.isViewFile}\n              filePermission={this.state.filePermission}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              onFileTagChanged={this.onToolbarFileTagChanged}\n              onSideNavMenuClick={this.props.onMenuClick}\n              repoID={this.props.repoID}\n              path={this.state.path}\n              isDirentSelected={this.state.isDirentSelected}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              onItemRename={this.onMainPanelItemRename}\n              direntList={this.state.direntList}\n              repoName={this.state.repoName}\n              repoEncrypted={this.state.repoEncrypted}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              userPerm={this.state.userPerm}\n              showShareBtn={showShareBtn}\n              enableDirPrivateShare={enableDirPrivateShare}\n              onAddFile={this.onAddFile}\n              onAddFolder={this.onAddFolder}\n              onUploadFile={this.onUploadFile}\n              onUploadFolder={this.onUploadFolder}\n              currentMode={this.state.currentMode}\n              switchViewMode={this.switchViewMode}\n              onSearchedClick={this.onSearchedClick}\n              isRepoOwner={isRepoOwner}\n              currentRepoInfo={this.state.currentRepoInfo}\n              updateDirent={this.updateDirent}\n              onDirentSelected={this.onDirentSelected}\n              showDirentDetail={this.showDirentDetail}\n              unSelectDirent={this.unSelectDirent}\n              onFilesTagChanged={this.onFileTagChanged}\n            />\n          </div>\n          <div className=\"main-panel-center flex-row\">\n            <LibContentContainer\n              pathPrefix={this.props.pathPrefix}\n              currentMode={this.state.currentMode}\n              path={this.state.path}\n              pathExist={this.state.pathExist}\n              currentRepoInfo={this.state.currentRepoInfo}\n              repoID={this.props.repoID}\n              enableDirPrivateShare={enableDirPrivateShare}\n              userPerm={userPerm}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              onTabNavClick={this.props.onTabNavClick}\n              onMainNavBarClick={this.onMainNavBarClick}\n              isViewFile={this.state.isViewFile}\n              hash={this.state.hash}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              goDraftPage={this.goDraftPage}\n              isFileLoading={this.state.isFileLoading}\n              isFileLoadedErr={this.state.isFileLoadedErr}\n              filePermission={this.state.filePermission}\n              content={this.state.content}\n              lastModified={this.state.lastModified}\n              latestContributor={this.state.latestContributor}\n              onLinkClick={this.onLinkClick}\n              isTreeDataLoading={this.state.isTreeDataLoading}\n              treeData={this.state.treeData}\n              currentNode={this.state.currentNode}\n              onNodeClick={this.onTreeNodeClick}\n              onNodeCollapse={this.onTreeNodeCollapse}\n              onNodeExpanded={this.onTreeNodeExpanded}\n              onAddFolderNode={this.onAddFolder}\n              onAddFileNode={this.onAddFile}\n              onRenameNode={this.onRenameTreeNode}\n              onDeleteNode={this.onDeleteTreeNode}\n              draftCounts={this.state.draftCounts}\n              usedRepoTags={this.state.usedRepoTags}\n              readmeMarkdown={this.state.readmeMarkdown}\n              updateUsedRepoTags={this.updateUsedRepoTags}\n              isDirentListLoading={this.state.isDirentListLoading}\n              direntList={direntItemsList}\n              fullDirentList={this.state.direntList}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              updateDirent={this.updateDirent}\n              onDirentClick={this.onDirentClick}\n              onItemClick={this.onItemClick}\n              onItemSelected={this.onDirentSelected}\n              onItemDelete={this.onMainPanelItemDelete}\n              onItemRename={this.onMainPanelItemRename}\n              onItemMove={this.onMoveItem}\n              onItemCopy={this.onCopyItem}\n              onAddFolder={this.onAddFolder}\n              onAddFile={this.onAddFile}\n              onFileTagChanged={this.onFileTagChanged}\n              isDirentSelected={this.state.isDirentSelected}\n              isAllDirentSelected={this.state.isAllDirentSelected}\n              onAllDirentSelected={this.onAllDirentSelected}\n              isDirentDetailShow={this.state.isDirentDetailShow}\n              selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              closeDirentDetail={this.closeDirentDetail}\n              showDirentDetail={this.showDirentDetail}\n              direntDetailPanelTab={this.state.direntDetailPanelTab}\n              onDeleteRepoTag={this.onDeleteRepoTag}\n              onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n              updateDetail={this.state.updateDetail}\n              onListContainerScroll={this.onListContainerScroll}\n              loadDirentList={this.loadDirentList}\n            />\n            {canUpload && this.state.pathExist && !this.state.isViewFile && (\n              <FileUploader\n                ref={uploader => this.uploader = uploader}\n                dragAndDrop={true}\n                path={this.state.path}\n                repoID={this.props.repoID}\n                direntList={this.state.direntList}\n                onFileUploadSuccess={this.onFileUploadSuccess}\n                isCustomPermission={isCustomPermission}\n              />\n            )}\n          </div>\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount = () => {\n    this.newInput.focus();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  changeMode: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  render() {\n    const { isLoading, hasNextPage, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <button className=\"btn btn-secondary btn-block search-group-members-btn text-left border-0\" onClick={this.props.changeMode}>\n            <i className=\"fas fa-search mr-1\" aria-hidden={true}></i>\n            {gettext('Search group members')}\n          </button>\n        }\n        <div className=\"manage-members\" onScroll={this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {hasNextPage && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass SearchGroupMembers extends React.Component {\n\n  // pagination is not needed\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      q: '', // query\n      groupMembers: [],\n      errMessage: [],\n      isItemFreezed: false\n    };\n    this.isInit = true;\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  submit = () => {\n    let { q } = this.state;\n    q = q.trim();\n    if (!q) {\n      return;\n    }\n    this.setState({\n      isLoading: true\n    });\n    seafileAPI.searchGroupMember(this.props.groupID, q).then((res) => {\n      this.isInit = false;\n      this.setState({\n        isLoading: false,\n        groupMembers: res.data,\n        errorMsg: ''\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errMessage\n      });\n    });\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      q: e.target.value\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.submit();\n    }\n  }\n\n  render() {\n    const { isLoading, q, errorMsg, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex justifiy-content-between\">\n          <Input\n            type=\"text\"\n            id=\"search-member\"\n            className=\"form-control search-members-input mr-2\"\n            value={q}\n            onChange={this.onInputChange}\n            onKeyDown={this.onInputKeyDown}\n          />\n          <Button type=\"button\" color=\"secondary\" className=\"flex-shrink-0\" onClick={this.submit} disabled={!q.trim()}>{gettext('Submit')}</Button>\n        </div>\n        {errorMsg && <p className=\"error\">{errorMsg}</p>}\n        <div className=\"manage-members\">\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              {groupMembers.length === 0 && !this.isInit && <div className=\"mx-2 my-4\">{gettext('No members')}</div>}\n              {groupMembers.length > 0 && (\n                <GroupMembers\n                  groupMembers={groupMembers}\n                  changeMember={this.changeMember}\n                  deleteMember={this.deleteMember}\n                  groupID={this.props.groupID}\n                  isOwner={this.props.isOwner}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />\n              )}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSearchGroupMembers.propTypes = propTypes;\n\nexport default SearchGroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\nimport SearchGroupMembers from '../search-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nconst MANAGEMENT_MODE= {\n  LIST_AND_ADD: 'list_and_add',\n  SEARCH: 'search'\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: MANAGEMENT_MODE.LIST_AND_ADD\n    };\n  }\n\n  changeMode = () => {\n    this.setState({\n      currentMode: this.state.currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n        MANAGEMENT_MODE.SEARCH : MANAGEMENT_MODE.LIST_AND_ADD\n    });\n  }\n\n  render() {\n    const { currentMode } = this.state;\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            gettext('Manage group members') : (\n              <Fragment>\n                <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent mr-2 p-0\" onClick={this.changeMode} title={gettext('Back')} aria-label={gettext('Back')}></button>\n                <span>{gettext('Search group members')}</span>\n              </Fragment>\n            )\n          }\n        </ModalHeader>\n        <ModalBody className=\"pb-0\">\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            <ListAndAddGroupMembers\n              groupID={groupID}\n              isOwner={isOwner}\n              changeMode={this.changeMode}\n            /> :\n            <SearchGroupMembers groupID={groupID} isOwner={isOwner} />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 50,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            innerRef={input => {this.newInput = input;}}\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n    this.newName = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newName.focus();\n    this.newName.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newName = input;}} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, navigate } from '@reach/router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\nconst ShareAdminShareLinksWrapper = MainContentWrapper(ShareAdminShareLinks);\nconst ShareAdminUploadLinksWrapper = MainContentWrapper(ShareAdminUploadLinks);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinksWrapper path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinksWrapper path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('wrapper')\n);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Placeholder for future translate functionality\n */\nfunction translate(str) {\n  var replaceStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!str) {\n    return '';\n  }\n\n  var translated = str;\n\n  if (replaceStrings) {\n    Object.keys(replaceStrings).forEach(function (placeholder) {\n      translated = translated.replace(placeholder, replaceStrings[placeholder]);\n    });\n  }\n\n  return translated;\n}\nfunction getWindowWidth() {\n  return typeof global.window !== 'undefined' ? global.window.innerWidth : 0;\n}\nfunction getWindowHeight() {\n  return typeof global.window !== 'undefined' ? global.window.innerHeight : 0;\n} // Get the highest window context that isn't cross-origin\n// (When in an iframe)\n\nfunction getHighestSafeWindowContext() {\n  var self = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.window.self;\n  var referrer = self.document.referrer; // If we reached the top level, return self\n\n  if (self === global.window.top || !referrer) {\n    return self;\n  }\n\n  var getOrigin = function getOrigin(href) {\n    return href.match(/(.*\\/\\/.*?)(\\/|$)/)[1];\n  }; // If parent is the same origin, we can move up one context\n  // Reference: https://stackoverflow.com/a/21965342/1601953\n\n\n  if (getOrigin(self.location.href) === getOrigin(referrer)) {\n    return getHighestSafeWindowContext(self.parent);\n  } // If a different origin, we consider the current level\n  // as the top reachable one\n\n\n  return self;\n}\n\n// Min image zoom level\nvar MIN_ZOOM_LEVEL = 0; // Max image zoom level\n\nvar MAX_ZOOM_LEVEL = 300; // Size ratio between previous and next zoom levels\n\nvar ZOOM_RATIO = 1.007; // How much to increase/decrease the zoom level when the zoom buttons are clicked\n\nvar ZOOM_BUTTON_INCREMENT_SIZE = 100; // Used to judge the amount of horizontal scroll needed to initiate a image move\n\nvar WHEEL_MOVE_Y_THRESHOLD = 1;\nvar KEYS = {\n  ESC: 27,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39\n}; // Actions\n\nvar ACTION_NONE = 0;\nvar ACTION_MOVE = 1;\nvar ACTION_SWIPE = 2;\nvar ACTION_PINCH = 3;\n\nvar SOURCE_ANY = 0;\nvar SOURCE_MOUSE = 1;\nvar SOURCE_TOUCH = 2;\nvar SOURCE_POINTER = 3; // Minimal swipe distance\n\nvar MIN_SWIPE_DISTANCE = 200;\n\nvar ReactImageLightbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactImageLightbox, _Component);\n\n  _createClass(ReactImageLightbox, null, [{\n    key: \"isTargetMatchImage\",\n    value: function isTargetMatchImage(target) {\n      return target && /ril-image-current/.test(target.className);\n    }\n  }, {\n    key: \"parseMouseEvent\",\n    value: function parseMouseEvent(mouseEvent) {\n      return {\n        id: 'mouse',\n        source: SOURCE_MOUSE,\n        x: parseInt(mouseEvent.clientX, 10),\n        y: parseInt(mouseEvent.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parseTouchPointer\",\n    value: function parseTouchPointer(touchPointer) {\n      return {\n        id: touchPointer.identifier,\n        source: SOURCE_TOUCH,\n        x: parseInt(touchPointer.clientX, 10),\n        y: parseInt(touchPointer.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parsePointerEvent\",\n    value: function parsePointerEvent(pointerEvent) {\n      return {\n        id: pointerEvent.pointerId,\n        source: SOURCE_POINTER,\n        x: parseInt(pointerEvent.clientX, 10),\n        y: parseInt(pointerEvent.clientY, 10)\n      };\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"getTransform\",\n    value: function getTransform(_ref) {\n      var _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$zoom = _ref.zoom,\n          zoom = _ref$zoom === void 0 ? 1 : _ref$zoom,\n          width = _ref.width,\n          targetWidth = _ref.targetWidth;\n      var nextX = x;\n      var windowWidth = getWindowWidth();\n\n      if (width > windowWidth) {\n        nextX += (windowWidth - width) / 2;\n      }\n\n      var scaleFactor = zoom * (targetWidth / width);\n      return {\n        transform: \"translate3d(\".concat(nextX, \"px,\").concat(y, \"px,0) scale3d(\").concat(scaleFactor, \",\").concat(scaleFactor, \",1)\")\n      };\n    }\n  }]);\n\n  function ReactImageLightbox(props) {\n    var _this;\n\n    _classCallCheck(this, ReactImageLightbox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactImageLightbox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      event.preventDefault();\n    });\n\n    _this.state = {\n      //-----------------------------\n      // Animation\n      //-----------------------------\n      // Lightbox is closing\n      // When Lightbox is mounted, if animation is enabled it will open with the reverse of the closing animation\n      isClosing: !props.animationDisabled,\n      // Component parts should animate (e.g., when images are moving, or image is being zoomed)\n      shouldAnimate: false,\n      //-----------------------------\n      // Zoom settings\n      //-----------------------------\n      // Zoom level of image\n      zoomLevel: MIN_ZOOM_LEVEL,\n      //-----------------------------\n      // Image position settings\n      //-----------------------------\n      // Horizontal offset from center\n      offsetX: 0,\n      // Vertical offset from center\n      offsetY: 0,\n      // image load error for srcType\n      loadErrorStatus: {}\n    }; // Refs\n\n    _this.outerEl = React.createRef();\n    _this.zoomInBtn = React.createRef();\n    _this.zoomOutBtn = React.createRef();\n    _this.caption = React.createRef();\n    _this.closeIfClickInner = _this.closeIfClickInner.bind(_assertThisInitialized(_this));\n    _this.handleImageDoubleClick = _this.handleImageDoubleClick.bind(_assertThisInitialized(_this));\n    _this.handleImageMouseWheel = _this.handleImageMouseWheel.bind(_assertThisInitialized(_this));\n    _this.handleKeyInput = _this.handleKeyInput.bind(_assertThisInitialized(_this));\n    _this.handleMouseUp = _this.handleMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleOuterMousewheel = _this.handleOuterMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleTouchStart = _this.handleTouchStart.bind(_assertThisInitialized(_this));\n    _this.handleTouchMove = _this.handleTouchMove.bind(_assertThisInitialized(_this));\n    _this.handleTouchEnd = _this.handleTouchEnd.bind(_assertThisInitialized(_this));\n    _this.handlePointerEvent = _this.handlePointerEvent.bind(_assertThisInitialized(_this));\n    _this.handleCaptionMousewheel = _this.handleCaptionMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleWindowResize = _this.handleWindowResize.bind(_assertThisInitialized(_this));\n    _this.handleZoomInButtonClick = _this.handleZoomInButtonClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutButtonClick = _this.handleZoomOutButtonClick.bind(_assertThisInitialized(_this));\n    _this.requestClose = _this.requestClose.bind(_assertThisInitialized(_this));\n    _this.requestMoveNext = _this.requestMoveNext.bind(_assertThisInitialized(_this));\n    _this.requestMovePrev = _this.requestMovePrev.bind(_assertThisInitialized(_this));\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  _createClass(ReactImageLightbox, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      // Timeouts - always clear it before umount\n      this.timeouts = []; // Current action\n\n      this.currentAction = ACTION_NONE; // Events source\n\n      this.eventsSource = SOURCE_ANY; // Empty pointers list\n\n      this.pointerList = []; // Prevent inner close\n\n      this.preventInnerClose = false;\n      this.preventInnerCloseTimeout = null; // Used to disable animation when changing props.mainSrc|nextSrc|prevSrc\n\n      this.keyPressed = false; // Used to store load state / dimensions of images\n\n      this.imageCache = {}; // Time the last keydown event was called (used in keyboard action rate limiting)\n\n      this.lastKeyDownTime = 0; // Used for debouncing window resize event\n\n      this.resizeTimeout = null; // Used to determine when actions are triggered by the scroll wheel\n\n      this.wheelActionTimeout = null;\n      this.resetScrollTimeout = null;\n      this.scrollX = 0;\n      this.scrollY = 0; // Used in panning zoomed images\n\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Used to swipe\n\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0; // Used to pinch\n\n      this.pinchTouchList = null;\n      this.pinchDistance = 0; // Used to differentiate between images with identical src\n\n      this.keyCounter = 0; // Used to detect a move when all src's remain unchanged (four or more of the same image in a row)\n\n      this.moveRequested = false;\n\n      if (!this.props.animationDisabled) {\n        // Make opening animation play\n        this.setState({\n          isClosing: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Prevents cross-origin errors when using a cross-origin iframe\n      this.windowContext = getHighestSafeWindowContext();\n      this.listeners = {\n        resize: this.handleWindowResize,\n        mouseup: this.handleMouseUp,\n        touchend: this.handleTouchEnd,\n        touchcancel: this.handleTouchEnd,\n        pointerdown: this.handlePointerEvent,\n        pointermove: this.handlePointerEvent,\n        pointerup: this.handlePointerEvent,\n        pointercancel: this.handlePointerEvent\n      };\n      Object.keys(this.listeners).forEach(function (type) {\n        _this2.windowContext.addEventListener(type, _this2.listeners[type]);\n      });\n      document.addEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.loadAllImages();\n    } // eslint-disable-next-line camelcase\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      // Iterate through the source types for prevProps and nextProps to\n      //  determine if any of the sources changed\n      var sourcesChanged = false;\n      var prevSrcDict = {};\n      var nextSrcDict = {};\n      this.getSrcTypes().forEach(function (srcType) {\n        if (_this3.props[srcType.name] !== nextProps[srcType.name]) {\n          sourcesChanged = true;\n          prevSrcDict[_this3.props[srcType.name]] = true;\n          nextSrcDict[nextProps[srcType.name]] = true;\n        }\n      });\n\n      if (sourcesChanged || this.moveRequested) {\n        // Reset the loaded state for images not rendered next\n        Object.keys(prevSrcDict).forEach(function (prevSrc) {\n          if (!(prevSrc in nextSrcDict) && prevSrc in _this3.imageCache) {\n            _this3.imageCache[prevSrc].loaded = false;\n          }\n        });\n        this.moveRequested = false; // Load any new images\n\n        this.loadAllImages(nextProps);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      // Wait for move...\n      return !this.moveRequested;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this4 = this;\n\n      this.didUnmount = true;\n      Object.keys(this.listeners).forEach(function (type) {\n        _this4.windowContext.removeEventListener(type, _this4.listeners[type]);\n      });\n      document.removeEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.timeouts.forEach(function (tid) {\n        return clearTimeout(tid);\n      });\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x, _x2) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (func, time) {\n      var _this5 = this;\n\n      var id = setTimeout(function () {\n        _this5.timeouts = _this5.timeouts.filter(function (tid) {\n          return tid !== id;\n        });\n        func();\n      }, time);\n      this.timeouts.push(id);\n      return id;\n    })\n  }, {\n    key: \"setPreventInnerClose\",\n    value: function setPreventInnerClose() {\n      var _this6 = this;\n\n      if (this.preventInnerCloseTimeout) {\n        this.clearTimeout(this.preventInnerCloseTimeout);\n      }\n\n      this.preventInnerClose = true;\n      this.preventInnerCloseTimeout = this.setTimeout(function () {\n        _this6.preventInnerClose = false;\n        _this6.preventInnerCloseTimeout = null;\n      }, 100);\n    } // Get info for the best suited image to display with the given srcType\n\n  }, {\n    key: \"getBestImageForType\",\n    value: function getBestImageForType(srcType) {\n      var imageSrc = this.props[srcType];\n      var fitSizes = {};\n\n      if (this.isImageLoaded(imageSrc)) {\n        // Use full-size image if available\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height);\n      } else if (this.isImageLoaded(this.props[\"\".concat(srcType, \"Thumbnail\")])) {\n        // Fall back to using thumbnail if the image has not been loaded\n        imageSrc = this.props[\"\".concat(srcType, \"Thumbnail\")];\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height, true);\n      } else {\n        return null;\n      }\n\n      return {\n        src: imageSrc,\n        height: this.imageCache[imageSrc].height,\n        width: this.imageCache[imageSrc].width,\n        targetHeight: fitSizes.height,\n        targetWidth: fitSizes.width\n      };\n    } // Get sizing for when an image is larger than the window\n\n  }, {\n    key: \"getFitSizes\",\n    value: function getFitSizes(width, height, stretch) {\n      var boxSize = this.getLightboxRect();\n      var maxHeight = boxSize.height - this.props.imagePadding * 2;\n      var maxWidth = boxSize.width - this.props.imagePadding * 2;\n\n      if (!stretch) {\n        maxHeight = Math.min(maxHeight, height);\n        maxWidth = Math.min(maxWidth, width);\n      }\n\n      var maxRatio = maxWidth / maxHeight;\n      var srcRatio = width / height;\n\n      if (maxRatio > srcRatio) {\n        // height is the constraining dimension of the photo\n        return {\n          width: width * maxHeight / height,\n          height: maxHeight\n        };\n      }\n\n      return {\n        width: maxWidth,\n        height: height * maxWidth / width\n      };\n    }\n  }, {\n    key: \"getMaxOffsets\",\n    value: function getMaxOffsets() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      var currentImageInfo = this.getBestImageForType('mainSrc');\n\n      if (currentImageInfo === null) {\n        return {\n          maxX: 0,\n          minX: 0,\n          maxY: 0,\n          minY: 0\n        };\n      }\n\n      var boxSize = this.getLightboxRect();\n      var zoomMultiplier = this.getZoomMultiplier(zoomLevel);\n      var maxX = 0;\n\n      if (zoomMultiplier * currentImageInfo.width - boxSize.width < 0) {\n        // if there is still blank space in the X dimension, don't limit except to the opposite edge\n        maxX = (boxSize.width - zoomMultiplier * currentImageInfo.width) / 2;\n      } else {\n        maxX = (zoomMultiplier * currentImageInfo.width - boxSize.width) / 2;\n      }\n\n      var maxY = 0;\n\n      if (zoomMultiplier * currentImageInfo.height - boxSize.height < 0) {\n        // if there is still blank space in the Y dimension, don't limit except to the opposite edge\n        maxY = (boxSize.height - zoomMultiplier * currentImageInfo.height) / 2;\n      } else {\n        maxY = (zoomMultiplier * currentImageInfo.height - boxSize.height) / 2;\n      }\n\n      return {\n        maxX: maxX,\n        maxY: maxY,\n        minX: -1 * maxX,\n        minY: -1 * maxY\n      };\n    } // Get image src types\n\n  }, {\n    key: \"getSrcTypes\",\n    value: function getSrcTypes() {\n      return [{\n        name: 'mainSrc',\n        keyEnding: \"i\".concat(this.keyCounter)\n      }, {\n        name: 'mainSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter)\n      }, {\n        name: 'nextSrc',\n        keyEnding: \"i\".concat(this.keyCounter + 1)\n      }, {\n        name: 'nextSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter + 1)\n      }, {\n        name: 'prevSrc',\n        keyEnding: \"i\".concat(this.keyCounter - 1)\n      }, {\n        name: 'prevSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter - 1)\n      }];\n    }\n    /**\n     * Get sizing when the image is scaled\n     */\n\n  }, {\n    key: \"getZoomMultiplier\",\n    value: function getZoomMultiplier() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      return Math.pow(ZOOM_RATIO, zoomLevel);\n    }\n    /**\n     * Get the size of the lightbox in pixels\n     */\n\n  }, {\n    key: \"getLightboxRect\",\n    value: function getLightboxRect() {\n      if (this.outerEl.current) {\n        return this.outerEl.current.getBoundingClientRect();\n      }\n\n      return {\n        width: getWindowWidth(),\n        height: getWindowHeight(),\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x3) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (id) {\n      this.timeouts = this.timeouts.filter(function (tid) {\n        return tid !== id;\n      });\n      clearTimeout(id);\n    }) // Change zoom level\n\n  }, {\n    key: \"changeZoom\",\n    value: function changeZoom(zoomLevel, clientX, clientY) {\n      // Ignore if zoom disabled\n      if (!this.props.enableZoom) {\n        return;\n      } // Constrain zoom level to the set bounds\n\n\n      var nextZoomLevel = Math.max(MIN_ZOOM_LEVEL, Math.min(MAX_ZOOM_LEVEL, zoomLevel)); // Ignore requests that don't change the zoom level\n\n      if (nextZoomLevel === this.state.zoomLevel) {\n        return;\n      }\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        // Snap back to center if zoomed all the way out\n        this.setState({\n          zoomLevel: nextZoomLevel,\n          offsetX: 0,\n          offsetY: 0\n        });\n        return;\n      }\n\n      var imageBaseSize = this.getBestImageForType('mainSrc');\n\n      if (imageBaseSize === null) {\n        return;\n      }\n\n      var currentZoomMultiplier = this.getZoomMultiplier();\n      var nextZoomMultiplier = this.getZoomMultiplier(nextZoomLevel); // Default to the center of the image to zoom when no mouse position specified\n\n      var boxRect = this.getLightboxRect();\n      var pointerX = typeof clientX !== 'undefined' ? clientX - boxRect.left : boxRect.width / 2;\n      var pointerY = typeof clientY !== 'undefined' ? clientY - boxRect.top : boxRect.height / 2;\n      var currentImageOffsetX = (boxRect.width - imageBaseSize.width * currentZoomMultiplier) / 2;\n      var currentImageOffsetY = (boxRect.height - imageBaseSize.height * currentZoomMultiplier) / 2;\n      var currentImageRealOffsetX = currentImageOffsetX - this.state.offsetX;\n      var currentImageRealOffsetY = currentImageOffsetY - this.state.offsetY;\n      var currentPointerXRelativeToImage = (pointerX - currentImageRealOffsetX) / currentZoomMultiplier;\n      var currentPointerYRelativeToImage = (pointerY - currentImageRealOffsetY) / currentZoomMultiplier;\n      var nextImageRealOffsetX = pointerX - currentPointerXRelativeToImage * nextZoomMultiplier;\n      var nextImageRealOffsetY = pointerY - currentPointerYRelativeToImage * nextZoomMultiplier;\n      var nextImageOffsetX = (boxRect.width - imageBaseSize.width * nextZoomMultiplier) / 2;\n      var nextImageOffsetY = (boxRect.height - imageBaseSize.height * nextZoomMultiplier) / 2;\n      var nextOffsetX = nextImageOffsetX - nextImageRealOffsetX;\n      var nextOffsetY = nextImageOffsetY - nextImageRealOffsetY; // When zooming out, limit the offset so things don't get left askew\n\n      if (this.currentAction !== ACTION_PINCH) {\n        var maxOffsets = this.getMaxOffsets();\n\n        if (this.state.zoomLevel > nextZoomLevel) {\n          nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, nextOffsetX));\n          nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, nextOffsetY));\n        }\n      }\n\n      this.setState({\n        zoomLevel: nextZoomLevel,\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      });\n    }\n  }, {\n    key: \"closeIfClickInner\",\n    value: function closeIfClickInner(event) {\n      if (!this.preventInnerClose && event.target.className.search(/\\bril-inner\\b/) > -1) {\n        this.requestClose(event);\n      }\n    }\n    /**\n     * Handle user keyboard actions\n     */\n\n  }, {\n    key: \"handleKeyInput\",\n    value: function handleKeyInput(event) {\n      event.stopPropagation(); // Ignore key input during animations\n\n      if (this.isAnimating()) {\n        return;\n      } // Allow slightly faster navigation through the images when user presses keys repeatedly\n\n\n      if (event.type === 'keyup') {\n        this.lastKeyDownTime -= this.props.keyRepeatKeyupBonus;\n        return;\n      }\n\n      var keyCode = event.which || event.keyCode; // Ignore key presses that happen too close to each other (when rapid fire key pressing or holding down the key)\n      // But allow it if it's a lightbox closing action\n\n      var currentTime = new Date();\n\n      if (currentTime.getTime() - this.lastKeyDownTime < this.props.keyRepeatLimit && keyCode !== KEYS.ESC) {\n        return;\n      }\n\n      this.lastKeyDownTime = currentTime.getTime();\n\n      switch (keyCode) {\n        // ESC key closes the lightbox\n        case KEYS.ESC:\n          event.preventDefault();\n          this.requestClose(event);\n          break;\n        // Left arrow key moves to previous image\n\n        case KEYS.LEFT_ARROW:\n          if (!this.props.prevSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMovePrev(event);\n          break;\n        // Right arrow key moves to next image\n\n        case KEYS.RIGHT_ARROW:\n          if (!this.props.nextSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMoveNext(event);\n          break;\n      }\n    }\n    /**\n     * Handle a mouse wheel event over the lightbox container\n     */\n\n  }, {\n    key: \"handleOuterMousewheel\",\n    value: function handleOuterMousewheel(event) {\n      var _this7 = this;\n\n      // Prevent scrolling of the background\n      event.stopPropagation();\n      this.clearTimeout(this.resetScrollTimeout);\n      this.resetScrollTimeout = this.setTimeout(function () {\n        _this7.scrollX = 0;\n        _this7.scrollY = 0;\n      }, 300);\n    }\n  }, {\n    key: \"handleImageMouseWheel\",\n    value: function handleImageMouseWheel(event) {\n      // when gesture move up/down/left/right, event.deltaY is integer, move image\n      if (parseInt(event.deltaY) === parseFloat(event.deltaY)) {\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n          var newOffsetY = this.state.offsetY + event.deltaY;\n          this.setState({\n            offsetY: newOffsetY\n          });\n        } else {\n          var newOffsetX = this.state.offsetX + event.deltaX;\n          this.setState({\n            offsetX: newOffsetX\n          });\n        }\n\n        return;\n      } // when gesture zoom in or zoom out, event.deltaY is decimal, zoom image\n\n\n      var yThreshold = WHEEL_MOVE_Y_THRESHOLD;\n\n      if (Math.abs(event.deltaY) >= Math.abs(event.deltaX)) {\n        event.stopPropagation(); // If the vertical scroll amount was large enough, perform a zoom\n\n        if (Math.abs(event.deltaY) < yThreshold) {\n          return;\n        }\n\n        this.scrollX = 0;\n        this.scrollY += event.deltaY;\n        this.changeZoom(this.state.zoomLevel - event.deltaY, event.clientX, event.clientY);\n      }\n    }\n    /**\n     * Handle a double click on the current image\n     */\n\n  }, {\n    key: \"handleImageDoubleClick\",\n    value: function handleImageDoubleClick(event) {\n      if (this.state.zoomLevel > MIN_ZOOM_LEVEL) {\n        // A double click when zoomed in zooms all the way out\n        this.changeZoom(MIN_ZOOM_LEVEL, event.clientX, event.clientY);\n      } else {\n        // A double click when zoomed all the way out zooms in\n        this.changeZoom(this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE, event.clientX, event.clientY);\n      }\n    }\n  }, {\n    key: \"shouldHandleEvent\",\n    value: function shouldHandleEvent(source) {\n      if (this.eventsSource === source) {\n        return true;\n      }\n\n      if (this.eventsSource === SOURCE_ANY) {\n        this.eventsSource = source;\n        return true;\n      }\n\n      switch (source) {\n        case SOURCE_MOUSE:\n          return false;\n\n        case SOURCE_TOUCH:\n          this.eventsSource = SOURCE_TOUCH;\n          this.filterPointersBySource();\n          return true;\n\n        case SOURCE_POINTER:\n          if (this.eventsSource === SOURCE_MOUSE) {\n            this.eventsSource = SOURCE_POINTER;\n            this.filterPointersBySource();\n            return true;\n          }\n\n          return false;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"addPointer\",\n    value: function addPointer(pointer) {\n      this.pointerList.push(pointer);\n    }\n  }, {\n    key: \"removePointer\",\n    value: function removePointer(pointer) {\n      this.pointerList = this.pointerList.filter(function (_ref2) {\n        var id = _ref2.id;\n        return id !== pointer.id;\n      });\n    }\n  }, {\n    key: \"filterPointersBySource\",\n    value: function filterPointersBySource() {\n      var _this8 = this;\n\n      this.pointerList = this.pointerList.filter(function (_ref3) {\n        var source = _ref3.source;\n        return source === _this8.eventsSource;\n      });\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        this.addPointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.multiPointerMove(event, [ReactImageLightbox.parseMouseEvent(event)]);\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.removePointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"handlePointerEvent\",\n    value: function handlePointerEvent(event) {\n      if (this.shouldHandleEvent(SOURCE_POINTER)) {\n        switch (event.type) {\n          case 'pointerdown':\n            if (ReactImageLightbox.isTargetMatchImage(event.target)) {\n              this.addPointer(ReactImageLightbox.parsePointerEvent(event));\n              this.multiPointerStart(event);\n            }\n\n            break;\n\n          case 'pointermove':\n            this.multiPointerMove(event, [ReactImageLightbox.parsePointerEvent(event)]);\n            break;\n\n          case 'pointerup':\n          case 'pointercancel':\n            this.removePointer(ReactImageLightbox.parsePointerEvent(event));\n            this.multiPointerEnd(event);\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"handleTouchStart\",\n    value: function handleTouchStart(event) {\n      var _this9 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        [].forEach.call(event.changedTouches, function (eventTouch) {\n          return _this9.addPointer(ReactImageLightbox.parseTouchPointer(eventTouch));\n        });\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleTouchMove\",\n    value: function handleTouchMove(event) {\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        this.multiPointerMove(event, [].map.call(event.changedTouches, function (eventTouch) {\n          return ReactImageLightbox.parseTouchPointer(eventTouch);\n        }));\n      }\n    }\n  }, {\n    key: \"handleTouchEnd\",\n    value: function handleTouchEnd(event) {\n      var _this10 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        [].map.call(event.changedTouches, function (touch) {\n          return _this10.removePointer(ReactImageLightbox.parseTouchPointer(touch));\n        });\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"decideMoveOrSwipe\",\n    value: function decideMoveOrSwipe(pointer) {\n      if (this.state.zoomLevel <= MIN_ZOOM_LEVEL) {\n        this.handleSwipeStart(pointer);\n      } else {\n        this.handleMoveStart(pointer);\n      }\n    }\n  }, {\n    key: \"multiPointerStart\",\n    value: function multiPointerStart(event) {\n      this.handleEnd(null);\n\n      switch (this.pointerList.length) {\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerMove\",\n    value: function multiPointerMove(event, pointerList) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          {\n            event.preventDefault();\n            this.handleMove(pointerList[0]);\n            break;\n          }\n\n        case ACTION_SWIPE:\n          {\n            event.preventDefault();\n            this.handleSwipe(pointerList[0]);\n            break;\n          }\n\n        case ACTION_PINCH:\n          {\n            event.preventDefault();\n            this.handlePinch(pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerEnd\",\n    value: function multiPointerEnd(event) {\n      if (this.currentAction !== ACTION_NONE) {\n        this.setPreventInnerClose();\n        this.handleEnd(event);\n      }\n\n      switch (this.pointerList.length) {\n        case 0:\n          {\n            this.eventsSource = SOURCE_ANY;\n            break;\n          }\n\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(event) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          this.handleMoveEnd(event);\n          break;\n\n        case ACTION_SWIPE:\n          this.handleSwipeEnd(event);\n          break;\n\n        case ACTION_PINCH:\n          this.handlePinchEnd(event);\n          break;\n      }\n    } // Handle move start over the lightbox container\n    // This happens:\n    // - On a mouseDown event\n    // - On a touchstart event\n\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(_ref4) {\n      var clientX = _ref4.x,\n          clientY = _ref4.y;\n\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_MOVE;\n      this.moveStartX = clientX;\n      this.moveStartY = clientY;\n      this.moveStartOffsetX = this.state.offsetX;\n      this.moveStartOffsetY = this.state.offsetY;\n    } // Handle dragging over the lightbox container\n    // This happens:\n    // - After a mouseDown and before a mouseUp event\n    // - After a touchstart and before a touchend event\n\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(_ref5) {\n      var clientX = _ref5.x,\n          clientY = _ref5.y;\n      var newOffsetX = this.moveStartX - clientX + this.moveStartOffsetX;\n      var newOffsetY = this.moveStartY - clientY + this.moveStartOffsetY;\n\n      if (this.state.offsetX !== newOffsetX || this.state.offsetY !== newOffsetY) {\n        this.setState({\n          offsetX: newOffsetX,\n          offsetY: newOffsetY\n        });\n      }\n    }\n  }, {\n    key: \"handleMoveEnd\",\n    value: function handleMoveEnd() {\n      var _this11 = this;\n\n      this.currentAction = ACTION_NONE;\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Snap image back into frame if outside max offset range\n\n      var maxOffsets = this.getMaxOffsets();\n      var nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, this.state.offsetX));\n      var nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, this.state.offsetY));\n\n      if (nextOffsetX !== this.state.offsetX || nextOffsetY !== this.state.offsetY) {\n        this.setState({\n          offsetX: nextOffsetX,\n          offsetY: nextOffsetY,\n          shouldAnimate: true\n        });\n        this.setTimeout(function () {\n          _this11.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n    }\n  }, {\n    key: \"handleSwipeStart\",\n    value: function handleSwipeStart(_ref6) {\n      var clientX = _ref6.x,\n          clientY = _ref6.y;\n      this.currentAction = ACTION_SWIPE;\n      this.swipeStartX = clientX;\n      this.swipeStartY = clientY;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipe\",\n    value: function handleSwipe(_ref7) {\n      var clientX = _ref7.x,\n          clientY = _ref7.y;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipeEnd\",\n    value: function handleSwipeEnd(event) {\n      var xDiff = this.swipeEndX - this.swipeStartX;\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(this.swipeEndY - this.swipeStartY);\n      this.currentAction = ACTION_NONE;\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0;\n\n      if (!event || this.isAnimating() || xDiffAbs < yDiffAbs * 1.5) {\n        return;\n      }\n\n      if (xDiffAbs < MIN_SWIPE_DISTANCE) {\n        var boxRect = this.getLightboxRect();\n\n        if (xDiffAbs < boxRect.width / 4) {\n          return;\n        }\n      }\n\n      if (xDiff > 0 && this.props.prevSrc) {\n        event.preventDefault();\n        this.requestMovePrev();\n      } else if (xDiff < 0 && this.props.nextSrc) {\n        event.preventDefault();\n        this.requestMoveNext();\n      }\n    }\n  }, {\n    key: \"calculatePinchDistance\",\n    value: function calculatePinchDistance() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref9 = _slicedToArray(_ref8, 2),\n          a = _ref9[0],\n          b = _ref9[1];\n\n      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    }\n  }, {\n    key: \"calculatePinchCenter\",\n    value: function calculatePinchCenter() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref11 = _slicedToArray(_ref10, 2),\n          a = _ref11[0],\n          b = _ref11[1];\n\n      return {\n        x: a.x - (a.x - b.x) / 2,\n        y: a.y - (a.y - b.y) / 2\n      };\n    }\n  }, {\n    key: \"handlePinchStart\",\n    value: function handlePinchStart(pointerList) {\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_PINCH;\n      this.pinchTouchList = pointerList.map(function (_ref12) {\n        var id = _ref12.id,\n            x = _ref12.x,\n            y = _ref12.y;\n        return {\n          id: id,\n          x: x,\n          y: y\n        };\n      });\n      this.pinchDistance = this.calculatePinchDistance();\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(pointerList) {\n      this.pinchTouchList = this.pinchTouchList.map(function (oldPointer) {\n        for (var i = 0; i < pointerList.length; i += 1) {\n          if (pointerList[i].id === oldPointer.id) {\n            return pointerList[i];\n          }\n        }\n\n        return oldPointer;\n      });\n      var newDistance = this.calculatePinchDistance();\n      var zoomLevel = this.state.zoomLevel + newDistance - this.pinchDistance;\n      this.pinchDistance = newDistance;\n\n      var _this$calculatePinchC = this.calculatePinchCenter(this.pinchTouchList),\n          clientX = _this$calculatePinchC.x,\n          clientY = _this$calculatePinchC.y;\n\n      this.changeZoom(zoomLevel, clientX, clientY);\n    }\n  }, {\n    key: \"handlePinchEnd\",\n    value: function handlePinchEnd() {\n      this.currentAction = ACTION_NONE;\n      this.pinchTouchList = null;\n      this.pinchDistance = 0;\n    } // Handle the window resize event\n\n  }, {\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      this.clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = this.setTimeout(this.forceUpdate.bind(this), 100);\n    }\n  }, {\n    key: \"handleZoomInButtonClick\",\n    value: function handleZoomInButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MAX_ZOOM_LEVEL) {\n        this.zoomOutBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleZoomOutButtonClick\",\n    value: function handleZoomOutButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel - ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        this.zoomInBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleCaptionMousewheel\",\n    value: function handleCaptionMousewheel(event) {\n      event.stopPropagation();\n\n      if (!this.caption.current) {\n        return;\n      }\n\n      var _this$caption$current = this.caption.current.getBoundingClientRect(),\n          height = _this$caption$current.height;\n\n      var _this$caption$current2 = this.caption.current,\n          scrollHeight = _this$caption$current2.scrollHeight,\n          scrollTop = _this$caption$current2.scrollTop;\n\n      if (event.deltaY > 0 && height + scrollTop >= scrollHeight || event.deltaY < 0 && scrollTop <= 0) {\n        event.preventDefault();\n      }\n    } // Detach key and mouse input events\n\n  }, {\n    key: \"isAnimating\",\n    value: function isAnimating() {\n      return this.state.shouldAnimate || this.state.isClosing;\n    } // Check if image is loaded\n\n  }, {\n    key: \"isImageLoaded\",\n    value: function isImageLoaded(imageSrc) {\n      return imageSrc && imageSrc in this.imageCache && this.imageCache[imageSrc].loaded;\n    } // Load image from src and call callback with image width and height on load\n\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(srcType, imageSrc, done) {\n      var _this12 = this;\n\n      // Return the image info if it is already cached\n      if (this.isImageLoaded(imageSrc)) {\n        this.setTimeout(function () {\n          done();\n        }, 1);\n        return;\n      }\n\n      var inMemoryImage = new global.Image();\n\n      if (this.props.imageCrossOrigin) {\n        inMemoryImage.crossOrigin = this.props.imageCrossOrigin;\n      }\n\n      inMemoryImage.onerror = function (errorEvent) {\n        _this12.props.onImageLoadError(imageSrc, srcType, errorEvent); // failed to load so set the state loadErrorStatus\n\n\n        _this12.setState(function (prevState) {\n          return {\n            loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, srcType, true))\n          };\n        });\n\n        done(errorEvent);\n      };\n\n      inMemoryImage.onload = function () {\n        _this12.props.onImageLoad(imageSrc, srcType, inMemoryImage);\n\n        _this12.imageCache[imageSrc] = {\n          loaded: true,\n          width: inMemoryImage.width,\n          height: inMemoryImage.height\n        };\n        done();\n      };\n\n      inMemoryImage.src = imageSrc;\n    } // Load all images and their thumbnails\n\n  }, {\n    key: \"loadAllImages\",\n    value: function loadAllImages() {\n      var _this13 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n      var generateLoadDoneCallback = function generateLoadDoneCallback(srcType, imageSrc) {\n        return function (err) {\n          // Give up showing image on error\n          if (err) {\n            return;\n          } // Don't rerender if the src is not the same as when the load started\n          // or if the component has unmounted\n\n\n          if (_this13.props[srcType] !== imageSrc || _this13.didUnmount) {\n            return;\n          } // Force rerender with the new image\n\n\n          _this13.forceUpdate();\n        };\n      }; // Load the images\n\n\n      this.getSrcTypes().forEach(function (srcType) {\n        var type = srcType.name; // there is no error when we try to load it initially\n\n        if (props[type] && _this13.state.loadErrorStatus[type]) {\n          _this13.setState(function (prevState) {\n            return {\n              loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, type, false))\n            };\n          });\n        } // Load unloaded images\n\n\n        if (props[type] && !_this13.isImageLoaded(props[type])) {\n          _this13.loadImage(type, props[type], generateLoadDoneCallback(type, props[type]));\n        }\n      });\n    } // Request that the lightbox be closed\n\n  }, {\n    key: \"requestClose\",\n    value: function requestClose(event) {\n      var _this14 = this;\n\n      // Call the parent close request\n      var closeLightbox = function closeLightbox() {\n        return _this14.props.onCloseRequest(event);\n      };\n\n      if (this.props.animationDisabled || event.type === 'keydown' && !this.props.animationOnKeyInput) {\n        // No animation\n        closeLightbox();\n        return;\n      } // With animation\n      // Start closing animation\n\n\n      this.setState({\n        isClosing: true\n      }); // Perform the actual closing at the end of the animation\n\n      this.setTimeout(closeLightbox, this.props.animationDuration);\n    }\n  }, {\n    key: \"requestMove\",\n    value: function requestMove(direction, event) {\n      var _this15 = this;\n\n      // Reset the zoom level on image move\n      var nextState = {\n        zoomLevel: MIN_ZOOM_LEVEL,\n        offsetX: 0,\n        offsetY: 0\n      }; // Enable animated states\n\n      if (!this.props.animationDisabled && (!this.keyPressed || this.props.animationOnKeyInput)) {\n        nextState.shouldAnimate = true;\n        this.setTimeout(function () {\n          return _this15.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n\n      this.keyPressed = false;\n      this.moveRequested = true;\n\n      if (direction === 'prev') {\n        this.keyCounter -= 1;\n        this.setState(nextState);\n        this.props.onMovePrevRequest(event);\n      } else {\n        this.keyCounter += 1;\n        this.setState(nextState);\n        this.props.onMoveNextRequest(event);\n      }\n    } // Request to transition to the next image\n\n  }, {\n    key: \"requestMoveNext\",\n    value: function requestMoveNext(event) {\n      this.requestMove('next', event);\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"requestMovePrev\",\n    value: function requestMovePrev(event) {\n      this.requestMove('prev', event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this16 = this;\n\n      var _this$props = this.props,\n          animationDisabled = _this$props.animationDisabled,\n          animationDuration = _this$props.animationDuration,\n          clickOutsideToClose = _this$props.clickOutsideToClose,\n          discourageDownloads = _this$props.discourageDownloads,\n          enableZoom = _this$props.enableZoom,\n          imageTitle = _this$props.imageTitle,\n          nextSrc = _this$props.nextSrc,\n          prevSrc = _this$props.prevSrc,\n          toolbarButtons = _this$props.toolbarButtons,\n          reactModalStyle = _this$props.reactModalStyle,\n          _onAfterOpen = _this$props.onAfterOpen,\n          imageCrossOrigin = _this$props.imageCrossOrigin,\n          reactModalProps = _this$props.reactModalProps;\n      var _this$state = this.state,\n          zoomLevel = _this$state.zoomLevel,\n          offsetX = _this$state.offsetX,\n          offsetY = _this$state.offsetY,\n          isClosing = _this$state.isClosing,\n          loadErrorStatus = _this$state.loadErrorStatus;\n      var boxSize = this.getLightboxRect();\n      var transitionStyle = {}; // Transition settings for sliding animations\n\n      if (!animationDisabled && this.isAnimating()) {\n        transitionStyle = _objectSpread2({}, transitionStyle, {\n          transition: \"transform \".concat(animationDuration, \"ms\")\n        });\n      } // Key endings to differentiate between images with the same src\n\n\n      var keyEndings = {};\n      this.getSrcTypes().forEach(function (_ref13) {\n        var name = _ref13.name,\n            keyEnding = _ref13.keyEnding;\n        keyEndings[name] = keyEnding;\n      }); // Images to be displayed\n\n      var images = [];\n\n      var addImage = function addImage(srcType, imageClass, transforms) {\n        // Ignore types that have no source defined for their full size image\n        if (!_this16.props[srcType]) {\n          return;\n        }\n\n        var bestImageInfo = _this16.getBestImageForType(srcType);\n\n        var imageStyle = _objectSpread2({}, transitionStyle, {}, ReactImageLightbox.getTransform(_objectSpread2({}, transforms, {}, bestImageInfo)));\n\n        if (zoomLevel > MIN_ZOOM_LEVEL) {\n          imageStyle.cursor = 'move';\n        } // support IE 9 and 11\n\n\n        var hasTrueValue = function hasTrueValue(object) {\n          return Object.keys(object).some(function (key) {\n            return object[key];\n          });\n        }; // when error on one of the loads then push custom error stuff\n\n\n        if (bestImageInfo === null && hasTrueValue(loadErrorStatus)) {\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-errored\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__errorContainer\"\n          }, _this16.props.imageLoadErrorMessage)));\n          return;\n        }\n\n        if (bestImageInfo === null) {\n          var loadingIcon = React.createElement(\"div\", {\n            className: \"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon\"\n          }, _toConsumableArray(new Array(12)).map(function (_, index) {\n            return React.createElement(\"div\", {\n              // eslint-disable-next-line react/no-array-index-key\n              key: index,\n              className: \"ril-loading-circle-point ril__loadingCirclePoint\"\n            });\n          })); // Fall back to loading icon if the thumbnail has not been loaded\n\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-not-loaded\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__loadingContainer\"\n          }, loadingIcon)));\n          return;\n        }\n\n        var imageSrc = bestImageInfo.src;\n\n        if (discourageDownloads) {\n          imageStyle.backgroundImage = \"url('\".concat(imageSrc, \"')\");\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril__imageDiscourager\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            style: imageStyle,\n            key: imageSrc + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril-download-blocker ril__downloadBlocker\"\n          })));\n        } else {\n          images.push(React.createElement(\"img\", _extends({}, imageCrossOrigin ? {\n            crossOrigin: imageCrossOrigin\n          } : {}, {\n            className: \"\".concat(imageClass, \" ril__image\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            onDragStart: function onDragStart(e) {\n              return e.preventDefault();\n            },\n            style: imageStyle,\n            src: imageSrc,\n            key: imageSrc + keyEndings[srcType],\n            alt: typeof imageTitle === 'string' ? imageTitle : translate('Image'),\n            draggable: false\n          })));\n        }\n      };\n\n      var zoomMultiplier = this.getZoomMultiplier(); // Next Image (displayed on the right)\n\n      addImage('nextSrc', 'ril-image-next ril__imageNext', {\n        x: boxSize.width\n      }); // Main Image\n\n      addImage('mainSrc', 'ril-image-current', {\n        x: -1 * offsetX,\n        y: -1 * offsetY,\n        zoom: zoomMultiplier\n      }); // Previous Image (displayed on the left)\n\n      addImage('prevSrc', 'ril-image-prev ril__imagePrev', {\n        x: -1 * boxSize.width\n      });\n      var modalStyle = {\n        overlay: _objectSpread2({\n          zIndex: 1000,\n          backgroundColor: 'transparent'\n        }, reactModalStyle.overlay),\n        content: _objectSpread2({\n          backgroundColor: 'transparent',\n          overflow: 'hidden',\n          // Needed, otherwise keyboard shortcuts scroll the page\n          border: 'none',\n          borderRadius: 0,\n          padding: 0,\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }, reactModalStyle.content)\n      };\n      return React.createElement(Modal, _extends({\n        isOpen: true,\n        onRequestClose: clickOutsideToClose ? this.requestClose : undefined,\n        onAfterOpen: function onAfterOpen() {\n          // Focus on the div with key handlers\n          if (_this16.outerEl.current) {\n            _this16.outerEl.current.focus();\n          }\n\n          _onAfterOpen();\n        },\n        style: modalStyle,\n        contentLabel: translate('Lightbox'),\n        appElement: typeof global.window !== 'undefined' ? global.window.document.body : undefined\n      }, reactModalProps), React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions\n        // Floating modal with closing animations\n        className: \"ril-outer ril__outer ril__outerAnimating \".concat(this.props.wrapperClassName, \" \").concat(isClosing ? 'ril-closing ril__outerClosing' : ''),\n        style: {\n          transition: \"opacity \".concat(animationDuration, \"ms\"),\n          animationDuration: \"\".concat(animationDuration, \"ms\"),\n          animationDirection: isClosing ? 'normal' : 'reverse'\n        },\n        ref: this.outerEl,\n        onWheel: this.handleOuterMousewheel,\n        onMouseMove: this.handleMouseMove,\n        onMouseDown: this.handleMouseDown,\n        onTouchStart: this.handleTouchStart,\n        onTouchMove: this.handleTouchMove,\n        tabIndex: \"-1\" // Enables key handlers on div\n        ,\n        onKeyDown: this.handleKeyInput,\n        onKeyUp: this.handleKeyInput\n      }, React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n        // Image holder\n        className: \"ril-inner ril__inner\",\n        onClick: clickOutsideToClose ? this.closeIfClickInner : undefined\n      }, images), prevSrc && React.createElement(\"button\", {\n        // Move to previous image button\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        key: \"prev\",\n        \"aria-label\": this.props.prevLabel,\n        onClick: !this.isAnimating() ? this.requestMovePrev : undefined // Ignore clicks during animation\n\n      }), nextSrc && React.createElement(\"button\", {\n        // Move to next image button\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        key: \"next\",\n        \"aria-label\": this.props.nextLabel,\n        onClick: !this.isAnimating() ? this.requestMoveNext : undefined // Ignore clicks during animation\n\n      }), React.createElement(\"div\", {\n        // Lightbox toolbar\n        className: \"ril-toolbar ril__toolbar\"\n      }, React.createElement(\"ul\", {\n        className: \"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide\"\n      }, React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"span\", {\n        className: \"ril-toolbar__item__child ril__toolbarItemChild\"\n      }, imageTitle))), React.createElement(\"ul\", {\n        className: \"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide\"\n      }, toolbarButtons && toolbarButtons.map(function (button, i) {\n        return React.createElement(\"li\", {\n          key: \"button_\".concat(i + 1),\n          className: \"ril-toolbar__item ril__toolbarItem\"\n        }, button);\n      }), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom in button\n        type: \"button\",\n        key: \"zoom-in\",\n        \"aria-label\": this.props.zoomInLabel,\n        className: ['ril-zoom-in', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomInButton'].concat(_toConsumableArray(zoomLevel === MAX_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomInBtn,\n        disabled: this.isAnimating() || zoomLevel === MAX_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MAX_ZOOM_LEVEL ? this.handleZoomInButtonClick : undefined\n      })), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom out button\n        type: \"button\",\n        key: \"zoom-out\",\n        \"aria-label\": this.props.zoomOutLabel,\n        className: ['ril-zoom-out', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomOutButton'].concat(_toConsumableArray(zoomLevel === MIN_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomOutBtn,\n        disabled: this.isAnimating() || zoomLevel === MIN_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MIN_ZOOM_LEVEL ? this.handleZoomOutButtonClick : undefined\n      })), React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox close button\n        type: \"button\",\n        key: \"close\",\n        \"aria-label\": this.props.closeLabel,\n        className: \"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton\",\n        onClick: !this.isAnimating() ? this.requestClose : undefined // Ignore clicks during animation\n\n      })))), this.props.imageCaption && // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      React.createElement(\"div\", {\n        // Image caption\n        onWheel: this.handleCaptionMousewheel,\n        onMouseDown: function onMouseDown(event) {\n          return event.stopPropagation();\n        },\n        className: \"ril-caption ril__caption\",\n        ref: this.caption\n      }, React.createElement(\"div\", {\n        className: \"ril-caption-content ril__captionContent\"\n      }, this.props.imageCaption))));\n    }\n  }]);\n\n  return ReactImageLightbox;\n}(Component);\n\nReactImageLightbox.propTypes = {\n  //-----------------------------\n  // Image sources\n  //-----------------------------\n  // Main display image url\n  mainSrc: PropTypes.string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  // Previous display image url (displayed to the left)\n  // If left undefined, movePrev actions will not be performed, and the button not displayed\n  prevSrc: PropTypes.string,\n  // Next display image url (displayed to the right)\n  // If left undefined, moveNext actions will not be performed, and the button not displayed\n  nextSrc: PropTypes.string,\n  //-----------------------------\n  // Image thumbnail sources\n  //-----------------------------\n  // Thumbnail image url corresponding to props.mainSrc\n  mainSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.prevSrc\n  prevSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.nextSrc\n  nextSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  //-----------------------------\n  // Event Handlers\n  //-----------------------------\n  // Close window event\n  // Should change the parent state such that the lightbox is not rendered\n  onCloseRequest: PropTypes.func.isRequired,\n  // Move to previous image event\n  // Should change the parent state such that props.prevSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.nextSrc, etc.\n  onMovePrevRequest: PropTypes.func,\n  // Move to next image event\n  // Should change the parent state such that props.nextSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.prevSrc, etc.\n  onMoveNextRequest: PropTypes.func,\n  // Called when an image fails to load\n  // (imageSrc: string, srcType: string, errorEvent: object): void\n  onImageLoadError: PropTypes.func,\n  // Called when image successfully loads\n  onImageLoad: PropTypes.func,\n  // Open window event\n  onAfterOpen: PropTypes.func,\n  //-----------------------------\n  // Download discouragement settings\n  //-----------------------------\n  // Enable download discouragement (prevents [right-click -> Save Image As...])\n  discourageDownloads: PropTypes.bool,\n  //-----------------------------\n  // Animation settings\n  //-----------------------------\n  // Disable all animation\n  animationDisabled: PropTypes.bool,\n  // Disable animation on actions performed with keyboard shortcuts\n  animationOnKeyInput: PropTypes.bool,\n  // Animation duration (ms)\n  animationDuration: PropTypes.number,\n  //-----------------------------\n  // Keyboard shortcut settings\n  //-----------------------------\n  // Required interval of time (ms) between key actions\n  // (prevents excessively fast navigation of images)\n  keyRepeatLimit: PropTypes.number,\n  // Amount of time (ms) restored after each keyup\n  // (makes rapid key presses slightly faster than holding down the key to navigate images)\n  keyRepeatKeyupBonus: PropTypes.number,\n  //-----------------------------\n  // Image info\n  //-----------------------------\n  // Image title\n  imageTitle: PropTypes.node,\n  // Image caption\n  imageCaption: PropTypes.node,\n  // Optional crossOrigin attribute\n  imageCrossOrigin: PropTypes.string,\n  //-----------------------------\n  // Lightbox style\n  //-----------------------------\n  // Set z-index style, etc., for the parent react-modal (format: https://github.com/reactjs/react-modal#styles )\n  reactModalStyle: PropTypes.object,\n  // Padding (px) between the edge of the window and the lightbox\n  imagePadding: PropTypes.number,\n  wrapperClassName: PropTypes.string,\n  //-----------------------------\n  // Other\n  //-----------------------------\n  // Array of custom toolbar buttons\n  toolbarButtons: PropTypes.arrayOf(PropTypes.node),\n  // When true, clicks outside of the image close the lightbox\n  clickOutsideToClose: PropTypes.bool,\n  // Set to false to disable zoom functionality and hide zoom buttons\n  enableZoom: PropTypes.bool,\n  // Override props set on react-modal (https://github.com/reactjs/react-modal)\n  reactModalProps: PropTypes.shape({}),\n  // Aria-labels\n  nextLabel: PropTypes.string,\n  prevLabel: PropTypes.string,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  closeLabel: PropTypes.string,\n  imageLoadErrorMessage: PropTypes.node\n};\nReactImageLightbox.defaultProps = {\n  imageTitle: null,\n  imageCaption: null,\n  toolbarButtons: null,\n  reactModalProps: {},\n  animationDisabled: false,\n  animationDuration: 300,\n  animationOnKeyInput: false,\n  clickOutsideToClose: true,\n  closeLabel: 'Close lightbox',\n  discourageDownloads: false,\n  enableZoom: true,\n  imagePadding: 10,\n  imageCrossOrigin: null,\n  keyRepeatKeyupBonus: 40,\n  keyRepeatLimit: 180,\n  mainSrcThumbnail: null,\n  nextLabel: 'Next image',\n  nextSrc: null,\n  nextSrcThumbnail: null,\n  onAfterOpen: function onAfterOpen() {},\n  onImageLoadError: function onImageLoadError() {},\n  onImageLoad: function onImageLoad() {},\n  onMoveNextRequest: function onMoveNextRequest() {},\n  onMovePrevRequest: function onMovePrevRequest() {},\n  prevLabel: 'Previous image',\n  prevSrc: null,\n  prevSrcThumbnail: null,\n  reactModalStyle: {},\n  wrapperClassName: '',\n  zoomInLabel: 'Zoom in',\n  zoomOutLabel: 'Zoom out',\n  imageLoadErrorMessage: 'This image failed to load'\n};\n\nexport default ReactImageLightbox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.props.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Async = require(\"./Async\");\n\nvar _Creatable = require(\"./Creatable\");\n\nvar _stateManager = _interopRequireDefault(require(\"./stateManager\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SelectCreatable = (0, _Creatable.makeCreatableSelect)(_Select.default);\nvar SelectCreatableState = (0, _stateManager.default)(SelectCreatable);\n\nvar _default = (0, _Async.makeAsyncSelect)(SelectCreatableState);\n\nexports.default = _default;","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n"],"sourceRoot":""}