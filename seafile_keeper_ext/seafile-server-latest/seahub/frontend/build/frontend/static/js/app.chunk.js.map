{"version":3,"sources":["../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/dialog/image-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/dialog/sort-options.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/search-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","../node_modules/@seafile/react-image-lightbox/dist/index.es.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","components/context-menu/actions.js","components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/react-select/lib/AsyncCreatable.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js"],"names":["Emitter","obj","key","prototype","mixin","module","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","length","cb","callbacks","i","splice","emit","args","Array","len","slice","listeners","hasListeners","base64encoder","keys","require","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","navigator","test","userAgent","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","message","upgrade","noop","packetslist","err","type","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","e","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","substring","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","parseInt","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","_this$props","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","_createClass","value","isTagSelected","_jsxs","className","concat","onClick","children","_jsx","style","backgroundColor","color","name","React","Component","TagList","_React$Component2","_super2","_this2","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","_this3","Fragment","ModalHeader","toggle","toggleCancel","gettext","ModalBody","href","createNewTag","ModalFooter","Button","EditFileTagDialog","_React$Component3","_super3","_this4","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","_this4$props","Modal","isOpen","CreateTagDialog","onClose","GlobalEventListener","handleShowEvent","hasOwnProp","show","handleHideEvent","hide","register","showCallback","hideCallback","uniqueId","unregister","canUseDOM","window","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","document","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","isVisible","_e$detail$position","position","x","y","_e$detail","currentObject","menuList","callIfExists","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","_window","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","_window2","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","_this2$state","_ref","rtl","opacity","pointerEvents","role","display","ref","menuItem","index","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","newInput","createRef","focus","setSelectionRange","Form","FormGroup","Label","for","Input","innerRef","input","onKeyPress","onChange","Alert","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","_this$props$data","Loading","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleKeyDown","onDropdownToggleClick","toggleOperationMenu","freezeItem","onMenuItemKeyDown","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","toggleClass","tagName","ButtonDropdown","DropdownToggle","title","onKeyDown","DropdownMenu","DropdownItem","divider","Dropdown","tag","tabIndex","defaultProps","str","hasOwnProperty","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","a","b","constructor","ImageDialog","imageItems","imageIndex","imageItemsLength","imageCaption","url","Lightbox","mainSrc","src","imageTitle","nextSrc","prevSrc","onCloseRequest","closeImagePopup","onMovePrevRequest","moveToPrevImage","onMoveNextRequest","moveToNextImage","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","dangerouslySetInnerHTML","__html","Group","object","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_assertThisInitialized","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","toLowerCase","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","Link","to","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","_this5","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","canPublishRepo","draftCounts","Badge","pill","canInvitePeople","renderSharedAdmin","renderCustomNavItems","_this6","AboutDialog","_len","_key","onCloseAboutDialog","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","MainPanel","_Component","script","createElement","async","body","appendChild","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","EmptyTip","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","Table","fileURL","encodePath","serviceURL","fileLink","bind","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","_Component2","onListCreatedFilesToggle","isListCreatedFiles","op","details","_this$props2","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","_Component3","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","_toConsumableArray","onScroll","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","_Component4","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","currentPerm","_this$state","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","showAdmin","Object","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","JSON","stringify","objUrl","ShareLinkPermissionEditor","view_cnt","ShareAdminLink","ShareAdminShareLinks","deleteShareLink","uploadItem","listUserShareLinks","ShareLink","ShareAdminUploadLinks","deleteUploadLink","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","storage_name","doi","LibsMobileThead","_slicedToArray","arr","isArray","Symbol","iterator","_arr","_n","_d","_e","_s","_i","unsupportedIterableToArray","TypeError","SortOptions","_e$target$value$split2","sortOptions","sortBySize","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","save","toggleSortOptionsDialog","isSortOptionsDialogOpen","load","listRepos","repoList","SortOptionsDialog","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","shared_by","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","DirPathBar","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","repo","passwd","storages","libraryTemplates","repoPasswordMinLength","Select","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","visitDeletedviaKey","onShowSidePanel","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","CreatableSelect","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","mode","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","_objectSpread","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","LibSubFolderSetGroupPermissionDialog","folderName","maxWidth","Rename","nativeEvent","stopImmediatePropagation","onRenameConfirm","_this$validateInput","validateInput","isValid","onRenameCancel","renameInput","hasSuffix","endIndex","lastIndexOf","MylibRepoMenu","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","operations","folderPermEnabled","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","unshift","RepoAPITokenPermissionEditor","onHideSelect","isEditing","onEditPermission","onSelectHandler","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","rel","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","Tooltip","delay","placement","helpText","KeeperArchiveMetadataForm","isFieldValid","RegExp","Boolean","isFormValid","validMd","outer","_step","_iterator","_createForOfIteratorHelper","s","f","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","promiseOptions","Promise","resolve","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","v","_this$setState","_defineProperty","_this7","hideDialog","header","paddingBottom","row","Col","sm","Row","inputField","_","AsyncCreatableSelect","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","MediaQuery","query","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","CommonToolbar","onSearchedClick","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","CollabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","create","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","CreateFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","_this$state2","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","MoveDirentDialog","CopyDirentDialog","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","searchPlaceholder","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkDialog","zIndex","UncontrolledTooltip","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","Popover","PopoverBody","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","ListTaggedFilesDialog","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","_this$props3","oldTime","CommentItem","ParticipantsList","participants","showIconTip","MentionsInput","defaultStyle","Mention","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","convertComment","mdFile","processor","process","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isSelected","getDirentItemMenuList","ReactTooltip","delayHide","effect","_customPermission$per","preview","activeDirent","_this$props4","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","documentElement","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","isImagePopupOpen","prevState","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","WikiMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","Math","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","getUpdateLink","_this$props7","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","_regeneratorRuntime","Op","hasOwn","defineProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","reject","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","return","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","iter","val","reverse","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","_res$data3","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","onDeleteItems","deleteMutipleDirents","deleteDirents","createDir","addDirent","createFile","paths","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data4","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","_componentDidMount","_asyncToGenerator","_callee","repoRes","permissionID","permissionRes","_context","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","unwatchRepo","_getAsyncCopyMoveProgress","_callee2","_message","_context2","queryAsyncOperationProgress","successful","deleteDir","deleteItemAjaxCallback","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","_React$PureComponent","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","RoleEditor","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","_this$state3","changeMode","SearchGroupMembers","q","searchGroupMember","isInit","MANAGEMENT_MODE","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","GeneralToolbar","MainContentWrapper","WrapperedComponent","Wrapper","GeneralToolBar","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","ShareAdminShareLinksWrapper","ShareAdminUploadLinksWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","contentClassName","ReactDOM","render","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","random","ii","debug","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","add","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","Function","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","onData","onPacket","selectTagcolor","createTag","createRepoTag","newTag","canSave","copyToClipboard","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","ReadmeDialog","readmeContent","MarkdownViewer","showTOC","scriptSource","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","exec","uri","source","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$1","$2","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","_defineProperties","descriptor","Constructor","protoProps","staticProps","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_getPrototypeOf","o","_setPrototypeOf","ReferenceError","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","arr2","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","translate","replaceStrings","translated","getWindowWidth","global","getHighestSafeWindowContext","referrer","getOrigin","parent","MAX_ZOOM_LEVEL","KEYS","ReactImageLightbox","instance","_possibleConstructorReturn","isClosing","animationDisabled","shouldAnimate","zoomLevel","offsetX","offsetY","loadErrorStatus","outerEl","zoomInBtn","zoomOutBtn","caption","closeIfClickInner","handleImageDoubleClick","handleImageMouseWheel","handleKeyInput","handleMouseUp","handleMouseDown","handleMouseMove","handleOuterMousewheel","handleTouchStart","handleTouchMove","handleTouchEnd","handlePointerEvent","handleCaptionMousewheel","handleWindowResize","handleZoomInButtonClick","handleZoomOutButtonClick","requestClose","requestMoveNext","requestMovePrev","subClass","superClass","mouseEvent","touchPointer","identifier","pointerEvent","pointerId","_ref$x","_ref$y","_ref$zoom","zoom","targetWidth","nextX","windowWidth","scaleFactor","transform","timeouts","currentAction","eventsSource","pointerList","preventInnerClose","preventInnerCloseTimeout","keyPressed","imageCache","lastKeyDownTime","resizeTimeout","wheelActionTimeout","resetScrollTimeout","scrollX","scrollY","moveStartX","moveStartY","moveStartOffsetX","moveStartOffsetY","swipeStartX","swipeStartY","swipeEndX","swipeEndY","pinchTouchList","pinchDistance","keyCounter","moveRequested","windowContext","resize","mouseup","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","handleWheel","passive","loadAllImages","sourcesChanged","prevSrcDict","nextSrcDict","getSrcTypes","srcType","didUnmount","tid","_setTimeout","_x","_x2","func","imageSrc","fitSizes","isImageLoaded","getFitSizes","targetHeight","stretch","boxSize","getLightboxRect","currentImageInfo","getBestImageForType","maxX","minX","maxY","minY","zoomMultiplier","getZoomMultiplier","keyEnding","pow","right","_clearTimeout","_x3","enableZoom","nextZoomLevel","imageBaseSize","currentZoomMultiplier","nextZoomMultiplier","boxRect","pointerX","pointerY","currentImageOffsetX","currentImageOffsetY","nextImageRealOffsetX","nextImageRealOffsetY","nextOffsetX","nextOffsetY","maxOffsets","getMaxOffsets","isAnimating","which","keyRepeatLimit","keyRepeatKeyupBonus","deltaY","abs","deltaX","changeZoom","newOffsetY","newOffsetX","filterPointersBySource","pointer","_ref2","_this8","_ref3","shouldHandleEvent","isTargetMatchImage","addPointer","parseMouseEvent","multiPointerStart","multiPointerMove","removePointer","multiPointerEnd","parsePointerEvent","_this9","changedTouches","eventTouch","parseTouchPointer","_this10","touch","handleSwipeStart","handleMoveStart","handleEnd","decideMoveOrSwipe","handlePinchStart","handleMove","handleSwipe","handlePinch","setPreventInnerClose","handleMoveEnd","handleSwipeEnd","handlePinchEnd","_ref4","_ref5","_this11","animationDuration","_ref6","_ref7","xDiff","xDiffAbs","yDiffAbs","_ref9","sqrt","_ref11","_ref12","calculatePinchDistance","oldPointer","newDistance","_this$calculatePinchC","calculatePinchCenter","forceUpdate","_this$caption$current2","_this12","inMemoryImage","Image","imageCrossOrigin","crossOrigin","errorEvent","onImageLoadError","onImageLoad","_this13","loadImage","generateLoadDoneCallback","_this14","closeLightbox","animationOnKeyInput","direction","_this15","requestMove","_this16","clickOutsideToClose","discourageDownloads","toolbarButtons","reactModalStyle","_onAfterOpen","onAfterOpen","reactModalProps","transitionStyle","transition","keyEndings","_ref13","images","addImage","imageClass","transforms","bestImageInfo","imageStyle","getTransform","cursor","backgroundImage","onDoubleClick","onWheel","loadingIcon","modalStyle","overlay","border","borderRadius","onRequestClose","contentLabel","appElement","wrapperClassName","animationDirection","onTouchStart","onTouchMove","onKeyUp","propTypes","PropTypes","string","isRequired","mainSrcThumbnail","prevSrcThumbnail","nextSrcThumbnail","bool","number","arrayOf","shape","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","parseuri","createDebug","namespace","prevTime","enabled","curr","ms","diff","coerce","formatter","formatters","formatArgs","log","console","useColors","colors","selectColor","init","instances","stack","disable","enable","namespaces","skips","humanize","h","plural","ceil","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","code","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","j","empty","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","rand","deviation","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","prop","r","storage","DEBUG","lastC","removeItem","WebkitAppearance","firebug","chrome","local","localStorage","localstorage","default","_Async","_Creatable","_stateManager","_interopRequireDefault","_Select","__esModule","SelectCreatable","makeCreatableSelect","SelectCreatableState","_default","makeAsyncSelect","it","fails","require$$0","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","V","bitmap","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","all","IS_HTMLDDA","argument","isCallable","isPrototypeOf","Deno","versions","v8","V8_VERSION","sham","getBuiltIn","require$$3","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","copyright","toObject","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","isSymbol","getMethod","P","ordinaryToPrimitive","pref","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","getter","setter","arity","trunc","toIntegerOrInfinity","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","every","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","ActiveXObject","domain","iframeDocument","JS","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","initEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","hideTooltip","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","place","desiredPlace","getDimensions","tipWidth","tipHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","getTipOffsetTop","t","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","newPlace","chosen","choose","isNewState","boundingClientRect","targetTop","targetLeft","disToMouse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","fill","defaultColors","dark","background","arrow","warning","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","CONSTANT","rebuild","globalRebuild","mount","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","methodArray","insecure","disableInternalStyle","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","querySelector","textContent","matches","msMatchesSelector","mozMatchesSelector","selector","escaped","nodeListToArray","shadowRoot","globalEventOff","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","isGlobalCall","switchToSolid","FocusEvent","scrollHide","getPosition","overridePosition","reshowDelay","delayUpdate","updateState","addScrollListener","updatePosition","afterShow","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","isScroll","afterHide","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","tooltipClass","hasCustomColors","clickable","supportedWrappers","htmlContent","any","class","newAriaProps","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id || this.state.isVisible) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const imageCaption = imageItemsLength && (\n      <Fragment>\n        <span>{gettext('%curr% of %total%').replace('%curr%', imageIndex + 1).replace('%total%', imageItemsLength)}</span>\n        <br />\n        <a href={imageItems[imageIndex].url} target=\"_blank\">{gettext('Open in New Tab')}</a>\n      </Fragment>\n    );\n\n    return (\n      <Lightbox\n        mainSrc={imageItems[imageIndex].src}\n        imageTitle={imageItems[imageIndex].name}\n        imageCaption={imageCaption}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@reach/router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canPublishRepo,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Library Details\")}</span>\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            {canPublishRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"published\"\n                  )}`}\n                  to={siteRoot + \"published/\"}\n                  title={gettext(\"Published Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"published\")}\n                >\n                  <span\n                    className=\"sf2-icon-wiki-view\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Published Libraries\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"draft-info nav-text\">\n                    {gettext(\"Drafts\")}\n                    {this.props.draftCounts === 0 ? (\n                      \"\"\n                    ) : (\n                      <Badge color=\"info\" pill>\n                        {this.props.draftCounts}\n                      </Badge>\n                    )}\n                  </span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span\n                  className={`toggle-icon float-right fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\">×</span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br />© 2023 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from \"react\";\nimport { gettext, siteRoot } from \"../utils/constants\";\nimport ModalPortal from \"./modal-portal\";\nimport AboutDialog from \"./dialog/about-dialog\";\n\nclass SideNavFooter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  onFooterExpandedToggle = () => {\n    this.setState({ collapsed: !this.state.collapsed });\n  };\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? \"0\" : \"30rem\",\n      borderBottomWidth: this.state.collapsed ? \"0\" : \"1px\",\n    };\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span\n              aria-hidden=\"true\"\n              className={\n                (this.state.collapsed\n                  ? \"keeper-icon-triangle-up\"\n                  : \"keeper-icon-triangle-down\") + \" vam\"\n              }\n              onClick={this.onFooterExpandedToggle}\n            />\n            &nbsp;\n            <a\n              href={siteRoot + \"project-catalog/\"}\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Project Catalog\")}\n            </a>\n            <a\n              href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\"\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext(\"Help / Knowledge Base\")}\n            </a>\n            <a\n              className=\"item cursor-pointer last-item\"\n              onClick={this.onAboutDialogToggle}\n            >\n              {gettext(\"About\")}\n            </a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br />\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\"\n                  target=\"_blank\"\n                >\n                  About Keeper\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\"\n                  target=\"_blank\"\n                >\n                  Cared Data Commitment\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/f62758e53c/\"\n                  target=\"_blank\"\n                >\n                  Terms of Service\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">\n                  Download the Keeper client for Windows, Linux, Mac, Android\n                  and iPhone\n                </a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"seafile-logo\"\n                    src=\"/media/custom/seafile_logo_footer.png\"\n                  />\n                  &nbsp;© 2023 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"MPDL-logo\"\n                    src=\"/media/custom/mpdl.png\"\n                  />\n                </a>\n                <br />\n                <br />\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">\n                  Contact Keeper Support\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\"\n                  target=\"_blank\"\n                >\n                  Impressum\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\"\n                  target=\"_blank\"\n                >\n                  Privacy Policy\n                </a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow && (\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel o-hidden\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, is_admin, isOpIconShown, isPermSelectDialogOpen } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={this.state.isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, isOpIconShown, isPermSelectDialogOpen } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          <SharePermissionEditor\n            repoID={item.repo_id}\n            isTextMode={true}\n            isEditIconShow={isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n          }\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n            <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n              </li>\n              {canGenerateUploadLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n              )}\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n          <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              {canGenerateShareLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n              )}\n              <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from \"../utils/utils\";\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@reach/router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n    const desktopItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td><Link to={shareRepoUrl}>{data.repo_name}</Link></td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link><br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) &&\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>\n                  }\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    let operations = [\"Rename\", \"Transfer\"];\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n    }\n    //KEEPER\n    operations.push(\"Divider\");\n    if (showAssignDoiMenuItem) {\n      operations.push(\"Assign DOI to current state\");\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push(\"Archive Library\");\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push(\"Certify Library\");\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push(\"Edit Metadata\");\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/lib/AsyncCreatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Förderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under “Library Details” on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MediaQuery from \"react-responsive\";\nimport moment from \"moment\";\nimport { Link, navigate } from \"@reach/router\";\nimport { Utils } from \"../../utils/utils\";\nimport { keeperAPI, seafileAPI } from \"../../utils/seafile-api\";\nimport { gettext, siteRoot, storages } from \"../../utils/constants\";\nimport ModalPortal from \"../../components/modal-portal\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport toaster from \"../../components/toast\";\nimport DeleteRepoDialog from \"../../components/dialog/delete-repo-dialog\";\nimport TransferDialog from \"../../components/dialog/transfer-dialog\";\nimport LibHistorySettingDialog from \"../../components/dialog/lib-history-setting-dialog\";\nimport ChangeRepoPasswordDialog from \"../../components/dialog/change-repo-password-dialog\";\nimport ResetEncryptedRepoPasswordDialog from \"../../components/dialog/reset-encrypted-repo-password-dialog\";\nimport LabelRepoStateDialog from \"../../components/dialog/label-repo-state-dialog\";\nimport LibSubFolderPermissionDialog from \"../../components/dialog/lib-sub-folder-permission-dialog\";\nimport Rename from \"../../components/rename\";\nimport MylibRepoMenu from \"./mylib-repo-menu\";\nimport RepoAPITokenDialog from \"../../components/dialog/repo-api-token-dialog\";\nimport RepoShareUploadLinksDialog from \"../../components/dialog/repo-share-upload-links-dialog\";\nimport LibOldFilesAutoDelDialog from \"../../components/dialog/lib-old-files-auto-del-dialog\";\nimport AssignDoiDialog from \"../../components/dialog/assign-doi-dialog\";\nimport ArchiveLibraryDialog from \"../../components/dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../../components/dialog/certify-library-dialog\";\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    \"Can not archive library due to unknown reason, please contact support.\";\n  if (d.status === \"success\") obj.setState({ quota: d.quota });\n  else if (d.status === \"in_processing\") msg = d.msg;\n  else if (d.status === \"quota_expired\")\n    error = gettext(\n      \"Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.\"\n    );\n  else if (d.status === \"snapshot_archived\")\n    error = gettext(\n      \"Cannot archive, since the library snapshot has already been archived.\"\n    );\n  else if (d.status === \"is_too_big\")\n    error = gettext(\"Cannot archive, since the library is too large.\");\n  else if (d.status === \"metadata_error\") {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === \"system_error\") error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false,\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch (item) {\n      case \"Star\":\n      case \"Unstar\":\n        this.onToggleStarRepo();\n        break;\n      case \"Share\":\n        this.onShareToggle();\n        break;\n      case \"Delete\":\n        this.onDeleteToggle();\n        break;\n      case \"Rename\":\n        this.onRenameToggle();\n        break;\n      case \"Transfer\":\n        this.onTransferToggle();\n        break;\n      case \"History Setting\":\n        this.onHistorySettingToggle();\n        break;\n      case \"Change Password\":\n        this.onChangePasswordToggle();\n        break;\n      case \"Reset Password\":\n        this.onResetPasswordToggle();\n        break;\n      case \"Folder Permission\":\n        this.onFolderPermissionToggle();\n        break;\n      case \"Label Current State\":\n        this.onLabelToggle();\n        break;\n      case \"API Token\":\n        this.onAPITokenToggle();\n        break;\n      case \"Share Links Admin\":\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case \"Old Files Auto Delete\":\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case \"Assign DOI to current state\":\n        this.onAssignDoiToggle();\n        break;\n      case \"Archive Library\":\n        this.onArchiveLibraryToggle();\n        break;\n      case \"Certify Library\":\n        this.onCertifyLibraryToggle();\n        break;\n      case \"Edit Metadata\":\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI\n        .unstarItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully unstarred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(this.props.repo.repo_id, \"/\")\n        .then(() => {\n          this.setState({ isStarred: !this.state.isStarred });\n          const msg = gettext(\n            \"Successfully starred {library_name_placeholder}.\"\n          ).replace(\"{library_name_placeholder}\", repoName);\n          toaster.success(msg);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({ isDeleteDialogShow: !this.state.isDeleteDialogShow });\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferToggle = () => {\n    this.setState({ isTransferDialogShow: !this.state.isTransferDialogShow });\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({\n      isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow,\n    });\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({\n      isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow,\n    });\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({\n      isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow,\n    });\n  };\n\n  onLabelToggle = () => {\n    this.setState({\n      isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen,\n    });\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({\n      isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow,\n    });\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({ isAPITokenDialogShow: !this.state.isAPITokenDialogShow });\n  };\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({\n      isRepoShareUploadLinksDialogOpen:\n        !this.state.isRepoShareUploadLinksDialogOpen,\n    });\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({\n      isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen,\n    });\n  };\n\n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\")\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI\n      .renameRepo(repoID, newName)\n      .then(() => {\n        this.props.onRenameRepo(repo, newName);\n        this.onRenameCancel();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({ isRenaming: !this.state.isRenaming });\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI\n      .transferRepo(repoID, user.email)\n      .then((res) => {\n        this.props.onTransferRepo(repoID);\n        let message = gettext(\"Successfully transferred the library.\");\n        toaster.success(message);\n      })\n      .catch((error) => {\n        if (error.response) {\n          toaster.danger(error.response.data.error_msg || gettext(\"Error\"), {\n            duration: 3,\n          });\n        } else {\n          toaster.danger(gettext(\"Failed. Please check the network.\"), {\n            duration: 3,\n          });\n        }\n      });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI\n      .deleteRepo(repo.repo_id)\n      .then((res) => {\n        this.setState({\n          isRepoDeleted: true,\n          isDeleteDialogShow: false,\n        });\n\n        this.props.onDeleteRepo(repo);\n        let name = repo.repo_name;\n        var msg = gettext(\"Successfully deleted {name}.\").replace(\n          \"{name}\",\n          name\n        );\n        toaster.success(msg);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext(\"Error\")) {\n          let name = repo.repo_name;\n          errMessage = gettext(\"Failed to delete {name}.\").replace(\n            \"{name}\",\n            name\n          );\n        }\n        toaster.danger(errMessage);\n\n        this.setState({ isRepoDeleted: false });\n      });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(\n      repo.repo_name\n    )}/`;\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n        onFocus={this.onFocus}\n      >\n        <td className=\"text-center\">\n          <a\n            href=\"#\"\n            role=\"button\"\n            aria-label={\n              this.state.isStarred ? gettext(\"Unstar\") : gettext(\"Star\")\n            }\n            onClick={this.onToggleStarRepo}\n          >\n            <i\n              className={`fa-star ${\n                this.state.isStarred ? \"fas\" : \"far star-empty\"\n              }`}\n            ></i>\n          </a>\n        </td>\n        <td>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Link to={repoURL}>{repo.repo_name}</Link>\n          )}\n          {!this.state.isRenaming &&\n            !repo.repo_name &&\n            gettext(\n              \"Broken (please contact your administrator to fix this library)\"\n            )}\n        </td>\n        <td>\n          {repo.repo_name && this.state.isOpIconShow && (\n            <div>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-share\"\n                title={gettext(\"Share\")}\n                role=\"button\"\n                aria-label={gettext(\"Share\")}\n                onClick={this.onShareToggle}\n              ></a>\n              <a\n                href=\"#\"\n                className=\"op-icon sf2-icon-delete\"\n                title={gettext(\"Delete\")}\n                role=\"button\"\n                aria-label={gettext(\"Delete\")}\n                onClick={this.onDeleteToggle}\n              ></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format(\"llll\")}>\n          {moment(repo.last_modified).fromNow()}\n        </td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = (this.repoURL = `${siteRoot}library/${\n      repo.repo_id\n    }/${Utils.encodePath(repo.repo_name)}/`);\n\n    return (\n      <tr\n        className={this.state.highlight ? \"tr-highlight\" : \"\"}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onRepoClick}\n      >\n        <td onClick={this.visitRepo}>\n          <img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" />\n        </td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name && (\n            <div>\n              (gettext('Broken (please contact your administrator to fix this\n              library)'))\n            </div>\n          )}\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span\n            className=\"item-meta-info\"\n            title={moment(repo.last_modified).format(\"llll\")}\n          >\n            {moment(repo.last_modified).fromNow()}\n          </span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">{this.renderPCUI()}</MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={\"library\"}\n              itemName={repo.repo_name}\n              itemPath={\"/\"}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      // scene one: (Share, Delete, itemToggle and other operations);\n      // scene two: (Share, Unshare), (Share), (Unshare)\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      if (operations.length == 2) {\n        return (\n          <Fragment>\n            {shareOperation}\n            {unshareOperation}\n          </Fragment>\n        );\n      }\n      if (operations.length == 1 && operations[0] === 'Share') {\n        return shareOperation;\n      }\n\n      if (operations.length == 1 && operations[0] === 'Unshare') {\n        return unshareOperation;\n      }\n    }\n    return null;\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n  \n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport { Utils } from \"../../utils/utils\";\nimport { gettext } from \"../../utils/constants\";\nimport ModalPortal from \"../modal-portal\";\nimport CreateFolder from \"../../components/dialog/create-folder-dialog\";\nimport CreateFile from \"../../components/dialog/create-file-dialog\";\nimport ShareDialog from \"../../components/dialog/share-dialog\";\nimport ViewModeToolbar from \"./view-mode-toolbar\";\nimport ArchiveLibraryDialog from \"../dialog/archive-library-dialog\";\nimport CertifyLibraryDialog from \"../dialog/certify-library-dialog\";\nimport KeeperEditMetadataDialog from \"../dialog/keeper-edit-metadata-dialog\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { handleCanArchiveResponse } from \"../../pages/my-libs/mylib-repo-list-item\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: \".md\",\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: \"\",\n      isMobileOpMenuOpen: false,\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({ isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen });\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top = targetRect.bottom;\n    let style = { position: \"fixed\", display: \"block\", left: left, top: top };\n    this.setState({ operationMenuStyle: style });\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: true,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({ isUploadMenuShow: false });\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: true,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow,\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \"\",\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".md\",\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".xlsx\",\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".pptx\",\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: \".docx\",\n    });\n  };\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({ isCreateFileDialogShow: false });\n    this.props.onAddFile(filePath, isDraft);\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({ isCreateFolderDialogShow: false });\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some((object) => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === \"success\" || d.status === \"metadata_error\")\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === \"/\" ? \"library\" : \"dir\";\n    let itemName = path == \"/\" ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } =\n      Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ? (\n                <Fragment>\n                  <button\n                    className=\"btn btn-secondary operation-item\"\n                    onClick={this.onUploadClick}\n                    aria-haspopup=\"true\"\n                    aria-expanded={this.state.isUploadMenuShow}\n                    aria-controls=\"upload-menu\"\n                  >\n                    {gettext(\"Upload\")}\n                  </button>\n                  {this.state.isUploadMenuShow && (\n                    <div\n                      className=\"menu dropdown-menu\"\n                      style={this.state.operationMenuStyle}\n                      role=\"menu\"\n                      id=\"upload-menu\"\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFile}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Files\")}\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"dropdown-item\"\n                        onClick={this.onUploadFolder}\n                        role=\"menuitem\"\n                      >\n                        {gettext(\"Upload Folder\")}\n                      </button>\n                    </div>\n                  )}\n                </Fragment>\n              ) : (\n                <button\n                  className=\"btn btn-secondary operation-item\"\n                  title={gettext(\"Upload\")}\n                  onClick={this.onUploadFile}\n                >\n                  {gettext(\"Upload\")}\n                </button>\n              )}\n            </Fragment>\n          )}\n          {canCreate && (\n            <Fragment>\n              <button\n                className=\"btn btn-secondary operation-item\"\n                onClick={this.onCreateClick}\n                aria-haspopup=\"true\"\n                aria-expanded={this.state.isUploadMenuShow}\n                aria-controls=\"new-menu\"\n              >\n                {gettext(\"New\")}\n              </button>\n              {this.state.isCreateMenuShow && (\n                <div\n                  className=\"menu dropdown-menu\"\n                  style={this.state.operationMenuStyle}\n                  role=\"menu\"\n                  id=\"new-menu\"\n                >\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFolderToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Folder\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateFileToggle}\n                  >\n                    {gettext(\"New File\")}\n                  </button>\n                  <div className=\"dropdown-divider\"></div>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateMarkdownToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Markdown File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateExcelToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Excel File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreatePPTToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New PowerPoint File\")}\n                  </button>\n                  <button\n                    className=\"dropdown-item\"\n                    onClick={this.onCreateWordToggle}\n                    role=\"menuitem\"\n                  >\n                    {gettext(\"New Word File\")}\n                  </button>\n                </div>\n              )}\n            </Fragment>\n          )}\n          {showShareBtn && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Share\")}\n              onClick={this.onShareClick}\n            >\n              {gettext(\"Share\")}\n            </button>\n          )}\n          {/* KEEPER */}\n          {isArchiveBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Archive\")}\n              onClick={this.onArchiveLibraryToggle}\n            >\n              {gettext(\"Archive\")}\n            </button>\n          )}\n          {isCertifyBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Certify\")}\n              onClick={this.onCertifyLibraryToggle}\n            >\n              {gettext(\"Certify\")}\n            </button>\n          )}\n          {isEditMetadataBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext(\"Metadata\")}\n              onClick={this.onEditMetadataToggle}\n            >\n              {gettext(\"Metadata\")}\n            </button>\n          )}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown\n          isOpen={this.state.isMobileOpMenuOpen}\n          toggle={this.toggleMobileOpMenu}\n        >\n          <DropdownToggle\n            tag=\"span\"\n            className=\"sf2-icon-plus mobile-toolbar-icon\"\n          />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>\n                {gettext(\"Upload\")}\n              </DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>\n                  {gettext(\"New Folder\")}\n                </DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>\n                  {gettext(\"New File\")}\n                </DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === \"rw\" || userPerm === \"admin\" || isCustomPermission) && (\n          <div className=\"dir-operation\">{content}</div>\n        )}\n        {Utils.isDesktop() && (\n          <ViewModeToolbar\n            currentMode={this.props.currentMode}\n            switchViewMode={this.props.switchViewMode}\n            isCustomPermission={isCustomPermission}\n          />\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let {dirent} = this.props;\n    this.changeState(dirent);\n    this.newInput.focus();\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport CommonToolbar from \"../../components/toolbar/common-toolbar\";\nimport ViewModeToolbar from \"../../components/toolbar/view-mode-toolbar\";\nimport DirOperationToolBar from \"../../components/toolbar/dir-operation-toolbar\";\nimport MultipleDirOperationToolbar from \"../../components/toolbar/multiple-dir-operation-toolbar\";\nimport ViewFileToolbar from \"../../components/toolbar/view-file-toolbar\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired, // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n  render() {\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span\n              className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n              title={gettext(\"Side Nav Menu\")}\n              onClick={this.props.onSideNavMenuClick}\n            ></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n              isCustomPermission={isCustomPermission}\n            />\n          </div>\n          <CommonToolbar\n            isLibView={true}\n            repoID={this.props.repoID}\n            repoName={this.props.repoName}\n            onSearchedClick={this.props.onSearchedClick}\n            searchPlaceholder={gettext(\"Search files in this library\")}\n          />\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\"\n            title={gettext(\"Side Nav Menu\")}\n            onClick={this.props.onSideNavMenuClick}\n          ></span>\n          {this.props.isDirentSelected ? (\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          ) : (\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          )}\n        </div>\n        <CommonToolbar\n          isLibView={true}\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          onSearchedClick={this.props.onSearchedClick}\n          searchPlaceholder={gettext(\"Search files in this library\")}\n        />\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport InternalLinkDialog from '../dialog/internal-link-dialog';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile &&\n          <InternalLinkDialog\n            repoID={this.props.repoID}\n            path={this.props.currentPath}\n          />\n        }\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : []}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({ isRenameing: false });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                {/* KEEPER bxb button */}\n                {this.props.isRepoOwner &&\n                  dirent.permission === \"rw\" &&\n                  dirent.type === \"file\" && (\n                    <a className=\"op-icon\" data-tip data-for=\"bloxberg\">\n                      <img\n                        className=\"small-icon\"\n                        src={bergImage}\n                        onClick={this.onItemCertify}\n                      />\n                      <ReactTooltip\n                        className=\"hover-keep\"\n                        id=\"bloxberg\"\n                        delayHide={1000}\n                        effect=\"solid\"\n                      >\n                        <span className=\"tooltip-bold\">\n                          {gettext(\n                            \"Certify your file via the bloxberg blockchain.\"\n                          )}\n                        </span>\n                      </ReactTooltip>\n                    </a>\n                  )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={this.canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7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\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    let currentNode = this.props.currentNode;\n    this.changeState(currentNode);\n    this.newInput.focus();\n    let type = currentNode.object.type;\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@reach/router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and other {n} items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and other {n} items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.deleteDir(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n      this.updateDirent(dirent, 'file_tags', fileTags);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      )\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel o-hidden\">\n          <div className=\"main-panel-north border-left-show\">\n            <LibContentToolbar\n              isViewFile={this.state.isViewFile}\n              filePermission={this.state.filePermission}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              onFileTagChanged={this.onToolbarFileTagChanged}\n              onSideNavMenuClick={this.props.onMenuClick}\n              repoID={this.props.repoID}\n              path={this.state.path}\n              isDirentSelected={this.state.isDirentSelected}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              onItemRename={this.onMainPanelItemRename}\n              direntList={this.state.direntList}\n              repoName={this.state.repoName}\n              repoEncrypted={this.state.repoEncrypted}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              userPerm={this.state.userPerm}\n              showShareBtn={showShareBtn}\n              enableDirPrivateShare={enableDirPrivateShare}\n              onAddFile={this.onAddFile}\n              onAddFolder={this.onAddFolder}\n              onUploadFile={this.onUploadFile}\n              onUploadFolder={this.onUploadFolder}\n              currentMode={this.state.currentMode}\n              switchViewMode={this.switchViewMode}\n              onSearchedClick={this.onSearchedClick}\n              isRepoOwner={isRepoOwner}\n              currentRepoInfo={this.state.currentRepoInfo}\n              updateDirent={this.updateDirent}\n              onDirentSelected={this.onDirentSelected}\n              showDirentDetail={this.showDirentDetail}\n              unSelectDirent={this.unSelectDirent}\n              onFilesTagChanged={this.onFileTagChanged}\n            />\n          </div>\n          <div className=\"main-panel-center flex-row\">\n            <LibContentContainer\n              pathPrefix={this.props.pathPrefix}\n              currentMode={this.state.currentMode}\n              path={this.state.path}\n              pathExist={this.state.pathExist}\n              currentRepoInfo={this.state.currentRepoInfo}\n              repoID={this.props.repoID}\n              enableDirPrivateShare={enableDirPrivateShare}\n              userPerm={userPerm}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              onTabNavClick={this.props.onTabNavClick}\n              onMainNavBarClick={this.onMainNavBarClick}\n              isViewFile={this.state.isViewFile}\n              hash={this.state.hash}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              goDraftPage={this.goDraftPage}\n              isFileLoading={this.state.isFileLoading}\n              isFileLoadedErr={this.state.isFileLoadedErr}\n              filePermission={this.state.filePermission}\n              content={this.state.content}\n              lastModified={this.state.lastModified}\n              latestContributor={this.state.latestContributor}\n              onLinkClick={this.onLinkClick}\n              isTreeDataLoading={this.state.isTreeDataLoading}\n              treeData={this.state.treeData}\n              currentNode={this.state.currentNode}\n              onNodeClick={this.onTreeNodeClick}\n              onNodeCollapse={this.onTreeNodeCollapse}\n              onNodeExpanded={this.onTreeNodeExpanded}\n              onAddFolderNode={this.onAddFolder}\n              onAddFileNode={this.onAddFile}\n              onRenameNode={this.onRenameTreeNode}\n              onDeleteNode={this.onDeleteTreeNode}\n              draftCounts={this.state.draftCounts}\n              usedRepoTags={this.state.usedRepoTags}\n              readmeMarkdown={this.state.readmeMarkdown}\n              updateUsedRepoTags={this.updateUsedRepoTags}\n              isDirentListLoading={this.state.isDirentListLoading}\n              direntList={direntItemsList}\n              fullDirentList={this.state.direntList}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              updateDirent={this.updateDirent}\n              onDirentClick={this.onDirentClick}\n              onItemClick={this.onItemClick}\n              onItemSelected={this.onDirentSelected}\n              onItemDelete={this.onMainPanelItemDelete}\n              onItemRename={this.onMainPanelItemRename}\n              onItemMove={this.onMoveItem}\n              onItemCopy={this.onCopyItem}\n              onAddFolder={this.onAddFolder}\n              onAddFile={this.onAddFile}\n              onFileTagChanged={this.onFileTagChanged}\n              isDirentSelected={this.state.isDirentSelected}\n              isAllDirentSelected={this.state.isAllDirentSelected}\n              onAllDirentSelected={this.onAllDirentSelected}\n              isDirentDetailShow={this.state.isDirentDetailShow}\n              selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              closeDirentDetail={this.closeDirentDetail}\n              showDirentDetail={this.showDirentDetail}\n              direntDetailPanelTab={this.state.direntDetailPanelTab}\n              onDeleteRepoTag={this.onDeleteRepoTag}\n              onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n              updateDetail={this.state.updateDetail}\n              onListContainerScroll={this.onListContainerScroll}\n              loadDirentList={this.loadDirentList}\n            />\n            {canUpload && this.state.pathExist && !this.state.isViewFile && (\n              <FileUploader\n                ref={uploader => this.uploader = uploader}\n                dragAndDrop={true}\n                path={this.state.path}\n                repoID={this.props.repoID}\n                direntList={this.state.direntList}\n                onFileUploadSuccess={this.onFileUploadSuccess}\n                isCustomPermission={isCustomPermission}\n              />\n            )}\n          </div>\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount = () => {\n    this.newInput.focus();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  changeMode: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  render() {\n    const { isLoading, hasNextPage, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <button className=\"btn btn-secondary btn-block search-group-members-btn text-left border-0\" onClick={this.props.changeMode}>\n            <i className=\"fas fa-search mr-1\" aria-hidden={true}></i>\n            {gettext('Search group members')}\n          </button>\n        }\n        <div className=\"manage-members\" onScroll={this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {hasNextPage && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Button } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass SearchGroupMembers extends React.Component {\n\n  // pagination is not needed\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      q: '', // query\n      groupMembers: [],\n      errMessage: [],\n      isItemFreezed: false\n    };\n    this.isInit = true;\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  submit = () => {\n    let { q } = this.state;\n    q = q.trim();\n    if (!q) {\n      return;\n    }\n    this.setState({\n      isLoading: true\n    });\n    seafileAPI.searchGroupMember(this.props.groupID, q).then((res) => {\n      this.isInit = false;\n      this.setState({\n        isLoading: false,\n        groupMembers: res.data,\n        errorMsg: ''\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errMessage\n      });\n    });\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      q: e.target.value\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.submit();\n    }\n  }\n\n  render() {\n    const { isLoading, q, errorMsg, groupMembers } = this.state;\n    return (\n      <Fragment>\n        <div className=\"d-flex justifiy-content-between\">\n          <Input\n            type=\"text\"\n            id=\"search-member\"\n            className=\"form-control search-members-input mr-2\"\n            value={q}\n            onChange={this.onInputChange}\n            onKeyDown={this.onInputKeyDown}\n          />\n          <Button type=\"button\" color=\"secondary\" className=\"flex-shrink-0\" onClick={this.submit} disabled={!q.trim()}>{gettext('Submit')}</Button>\n        </div>\n        {errorMsg && <p className=\"error\">{errorMsg}</p>}\n        <div className=\"manage-members\">\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              {groupMembers.length === 0 && !this.isInit && <div className=\"mx-2 my-4\">{gettext('No members')}</div>}\n              {groupMembers.length > 0 && (\n                <GroupMembers\n                  groupMembers={groupMembers}\n                  changeMember={this.changeMember}\n                  deleteMember={this.deleteMember}\n                  groupID={this.props.groupID}\n                  isOwner={this.props.isOwner}\n                  isItemFreezed={this.state.isItemFreezed}\n                  toggleItemFreezed={this.toggleItemFreezed}\n                />\n              )}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nSearchGroupMembers.propTypes = propTypes;\n\nexport default SearchGroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\nimport SearchGroupMembers from '../search-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nconst MANAGEMENT_MODE= {\n  LIST_AND_ADD: 'list_and_add',\n  SEARCH: 'search'\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: MANAGEMENT_MODE.LIST_AND_ADD\n    };\n  }\n\n  changeMode = () => {\n    this.setState({\n      currentMode: this.state.currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n        MANAGEMENT_MODE.SEARCH : MANAGEMENT_MODE.LIST_AND_ADD\n    });\n  }\n\n  render() {\n    const { currentMode } = this.state;\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            gettext('Manage group members') : (\n              <Fragment>\n                <button className=\"fa fa-arrow-left back-icon border-0 bg-transparent mr-2 p-0\" onClick={this.changeMode} title={gettext('Back')} aria-label={gettext('Back')}></button>\n                <span>{gettext('Search group members')}</span>\n              </Fragment>\n            )\n          }\n        </ModalHeader>\n        <ModalBody className=\"pb-0\">\n          {currentMode == MANAGEMENT_MODE.LIST_AND_ADD ?\n            <ListAndAddGroupMembers\n              groupID={groupID}\n              isOwner={isOwner}\n              changeMode={this.changeMode}\n            /> :\n            <SearchGroupMembers groupID={groupID} isOwner={isOwner} />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 50,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            innerRef={input => {this.newInput = input;}}\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n    this.newName = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newName.focus();\n    this.newName.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newName = input;}} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, navigate } from '@reach/router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\nconst ShareAdminShareLinksWrapper = MainContentWrapper(ShareAdminShareLinks);\nconst ShareAdminUploadLinksWrapper = MainContentWrapper(ShareAdminUploadLinks);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinksWrapper path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinksWrapper path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('wrapper')\n);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Placeholder for future translate functionality\n */\nfunction translate(str) {\n  var replaceStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!str) {\n    return '';\n  }\n\n  var translated = str;\n\n  if (replaceStrings) {\n    Object.keys(replaceStrings).forEach(function (placeholder) {\n      translated = translated.replace(placeholder, replaceStrings[placeholder]);\n    });\n  }\n\n  return translated;\n}\nfunction getWindowWidth() {\n  return typeof global.window !== 'undefined' ? global.window.innerWidth : 0;\n}\nfunction getWindowHeight() {\n  return typeof global.window !== 'undefined' ? global.window.innerHeight : 0;\n} // Get the highest window context that isn't cross-origin\n// (When in an iframe)\n\nfunction getHighestSafeWindowContext() {\n  var self = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.window.self;\n  var referrer = self.document.referrer; // If we reached the top level, return self\n\n  if (self === global.window.top || !referrer) {\n    return self;\n  }\n\n  var getOrigin = function getOrigin(href) {\n    return href.match(/(.*\\/\\/.*?)(\\/|$)/)[1];\n  }; // If parent is the same origin, we can move up one context\n  // Reference: https://stackoverflow.com/a/21965342/1601953\n\n\n  if (getOrigin(self.location.href) === getOrigin(referrer)) {\n    return getHighestSafeWindowContext(self.parent);\n  } // If a different origin, we consider the current level\n  // as the top reachable one\n\n\n  return self;\n}\n\n// Min image zoom level\nvar MIN_ZOOM_LEVEL = 0; // Max image zoom level\n\nvar MAX_ZOOM_LEVEL = 300; // Size ratio between previous and next zoom levels\n\nvar ZOOM_RATIO = 1.007; // How much to increase/decrease the zoom level when the zoom buttons are clicked\n\nvar ZOOM_BUTTON_INCREMENT_SIZE = 100; // Used to judge the amount of horizontal scroll needed to initiate a image move\n\nvar WHEEL_MOVE_Y_THRESHOLD = 1;\nvar KEYS = {\n  ESC: 27,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39\n}; // Actions\n\nvar ACTION_NONE = 0;\nvar ACTION_MOVE = 1;\nvar ACTION_SWIPE = 2;\nvar ACTION_PINCH = 3;\n\nvar SOURCE_ANY = 0;\nvar SOURCE_MOUSE = 1;\nvar SOURCE_TOUCH = 2;\nvar SOURCE_POINTER = 3; // Minimal swipe distance\n\nvar MIN_SWIPE_DISTANCE = 200;\n\nvar ReactImageLightbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactImageLightbox, _Component);\n\n  _createClass(ReactImageLightbox, null, [{\n    key: \"isTargetMatchImage\",\n    value: function isTargetMatchImage(target) {\n      return target && /ril-image-current/.test(target.className);\n    }\n  }, {\n    key: \"parseMouseEvent\",\n    value: function parseMouseEvent(mouseEvent) {\n      return {\n        id: 'mouse',\n        source: SOURCE_MOUSE,\n        x: parseInt(mouseEvent.clientX, 10),\n        y: parseInt(mouseEvent.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parseTouchPointer\",\n    value: function parseTouchPointer(touchPointer) {\n      return {\n        id: touchPointer.identifier,\n        source: SOURCE_TOUCH,\n        x: parseInt(touchPointer.clientX, 10),\n        y: parseInt(touchPointer.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parsePointerEvent\",\n    value: function parsePointerEvent(pointerEvent) {\n      return {\n        id: pointerEvent.pointerId,\n        source: SOURCE_POINTER,\n        x: parseInt(pointerEvent.clientX, 10),\n        y: parseInt(pointerEvent.clientY, 10)\n      };\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"getTransform\",\n    value: function getTransform(_ref) {\n      var _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$zoom = _ref.zoom,\n          zoom = _ref$zoom === void 0 ? 1 : _ref$zoom,\n          width = _ref.width,\n          targetWidth = _ref.targetWidth;\n      var nextX = x;\n      var windowWidth = getWindowWidth();\n\n      if (width > windowWidth) {\n        nextX += (windowWidth - width) / 2;\n      }\n\n      var scaleFactor = zoom * (targetWidth / width);\n      return {\n        transform: \"translate3d(\".concat(nextX, \"px,\").concat(y, \"px,0) scale3d(\").concat(scaleFactor, \",\").concat(scaleFactor, \",1)\")\n      };\n    }\n  }]);\n\n  function ReactImageLightbox(props) {\n    var _this;\n\n    _classCallCheck(this, ReactImageLightbox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactImageLightbox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      event.preventDefault();\n    });\n\n    _this.state = {\n      //-----------------------------\n      // Animation\n      //-----------------------------\n      // Lightbox is closing\n      // When Lightbox is mounted, if animation is enabled it will open with the reverse of the closing animation\n      isClosing: !props.animationDisabled,\n      // Component parts should animate (e.g., when images are moving, or image is being zoomed)\n      shouldAnimate: false,\n      //-----------------------------\n      // Zoom settings\n      //-----------------------------\n      // Zoom level of image\n      zoomLevel: MIN_ZOOM_LEVEL,\n      //-----------------------------\n      // Image position settings\n      //-----------------------------\n      // Horizontal offset from center\n      offsetX: 0,\n      // Vertical offset from center\n      offsetY: 0,\n      // image load error for srcType\n      loadErrorStatus: {}\n    }; // Refs\n\n    _this.outerEl = React.createRef();\n    _this.zoomInBtn = React.createRef();\n    _this.zoomOutBtn = React.createRef();\n    _this.caption = React.createRef();\n    _this.closeIfClickInner = _this.closeIfClickInner.bind(_assertThisInitialized(_this));\n    _this.handleImageDoubleClick = _this.handleImageDoubleClick.bind(_assertThisInitialized(_this));\n    _this.handleImageMouseWheel = _this.handleImageMouseWheel.bind(_assertThisInitialized(_this));\n    _this.handleKeyInput = _this.handleKeyInput.bind(_assertThisInitialized(_this));\n    _this.handleMouseUp = _this.handleMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleOuterMousewheel = _this.handleOuterMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleTouchStart = _this.handleTouchStart.bind(_assertThisInitialized(_this));\n    _this.handleTouchMove = _this.handleTouchMove.bind(_assertThisInitialized(_this));\n    _this.handleTouchEnd = _this.handleTouchEnd.bind(_assertThisInitialized(_this));\n    _this.handlePointerEvent = _this.handlePointerEvent.bind(_assertThisInitialized(_this));\n    _this.handleCaptionMousewheel = _this.handleCaptionMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleWindowResize = _this.handleWindowResize.bind(_assertThisInitialized(_this));\n    _this.handleZoomInButtonClick = _this.handleZoomInButtonClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutButtonClick = _this.handleZoomOutButtonClick.bind(_assertThisInitialized(_this));\n    _this.requestClose = _this.requestClose.bind(_assertThisInitialized(_this));\n    _this.requestMoveNext = _this.requestMoveNext.bind(_assertThisInitialized(_this));\n    _this.requestMovePrev = _this.requestMovePrev.bind(_assertThisInitialized(_this));\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  _createClass(ReactImageLightbox, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      // Timeouts - always clear it before umount\n      this.timeouts = []; // Current action\n\n      this.currentAction = ACTION_NONE; // Events source\n\n      this.eventsSource = SOURCE_ANY; // Empty pointers list\n\n      this.pointerList = []; // Prevent inner close\n\n      this.preventInnerClose = false;\n      this.preventInnerCloseTimeout = null; // Used to disable animation when changing props.mainSrc|nextSrc|prevSrc\n\n      this.keyPressed = false; // Used to store load state / dimensions of images\n\n      this.imageCache = {}; // Time the last keydown event was called (used in keyboard action rate limiting)\n\n      this.lastKeyDownTime = 0; // Used for debouncing window resize event\n\n      this.resizeTimeout = null; // Used to determine when actions are triggered by the scroll wheel\n\n      this.wheelActionTimeout = null;\n      this.resetScrollTimeout = null;\n      this.scrollX = 0;\n      this.scrollY = 0; // Used in panning zoomed images\n\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Used to swipe\n\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0; // Used to pinch\n\n      this.pinchTouchList = null;\n      this.pinchDistance = 0; // Used to differentiate between images with identical src\n\n      this.keyCounter = 0; // Used to detect a move when all src's remain unchanged (four or more of the same image in a row)\n\n      this.moveRequested = false;\n\n      if (!this.props.animationDisabled) {\n        // Make opening animation play\n        this.setState({\n          isClosing: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Prevents cross-origin errors when using a cross-origin iframe\n      this.windowContext = getHighestSafeWindowContext();\n      this.listeners = {\n        resize: this.handleWindowResize,\n        mouseup: this.handleMouseUp,\n        touchend: this.handleTouchEnd,\n        touchcancel: this.handleTouchEnd,\n        pointerdown: this.handlePointerEvent,\n        pointermove: this.handlePointerEvent,\n        pointerup: this.handlePointerEvent,\n        pointercancel: this.handlePointerEvent\n      };\n      Object.keys(this.listeners).forEach(function (type) {\n        _this2.windowContext.addEventListener(type, _this2.listeners[type]);\n      });\n      document.addEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.loadAllImages();\n    } // eslint-disable-next-line camelcase\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      // Iterate through the source types for prevProps and nextProps to\n      //  determine if any of the sources changed\n      var sourcesChanged = false;\n      var prevSrcDict = {};\n      var nextSrcDict = {};\n      this.getSrcTypes().forEach(function (srcType) {\n        if (_this3.props[srcType.name] !== nextProps[srcType.name]) {\n          sourcesChanged = true;\n          prevSrcDict[_this3.props[srcType.name]] = true;\n          nextSrcDict[nextProps[srcType.name]] = true;\n        }\n      });\n\n      if (sourcesChanged || this.moveRequested) {\n        // Reset the loaded state for images not rendered next\n        Object.keys(prevSrcDict).forEach(function (prevSrc) {\n          if (!(prevSrc in nextSrcDict) && prevSrc in _this3.imageCache) {\n            _this3.imageCache[prevSrc].loaded = false;\n          }\n        });\n        this.moveRequested = false; // Load any new images\n\n        this.loadAllImages(nextProps);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      // Wait for move...\n      return !this.moveRequested;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this4 = this;\n\n      this.didUnmount = true;\n      Object.keys(this.listeners).forEach(function (type) {\n        _this4.windowContext.removeEventListener(type, _this4.listeners[type]);\n      });\n      document.removeEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.timeouts.forEach(function (tid) {\n        return clearTimeout(tid);\n      });\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x, _x2) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (func, time) {\n      var _this5 = this;\n\n      var id = setTimeout(function () {\n        _this5.timeouts = _this5.timeouts.filter(function (tid) {\n          return tid !== id;\n        });\n        func();\n      }, time);\n      this.timeouts.push(id);\n      return id;\n    })\n  }, {\n    key: \"setPreventInnerClose\",\n    value: function setPreventInnerClose() {\n      var _this6 = this;\n\n      if (this.preventInnerCloseTimeout) {\n        this.clearTimeout(this.preventInnerCloseTimeout);\n      }\n\n      this.preventInnerClose = true;\n      this.preventInnerCloseTimeout = this.setTimeout(function () {\n        _this6.preventInnerClose = false;\n        _this6.preventInnerCloseTimeout = null;\n      }, 100);\n    } // Get info for the best suited image to display with the given srcType\n\n  }, {\n    key: \"getBestImageForType\",\n    value: function getBestImageForType(srcType) {\n      var imageSrc = this.props[srcType];\n      var fitSizes = {};\n\n      if (this.isImageLoaded(imageSrc)) {\n        // Use full-size image if available\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height);\n      } else if (this.isImageLoaded(this.props[\"\".concat(srcType, \"Thumbnail\")])) {\n        // Fall back to using thumbnail if the image has not been loaded\n        imageSrc = this.props[\"\".concat(srcType, \"Thumbnail\")];\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height, true);\n      } else {\n        return null;\n      }\n\n      return {\n        src: imageSrc,\n        height: this.imageCache[imageSrc].height,\n        width: this.imageCache[imageSrc].width,\n        targetHeight: fitSizes.height,\n        targetWidth: fitSizes.width\n      };\n    } // Get sizing for when an image is larger than the window\n\n  }, {\n    key: \"getFitSizes\",\n    value: function getFitSizes(width, height, stretch) {\n      var boxSize = this.getLightboxRect();\n      var maxHeight = boxSize.height - this.props.imagePadding * 2;\n      var maxWidth = boxSize.width - this.props.imagePadding * 2;\n\n      if (!stretch) {\n        maxHeight = Math.min(maxHeight, height);\n        maxWidth = Math.min(maxWidth, width);\n      }\n\n      var maxRatio = maxWidth / maxHeight;\n      var srcRatio = width / height;\n\n      if (maxRatio > srcRatio) {\n        // height is the constraining dimension of the photo\n        return {\n          width: width * maxHeight / height,\n          height: maxHeight\n        };\n      }\n\n      return {\n        width: maxWidth,\n        height: height * maxWidth / width\n      };\n    }\n  }, {\n    key: \"getMaxOffsets\",\n    value: function getMaxOffsets() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      var currentImageInfo = this.getBestImageForType('mainSrc');\n\n      if (currentImageInfo === null) {\n        return {\n          maxX: 0,\n          minX: 0,\n          maxY: 0,\n          minY: 0\n        };\n      }\n\n      var boxSize = this.getLightboxRect();\n      var zoomMultiplier = this.getZoomMultiplier(zoomLevel);\n      var maxX = 0;\n\n      if (zoomMultiplier * currentImageInfo.width - boxSize.width < 0) {\n        // if there is still blank space in the X dimension, don't limit except to the opposite edge\n        maxX = (boxSize.width - zoomMultiplier * currentImageInfo.width) / 2;\n      } else {\n        maxX = (zoomMultiplier * currentImageInfo.width - boxSize.width) / 2;\n      }\n\n      var maxY = 0;\n\n      if (zoomMultiplier * currentImageInfo.height - boxSize.height < 0) {\n        // if there is still blank space in the Y dimension, don't limit except to the opposite edge\n        maxY = (boxSize.height - zoomMultiplier * currentImageInfo.height) / 2;\n      } else {\n        maxY = (zoomMultiplier * currentImageInfo.height - boxSize.height) / 2;\n      }\n\n      return {\n        maxX: maxX,\n        maxY: maxY,\n        minX: -1 * maxX,\n        minY: -1 * maxY\n      };\n    } // Get image src types\n\n  }, {\n    key: \"getSrcTypes\",\n    value: function getSrcTypes() {\n      return [{\n        name: 'mainSrc',\n        keyEnding: \"i\".concat(this.keyCounter)\n      }, {\n        name: 'mainSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter)\n      }, {\n        name: 'nextSrc',\n        keyEnding: \"i\".concat(this.keyCounter + 1)\n      }, {\n        name: 'nextSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter + 1)\n      }, {\n        name: 'prevSrc',\n        keyEnding: \"i\".concat(this.keyCounter - 1)\n      }, {\n        name: 'prevSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter - 1)\n      }];\n    }\n    /**\n     * Get sizing when the image is scaled\n     */\n\n  }, {\n    key: \"getZoomMultiplier\",\n    value: function getZoomMultiplier() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      return Math.pow(ZOOM_RATIO, zoomLevel);\n    }\n    /**\n     * Get the size of the lightbox in pixels\n     */\n\n  }, {\n    key: \"getLightboxRect\",\n    value: function getLightboxRect() {\n      if (this.outerEl.current) {\n        return this.outerEl.current.getBoundingClientRect();\n      }\n\n      return {\n        width: getWindowWidth(),\n        height: getWindowHeight(),\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x3) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (id) {\n      this.timeouts = this.timeouts.filter(function (tid) {\n        return tid !== id;\n      });\n      clearTimeout(id);\n    }) // Change zoom level\n\n  }, {\n    key: \"changeZoom\",\n    value: function changeZoom(zoomLevel, clientX, clientY) {\n      // Ignore if zoom disabled\n      if (!this.props.enableZoom) {\n        return;\n      } // Constrain zoom level to the set bounds\n\n\n      var nextZoomLevel = Math.max(MIN_ZOOM_LEVEL, Math.min(MAX_ZOOM_LEVEL, zoomLevel)); // Ignore requests that don't change the zoom level\n\n      if (nextZoomLevel === this.state.zoomLevel) {\n        return;\n      }\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        // Snap back to center if zoomed all the way out\n        this.setState({\n          zoomLevel: nextZoomLevel,\n          offsetX: 0,\n          offsetY: 0\n        });\n        return;\n      }\n\n      var imageBaseSize = this.getBestImageForType('mainSrc');\n\n      if (imageBaseSize === null) {\n        return;\n      }\n\n      var currentZoomMultiplier = this.getZoomMultiplier();\n      var nextZoomMultiplier = this.getZoomMultiplier(nextZoomLevel); // Default to the center of the image to zoom when no mouse position specified\n\n      var boxRect = this.getLightboxRect();\n      var pointerX = typeof clientX !== 'undefined' ? clientX - boxRect.left : boxRect.width / 2;\n      var pointerY = typeof clientY !== 'undefined' ? clientY - boxRect.top : boxRect.height / 2;\n      var currentImageOffsetX = (boxRect.width - imageBaseSize.width * currentZoomMultiplier) / 2;\n      var currentImageOffsetY = (boxRect.height - imageBaseSize.height * currentZoomMultiplier) / 2;\n      var currentImageRealOffsetX = currentImageOffsetX - this.state.offsetX;\n      var currentImageRealOffsetY = currentImageOffsetY - this.state.offsetY;\n      var currentPointerXRelativeToImage = (pointerX - currentImageRealOffsetX) / currentZoomMultiplier;\n      var currentPointerYRelativeToImage = (pointerY - currentImageRealOffsetY) / currentZoomMultiplier;\n      var nextImageRealOffsetX = pointerX - currentPointerXRelativeToImage * nextZoomMultiplier;\n      var nextImageRealOffsetY = pointerY - currentPointerYRelativeToImage * nextZoomMultiplier;\n      var nextImageOffsetX = (boxRect.width - imageBaseSize.width * nextZoomMultiplier) / 2;\n      var nextImageOffsetY = (boxRect.height - imageBaseSize.height * nextZoomMultiplier) / 2;\n      var nextOffsetX = nextImageOffsetX - nextImageRealOffsetX;\n      var nextOffsetY = nextImageOffsetY - nextImageRealOffsetY; // When zooming out, limit the offset so things don't get left askew\n\n      if (this.currentAction !== ACTION_PINCH) {\n        var maxOffsets = this.getMaxOffsets();\n\n        if (this.state.zoomLevel > nextZoomLevel) {\n          nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, nextOffsetX));\n          nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, nextOffsetY));\n        }\n      }\n\n      this.setState({\n        zoomLevel: nextZoomLevel,\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      });\n    }\n  }, {\n    key: \"closeIfClickInner\",\n    value: function closeIfClickInner(event) {\n      if (!this.preventInnerClose && event.target.className.search(/\\bril-inner\\b/) > -1) {\n        this.requestClose(event);\n      }\n    }\n    /**\n     * Handle user keyboard actions\n     */\n\n  }, {\n    key: \"handleKeyInput\",\n    value: function handleKeyInput(event) {\n      event.stopPropagation(); // Ignore key input during animations\n\n      if (this.isAnimating()) {\n        return;\n      } // Allow slightly faster navigation through the images when user presses keys repeatedly\n\n\n      if (event.type === 'keyup') {\n        this.lastKeyDownTime -= this.props.keyRepeatKeyupBonus;\n        return;\n      }\n\n      var keyCode = event.which || event.keyCode; // Ignore key presses that happen too close to each other (when rapid fire key pressing or holding down the key)\n      // But allow it if it's a lightbox closing action\n\n      var currentTime = new Date();\n\n      if (currentTime.getTime() - this.lastKeyDownTime < this.props.keyRepeatLimit && keyCode !== KEYS.ESC) {\n        return;\n      }\n\n      this.lastKeyDownTime = currentTime.getTime();\n\n      switch (keyCode) {\n        // ESC key closes the lightbox\n        case KEYS.ESC:\n          event.preventDefault();\n          this.requestClose(event);\n          break;\n        // Left arrow key moves to previous image\n\n        case KEYS.LEFT_ARROW:\n          if (!this.props.prevSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMovePrev(event);\n          break;\n        // Right arrow key moves to next image\n\n        case KEYS.RIGHT_ARROW:\n          if (!this.props.nextSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMoveNext(event);\n          break;\n      }\n    }\n    /**\n     * Handle a mouse wheel event over the lightbox container\n     */\n\n  }, {\n    key: \"handleOuterMousewheel\",\n    value: function handleOuterMousewheel(event) {\n      var _this7 = this;\n\n      // Prevent scrolling of the background\n      event.stopPropagation();\n      this.clearTimeout(this.resetScrollTimeout);\n      this.resetScrollTimeout = this.setTimeout(function () {\n        _this7.scrollX = 0;\n        _this7.scrollY = 0;\n      }, 300);\n    }\n  }, {\n    key: \"handleImageMouseWheel\",\n    value: function handleImageMouseWheel(event) {\n      // when gesture move up/down/left/right, event.deltaY is integer, move image\n      if (parseInt(event.deltaY) === parseFloat(event.deltaY)) {\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n          var newOffsetY = this.state.offsetY + event.deltaY;\n          this.setState({\n            offsetY: newOffsetY\n          });\n        } else {\n          var newOffsetX = this.state.offsetX + event.deltaX;\n          this.setState({\n            offsetX: newOffsetX\n          });\n        }\n\n        return;\n      } // when gesture zoom in or zoom out, event.deltaY is decimal, zoom image\n\n\n      var yThreshold = WHEEL_MOVE_Y_THRESHOLD;\n\n      if (Math.abs(event.deltaY) >= Math.abs(event.deltaX)) {\n        event.stopPropagation(); // If the vertical scroll amount was large enough, perform a zoom\n\n        if (Math.abs(event.deltaY) < yThreshold) {\n          return;\n        }\n\n        this.scrollX = 0;\n        this.scrollY += event.deltaY;\n        this.changeZoom(this.state.zoomLevel - event.deltaY, event.clientX, event.clientY);\n      }\n    }\n    /**\n     * Handle a double click on the current image\n     */\n\n  }, {\n    key: \"handleImageDoubleClick\",\n    value: function handleImageDoubleClick(event) {\n      if (this.state.zoomLevel > MIN_ZOOM_LEVEL) {\n        // A double click when zoomed in zooms all the way out\n        this.changeZoom(MIN_ZOOM_LEVEL, event.clientX, event.clientY);\n      } else {\n        // A double click when zoomed all the way out zooms in\n        this.changeZoom(this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE, event.clientX, event.clientY);\n      }\n    }\n  }, {\n    key: \"shouldHandleEvent\",\n    value: function shouldHandleEvent(source) {\n      if (this.eventsSource === source) {\n        return true;\n      }\n\n      if (this.eventsSource === SOURCE_ANY) {\n        this.eventsSource = source;\n        return true;\n      }\n\n      switch (source) {\n        case SOURCE_MOUSE:\n          return false;\n\n        case SOURCE_TOUCH:\n          this.eventsSource = SOURCE_TOUCH;\n          this.filterPointersBySource();\n          return true;\n\n        case SOURCE_POINTER:\n          if (this.eventsSource === SOURCE_MOUSE) {\n            this.eventsSource = SOURCE_POINTER;\n            this.filterPointersBySource();\n            return true;\n          }\n\n          return false;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"addPointer\",\n    value: function addPointer(pointer) {\n      this.pointerList.push(pointer);\n    }\n  }, {\n    key: \"removePointer\",\n    value: function removePointer(pointer) {\n      this.pointerList = this.pointerList.filter(function (_ref2) {\n        var id = _ref2.id;\n        return id !== pointer.id;\n      });\n    }\n  }, {\n    key: \"filterPointersBySource\",\n    value: function filterPointersBySource() {\n      var _this8 = this;\n\n      this.pointerList = this.pointerList.filter(function (_ref3) {\n        var source = _ref3.source;\n        return source === _this8.eventsSource;\n      });\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        this.addPointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.multiPointerMove(event, [ReactImageLightbox.parseMouseEvent(event)]);\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.removePointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"handlePointerEvent\",\n    value: function handlePointerEvent(event) {\n      if (this.shouldHandleEvent(SOURCE_POINTER)) {\n        switch (event.type) {\n          case 'pointerdown':\n            if (ReactImageLightbox.isTargetMatchImage(event.target)) {\n              this.addPointer(ReactImageLightbox.parsePointerEvent(event));\n              this.multiPointerStart(event);\n            }\n\n            break;\n\n          case 'pointermove':\n            this.multiPointerMove(event, [ReactImageLightbox.parsePointerEvent(event)]);\n            break;\n\n          case 'pointerup':\n          case 'pointercancel':\n            this.removePointer(ReactImageLightbox.parsePointerEvent(event));\n            this.multiPointerEnd(event);\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"handleTouchStart\",\n    value: function handleTouchStart(event) {\n      var _this9 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        [].forEach.call(event.changedTouches, function (eventTouch) {\n          return _this9.addPointer(ReactImageLightbox.parseTouchPointer(eventTouch));\n        });\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleTouchMove\",\n    value: function handleTouchMove(event) {\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        this.multiPointerMove(event, [].map.call(event.changedTouches, function (eventTouch) {\n          return ReactImageLightbox.parseTouchPointer(eventTouch);\n        }));\n      }\n    }\n  }, {\n    key: \"handleTouchEnd\",\n    value: function handleTouchEnd(event) {\n      var _this10 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        [].map.call(event.changedTouches, function (touch) {\n          return _this10.removePointer(ReactImageLightbox.parseTouchPointer(touch));\n        });\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"decideMoveOrSwipe\",\n    value: function decideMoveOrSwipe(pointer) {\n      if (this.state.zoomLevel <= MIN_ZOOM_LEVEL) {\n        this.handleSwipeStart(pointer);\n      } else {\n        this.handleMoveStart(pointer);\n      }\n    }\n  }, {\n    key: \"multiPointerStart\",\n    value: function multiPointerStart(event) {\n      this.handleEnd(null);\n\n      switch (this.pointerList.length) {\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerMove\",\n    value: function multiPointerMove(event, pointerList) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          {\n            event.preventDefault();\n            this.handleMove(pointerList[0]);\n            break;\n          }\n\n        case ACTION_SWIPE:\n          {\n            event.preventDefault();\n            this.handleSwipe(pointerList[0]);\n            break;\n          }\n\n        case ACTION_PINCH:\n          {\n            event.preventDefault();\n            this.handlePinch(pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerEnd\",\n    value: function multiPointerEnd(event) {\n      if (this.currentAction !== ACTION_NONE) {\n        this.setPreventInnerClose();\n        this.handleEnd(event);\n      }\n\n      switch (this.pointerList.length) {\n        case 0:\n          {\n            this.eventsSource = SOURCE_ANY;\n            break;\n          }\n\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(event) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          this.handleMoveEnd(event);\n          break;\n\n        case ACTION_SWIPE:\n          this.handleSwipeEnd(event);\n          break;\n\n        case ACTION_PINCH:\n          this.handlePinchEnd(event);\n          break;\n      }\n    } // Handle move start over the lightbox container\n    // This happens:\n    // - On a mouseDown event\n    // - On a touchstart event\n\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(_ref4) {\n      var clientX = _ref4.x,\n          clientY = _ref4.y;\n\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_MOVE;\n      this.moveStartX = clientX;\n      this.moveStartY = clientY;\n      this.moveStartOffsetX = this.state.offsetX;\n      this.moveStartOffsetY = this.state.offsetY;\n    } // Handle dragging over the lightbox container\n    // This happens:\n    // - After a mouseDown and before a mouseUp event\n    // - After a touchstart and before a touchend event\n\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(_ref5) {\n      var clientX = _ref5.x,\n          clientY = _ref5.y;\n      var newOffsetX = this.moveStartX - clientX + this.moveStartOffsetX;\n      var newOffsetY = this.moveStartY - clientY + this.moveStartOffsetY;\n\n      if (this.state.offsetX !== newOffsetX || this.state.offsetY !== newOffsetY) {\n        this.setState({\n          offsetX: newOffsetX,\n          offsetY: newOffsetY\n        });\n      }\n    }\n  }, {\n    key: \"handleMoveEnd\",\n    value: function handleMoveEnd() {\n      var _this11 = this;\n\n      this.currentAction = ACTION_NONE;\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Snap image back into frame if outside max offset range\n\n      var maxOffsets = this.getMaxOffsets();\n      var nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, this.state.offsetX));\n      var nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, this.state.offsetY));\n\n      if (nextOffsetX !== this.state.offsetX || nextOffsetY !== this.state.offsetY) {\n        this.setState({\n          offsetX: nextOffsetX,\n          offsetY: nextOffsetY,\n          shouldAnimate: true\n        });\n        this.setTimeout(function () {\n          _this11.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n    }\n  }, {\n    key: \"handleSwipeStart\",\n    value: function handleSwipeStart(_ref6) {\n      var clientX = _ref6.x,\n          clientY = _ref6.y;\n      this.currentAction = ACTION_SWIPE;\n      this.swipeStartX = clientX;\n      this.swipeStartY = clientY;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipe\",\n    value: function handleSwipe(_ref7) {\n      var clientX = _ref7.x,\n          clientY = _ref7.y;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipeEnd\",\n    value: function handleSwipeEnd(event) {\n      var xDiff = this.swipeEndX - this.swipeStartX;\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(this.swipeEndY - this.swipeStartY);\n      this.currentAction = ACTION_NONE;\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0;\n\n      if (!event || this.isAnimating() || xDiffAbs < yDiffAbs * 1.5) {\n        return;\n      }\n\n      if (xDiffAbs < MIN_SWIPE_DISTANCE) {\n        var boxRect = this.getLightboxRect();\n\n        if (xDiffAbs < boxRect.width / 4) {\n          return;\n        }\n      }\n\n      if (xDiff > 0 && this.props.prevSrc) {\n        event.preventDefault();\n        this.requestMovePrev();\n      } else if (xDiff < 0 && this.props.nextSrc) {\n        event.preventDefault();\n        this.requestMoveNext();\n      }\n    }\n  }, {\n    key: \"calculatePinchDistance\",\n    value: function calculatePinchDistance() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref9 = _slicedToArray(_ref8, 2),\n          a = _ref9[0],\n          b = _ref9[1];\n\n      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    }\n  }, {\n    key: \"calculatePinchCenter\",\n    value: function calculatePinchCenter() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref11 = _slicedToArray(_ref10, 2),\n          a = _ref11[0],\n          b = _ref11[1];\n\n      return {\n        x: a.x - (a.x - b.x) / 2,\n        y: a.y - (a.y - b.y) / 2\n      };\n    }\n  }, {\n    key: \"handlePinchStart\",\n    value: function handlePinchStart(pointerList) {\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_PINCH;\n      this.pinchTouchList = pointerList.map(function (_ref12) {\n        var id = _ref12.id,\n            x = _ref12.x,\n            y = _ref12.y;\n        return {\n          id: id,\n          x: x,\n          y: y\n        };\n      });\n      this.pinchDistance = this.calculatePinchDistance();\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(pointerList) {\n      this.pinchTouchList = this.pinchTouchList.map(function (oldPointer) {\n        for (var i = 0; i < pointerList.length; i += 1) {\n          if (pointerList[i].id === oldPointer.id) {\n            return pointerList[i];\n          }\n        }\n\n        return oldPointer;\n      });\n      var newDistance = this.calculatePinchDistance();\n      var zoomLevel = this.state.zoomLevel + newDistance - this.pinchDistance;\n      this.pinchDistance = newDistance;\n\n      var _this$calculatePinchC = this.calculatePinchCenter(this.pinchTouchList),\n          clientX = _this$calculatePinchC.x,\n          clientY = _this$calculatePinchC.y;\n\n      this.changeZoom(zoomLevel, clientX, clientY);\n    }\n  }, {\n    key: \"handlePinchEnd\",\n    value: function handlePinchEnd() {\n      this.currentAction = ACTION_NONE;\n      this.pinchTouchList = null;\n      this.pinchDistance = 0;\n    } // Handle the window resize event\n\n  }, {\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      this.clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = this.setTimeout(this.forceUpdate.bind(this), 100);\n    }\n  }, {\n    key: \"handleZoomInButtonClick\",\n    value: function handleZoomInButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MAX_ZOOM_LEVEL) {\n        this.zoomOutBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleZoomOutButtonClick\",\n    value: function handleZoomOutButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel - ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        this.zoomInBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleCaptionMousewheel\",\n    value: function handleCaptionMousewheel(event) {\n      event.stopPropagation();\n\n      if (!this.caption.current) {\n        return;\n      }\n\n      var _this$caption$current = this.caption.current.getBoundingClientRect(),\n          height = _this$caption$current.height;\n\n      var _this$caption$current2 = this.caption.current,\n          scrollHeight = _this$caption$current2.scrollHeight,\n          scrollTop = _this$caption$current2.scrollTop;\n\n      if (event.deltaY > 0 && height + scrollTop >= scrollHeight || event.deltaY < 0 && scrollTop <= 0) {\n        event.preventDefault();\n      }\n    } // Detach key and mouse input events\n\n  }, {\n    key: \"isAnimating\",\n    value: function isAnimating() {\n      return this.state.shouldAnimate || this.state.isClosing;\n    } // Check if image is loaded\n\n  }, {\n    key: \"isImageLoaded\",\n    value: function isImageLoaded(imageSrc) {\n      return imageSrc && imageSrc in this.imageCache && this.imageCache[imageSrc].loaded;\n    } // Load image from src and call callback with image width and height on load\n\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(srcType, imageSrc, done) {\n      var _this12 = this;\n\n      // Return the image info if it is already cached\n      if (this.isImageLoaded(imageSrc)) {\n        this.setTimeout(function () {\n          done();\n        }, 1);\n        return;\n      }\n\n      var inMemoryImage = new global.Image();\n\n      if (this.props.imageCrossOrigin) {\n        inMemoryImage.crossOrigin = this.props.imageCrossOrigin;\n      }\n\n      inMemoryImage.onerror = function (errorEvent) {\n        _this12.props.onImageLoadError(imageSrc, srcType, errorEvent); // failed to load so set the state loadErrorStatus\n\n\n        _this12.setState(function (prevState) {\n          return {\n            loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, srcType, true))\n          };\n        });\n\n        done(errorEvent);\n      };\n\n      inMemoryImage.onload = function () {\n        _this12.props.onImageLoad(imageSrc, srcType, inMemoryImage);\n\n        _this12.imageCache[imageSrc] = {\n          loaded: true,\n          width: inMemoryImage.width,\n          height: inMemoryImage.height\n        };\n        done();\n      };\n\n      inMemoryImage.src = imageSrc;\n    } // Load all images and their thumbnails\n\n  }, {\n    key: \"loadAllImages\",\n    value: function loadAllImages() {\n      var _this13 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n      var generateLoadDoneCallback = function generateLoadDoneCallback(srcType, imageSrc) {\n        return function (err) {\n          // Give up showing image on error\n          if (err) {\n            return;\n          } // Don't rerender if the src is not the same as when the load started\n          // or if the component has unmounted\n\n\n          if (_this13.props[srcType] !== imageSrc || _this13.didUnmount) {\n            return;\n          } // Force rerender with the new image\n\n\n          _this13.forceUpdate();\n        };\n      }; // Load the images\n\n\n      this.getSrcTypes().forEach(function (srcType) {\n        var type = srcType.name; // there is no error when we try to load it initially\n\n        if (props[type] && _this13.state.loadErrorStatus[type]) {\n          _this13.setState(function (prevState) {\n            return {\n              loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, type, false))\n            };\n          });\n        } // Load unloaded images\n\n\n        if (props[type] && !_this13.isImageLoaded(props[type])) {\n          _this13.loadImage(type, props[type], generateLoadDoneCallback(type, props[type]));\n        }\n      });\n    } // Request that the lightbox be closed\n\n  }, {\n    key: \"requestClose\",\n    value: function requestClose(event) {\n      var _this14 = this;\n\n      // Call the parent close request\n      var closeLightbox = function closeLightbox() {\n        return _this14.props.onCloseRequest(event);\n      };\n\n      if (this.props.animationDisabled || event.type === 'keydown' && !this.props.animationOnKeyInput) {\n        // No animation\n        closeLightbox();\n        return;\n      } // With animation\n      // Start closing animation\n\n\n      this.setState({\n        isClosing: true\n      }); // Perform the actual closing at the end of the animation\n\n      this.setTimeout(closeLightbox, this.props.animationDuration);\n    }\n  }, {\n    key: \"requestMove\",\n    value: function requestMove(direction, event) {\n      var _this15 = this;\n\n      // Reset the zoom level on image move\n      var nextState = {\n        zoomLevel: MIN_ZOOM_LEVEL,\n        offsetX: 0,\n        offsetY: 0\n      }; // Enable animated states\n\n      if (!this.props.animationDisabled && (!this.keyPressed || this.props.animationOnKeyInput)) {\n        nextState.shouldAnimate = true;\n        this.setTimeout(function () {\n          return _this15.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n\n      this.keyPressed = false;\n      this.moveRequested = true;\n\n      if (direction === 'prev') {\n        this.keyCounter -= 1;\n        this.setState(nextState);\n        this.props.onMovePrevRequest(event);\n      } else {\n        this.keyCounter += 1;\n        this.setState(nextState);\n        this.props.onMoveNextRequest(event);\n      }\n    } // Request to transition to the next image\n\n  }, {\n    key: \"requestMoveNext\",\n    value: function requestMoveNext(event) {\n      this.requestMove('next', event);\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"requestMovePrev\",\n    value: function requestMovePrev(event) {\n      this.requestMove('prev', event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this16 = this;\n\n      var _this$props = this.props,\n          animationDisabled = _this$props.animationDisabled,\n          animationDuration = _this$props.animationDuration,\n          clickOutsideToClose = _this$props.clickOutsideToClose,\n          discourageDownloads = _this$props.discourageDownloads,\n          enableZoom = _this$props.enableZoom,\n          imageTitle = _this$props.imageTitle,\n          nextSrc = _this$props.nextSrc,\n          prevSrc = _this$props.prevSrc,\n          toolbarButtons = _this$props.toolbarButtons,\n          reactModalStyle = _this$props.reactModalStyle,\n          _onAfterOpen = _this$props.onAfterOpen,\n          imageCrossOrigin = _this$props.imageCrossOrigin,\n          reactModalProps = _this$props.reactModalProps;\n      var _this$state = this.state,\n          zoomLevel = _this$state.zoomLevel,\n          offsetX = _this$state.offsetX,\n          offsetY = _this$state.offsetY,\n          isClosing = _this$state.isClosing,\n          loadErrorStatus = _this$state.loadErrorStatus;\n      var boxSize = this.getLightboxRect();\n      var transitionStyle = {}; // Transition settings for sliding animations\n\n      if (!animationDisabled && this.isAnimating()) {\n        transitionStyle = _objectSpread2({}, transitionStyle, {\n          transition: \"transform \".concat(animationDuration, \"ms\")\n        });\n      } // Key endings to differentiate between images with the same src\n\n\n      var keyEndings = {};\n      this.getSrcTypes().forEach(function (_ref13) {\n        var name = _ref13.name,\n            keyEnding = _ref13.keyEnding;\n        keyEndings[name] = keyEnding;\n      }); // Images to be displayed\n\n      var images = [];\n\n      var addImage = function addImage(srcType, imageClass, transforms) {\n        // Ignore types that have no source defined for their full size image\n        if (!_this16.props[srcType]) {\n          return;\n        }\n\n        var bestImageInfo = _this16.getBestImageForType(srcType);\n\n        var imageStyle = _objectSpread2({}, transitionStyle, {}, ReactImageLightbox.getTransform(_objectSpread2({}, transforms, {}, bestImageInfo)));\n\n        if (zoomLevel > MIN_ZOOM_LEVEL) {\n          imageStyle.cursor = 'move';\n        } // support IE 9 and 11\n\n\n        var hasTrueValue = function hasTrueValue(object) {\n          return Object.keys(object).some(function (key) {\n            return object[key];\n          });\n        }; // when error on one of the loads then push custom error stuff\n\n\n        if (bestImageInfo === null && hasTrueValue(loadErrorStatus)) {\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-errored\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__errorContainer\"\n          }, _this16.props.imageLoadErrorMessage)));\n          return;\n        }\n\n        if (bestImageInfo === null) {\n          var loadingIcon = React.createElement(\"div\", {\n            className: \"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon\"\n          }, _toConsumableArray(new Array(12)).map(function (_, index) {\n            return React.createElement(\"div\", {\n              // eslint-disable-next-line react/no-array-index-key\n              key: index,\n              className: \"ril-loading-circle-point ril__loadingCirclePoint\"\n            });\n          })); // Fall back to loading icon if the thumbnail has not been loaded\n\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-not-loaded\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__loadingContainer\"\n          }, loadingIcon)));\n          return;\n        }\n\n        var imageSrc = bestImageInfo.src;\n\n        if (discourageDownloads) {\n          imageStyle.backgroundImage = \"url('\".concat(imageSrc, \"')\");\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril__imageDiscourager\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            style: imageStyle,\n            key: imageSrc + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril-download-blocker ril__downloadBlocker\"\n          })));\n        } else {\n          images.push(React.createElement(\"img\", _extends({}, imageCrossOrigin ? {\n            crossOrigin: imageCrossOrigin\n          } : {}, {\n            className: \"\".concat(imageClass, \" ril__image\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            onDragStart: function onDragStart(e) {\n              return e.preventDefault();\n            },\n            style: imageStyle,\n            src: imageSrc,\n            key: imageSrc + keyEndings[srcType],\n            alt: typeof imageTitle === 'string' ? imageTitle : translate('Image'),\n            draggable: false\n          })));\n        }\n      };\n\n      var zoomMultiplier = this.getZoomMultiplier(); // Next Image (displayed on the right)\n\n      addImage('nextSrc', 'ril-image-next ril__imageNext', {\n        x: boxSize.width\n      }); // Main Image\n\n      addImage('mainSrc', 'ril-image-current', {\n        x: -1 * offsetX,\n        y: -1 * offsetY,\n        zoom: zoomMultiplier\n      }); // Previous Image (displayed on the left)\n\n      addImage('prevSrc', 'ril-image-prev ril__imagePrev', {\n        x: -1 * boxSize.width\n      });\n      var modalStyle = {\n        overlay: _objectSpread2({\n          zIndex: 1000,\n          backgroundColor: 'transparent'\n        }, reactModalStyle.overlay),\n        content: _objectSpread2({\n          backgroundColor: 'transparent',\n          overflow: 'hidden',\n          // Needed, otherwise keyboard shortcuts scroll the page\n          border: 'none',\n          borderRadius: 0,\n          padding: 0,\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }, reactModalStyle.content)\n      };\n      return React.createElement(Modal, _extends({\n        isOpen: true,\n        onRequestClose: clickOutsideToClose ? this.requestClose : undefined,\n        onAfterOpen: function onAfterOpen() {\n          // Focus on the div with key handlers\n          if (_this16.outerEl.current) {\n            _this16.outerEl.current.focus();\n          }\n\n          _onAfterOpen();\n        },\n        style: modalStyle,\n        contentLabel: translate('Lightbox'),\n        appElement: typeof global.window !== 'undefined' ? global.window.document.body : undefined\n      }, reactModalProps), React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions\n        // Floating modal with closing animations\n        className: \"ril-outer ril__outer ril__outerAnimating \".concat(this.props.wrapperClassName, \" \").concat(isClosing ? 'ril-closing ril__outerClosing' : ''),\n        style: {\n          transition: \"opacity \".concat(animationDuration, \"ms\"),\n          animationDuration: \"\".concat(animationDuration, \"ms\"),\n          animationDirection: isClosing ? 'normal' : 'reverse'\n        },\n        ref: this.outerEl,\n        onWheel: this.handleOuterMousewheel,\n        onMouseMove: this.handleMouseMove,\n        onMouseDown: this.handleMouseDown,\n        onTouchStart: this.handleTouchStart,\n        onTouchMove: this.handleTouchMove,\n        tabIndex: \"-1\" // Enables key handlers on div\n        ,\n        onKeyDown: this.handleKeyInput,\n        onKeyUp: this.handleKeyInput\n      }, React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n        // Image holder\n        className: \"ril-inner ril__inner\",\n        onClick: clickOutsideToClose ? this.closeIfClickInner : undefined\n      }, images), prevSrc && React.createElement(\"button\", {\n        // Move to previous image button\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        key: \"prev\",\n        \"aria-label\": this.props.prevLabel,\n        onClick: !this.isAnimating() ? this.requestMovePrev : undefined // Ignore clicks during animation\n\n      }), nextSrc && React.createElement(\"button\", {\n        // Move to next image button\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        key: \"next\",\n        \"aria-label\": this.props.nextLabel,\n        onClick: !this.isAnimating() ? this.requestMoveNext : undefined // Ignore clicks during animation\n\n      }), React.createElement(\"div\", {\n        // Lightbox toolbar\n        className: \"ril-toolbar ril__toolbar\"\n      }, React.createElement(\"ul\", {\n        className: \"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide\"\n      }, React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"span\", {\n        className: \"ril-toolbar__item__child ril__toolbarItemChild\"\n      }, imageTitle))), React.createElement(\"ul\", {\n        className: \"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide\"\n      }, toolbarButtons && toolbarButtons.map(function (button, i) {\n        return React.createElement(\"li\", {\n          key: \"button_\".concat(i + 1),\n          className: \"ril-toolbar__item ril__toolbarItem\"\n        }, button);\n      }), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom in button\n        type: \"button\",\n        key: \"zoom-in\",\n        \"aria-label\": this.props.zoomInLabel,\n        className: ['ril-zoom-in', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomInButton'].concat(_toConsumableArray(zoomLevel === MAX_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomInBtn,\n        disabled: this.isAnimating() || zoomLevel === MAX_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MAX_ZOOM_LEVEL ? this.handleZoomInButtonClick : undefined\n      })), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom out button\n        type: \"button\",\n        key: \"zoom-out\",\n        \"aria-label\": this.props.zoomOutLabel,\n        className: ['ril-zoom-out', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomOutButton'].concat(_toConsumableArray(zoomLevel === MIN_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomOutBtn,\n        disabled: this.isAnimating() || zoomLevel === MIN_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MIN_ZOOM_LEVEL ? this.handleZoomOutButtonClick : undefined\n      })), React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox close button\n        type: \"button\",\n        key: \"close\",\n        \"aria-label\": this.props.closeLabel,\n        className: \"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton\",\n        onClick: !this.isAnimating() ? this.requestClose : undefined // Ignore clicks during animation\n\n      })))), this.props.imageCaption && // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      React.createElement(\"div\", {\n        // Image caption\n        onWheel: this.handleCaptionMousewheel,\n        onMouseDown: function onMouseDown(event) {\n          return event.stopPropagation();\n        },\n        className: \"ril-caption ril__caption\",\n        ref: this.caption\n      }, React.createElement(\"div\", {\n        className: \"ril-caption-content ril__captionContent\"\n      }, this.props.imageCaption))));\n    }\n  }]);\n\n  return ReactImageLightbox;\n}(Component);\n\nReactImageLightbox.propTypes = {\n  //-----------------------------\n  // Image sources\n  //-----------------------------\n  // Main display image url\n  mainSrc: PropTypes.string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  // Previous display image url (displayed to the left)\n  // If left undefined, movePrev actions will not be performed, and the button not displayed\n  prevSrc: PropTypes.string,\n  // Next display image url (displayed to the right)\n  // If left undefined, moveNext actions will not be performed, and the button not displayed\n  nextSrc: PropTypes.string,\n  //-----------------------------\n  // Image thumbnail sources\n  //-----------------------------\n  // Thumbnail image url corresponding to props.mainSrc\n  mainSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.prevSrc\n  prevSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.nextSrc\n  nextSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  //-----------------------------\n  // Event Handlers\n  //-----------------------------\n  // Close window event\n  // Should change the parent state such that the lightbox is not rendered\n  onCloseRequest: PropTypes.func.isRequired,\n  // Move to previous image event\n  // Should change the parent state such that props.prevSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.nextSrc, etc.\n  onMovePrevRequest: PropTypes.func,\n  // Move to next image event\n  // Should change the parent state such that props.nextSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.prevSrc, etc.\n  onMoveNextRequest: PropTypes.func,\n  // Called when an image fails to load\n  // (imageSrc: string, srcType: string, errorEvent: object): void\n  onImageLoadError: PropTypes.func,\n  // Called when image successfully loads\n  onImageLoad: PropTypes.func,\n  // Open window event\n  onAfterOpen: PropTypes.func,\n  //-----------------------------\n  // Download discouragement settings\n  //-----------------------------\n  // Enable download discouragement (prevents [right-click -> Save Image As...])\n  discourageDownloads: PropTypes.bool,\n  //-----------------------------\n  // Animation settings\n  //-----------------------------\n  // Disable all animation\n  animationDisabled: PropTypes.bool,\n  // Disable animation on actions performed with keyboard shortcuts\n  animationOnKeyInput: PropTypes.bool,\n  // Animation duration (ms)\n  animationDuration: PropTypes.number,\n  //-----------------------------\n  // Keyboard shortcut settings\n  //-----------------------------\n  // Required interval of time (ms) between key actions\n  // (prevents excessively fast navigation of images)\n  keyRepeatLimit: PropTypes.number,\n  // Amount of time (ms) restored after each keyup\n  // (makes rapid key presses slightly faster than holding down the key to navigate images)\n  keyRepeatKeyupBonus: PropTypes.number,\n  //-----------------------------\n  // Image info\n  //-----------------------------\n  // Image title\n  imageTitle: PropTypes.node,\n  // Image caption\n  imageCaption: PropTypes.node,\n  // Optional crossOrigin attribute\n  imageCrossOrigin: PropTypes.string,\n  //-----------------------------\n  // Lightbox style\n  //-----------------------------\n  // Set z-index style, etc., for the parent react-modal (format: https://github.com/reactjs/react-modal#styles )\n  reactModalStyle: PropTypes.object,\n  // Padding (px) between the edge of the window and the lightbox\n  imagePadding: PropTypes.number,\n  wrapperClassName: PropTypes.string,\n  //-----------------------------\n  // Other\n  //-----------------------------\n  // Array of custom toolbar buttons\n  toolbarButtons: PropTypes.arrayOf(PropTypes.node),\n  // When true, clicks outside of the image close the lightbox\n  clickOutsideToClose: PropTypes.bool,\n  // Set to false to disable zoom functionality and hide zoom buttons\n  enableZoom: PropTypes.bool,\n  // Override props set on react-modal (https://github.com/reactjs/react-modal)\n  reactModalProps: PropTypes.shape({}),\n  // Aria-labels\n  nextLabel: PropTypes.string,\n  prevLabel: PropTypes.string,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  closeLabel: PropTypes.string,\n  imageLoadErrorMessage: PropTypes.node\n};\nReactImageLightbox.defaultProps = {\n  imageTitle: null,\n  imageCaption: null,\n  toolbarButtons: null,\n  reactModalProps: {},\n  animationDisabled: false,\n  animationDuration: 300,\n  animationOnKeyInput: false,\n  clickOutsideToClose: true,\n  closeLabel: 'Close lightbox',\n  discourageDownloads: false,\n  enableZoom: true,\n  imagePadding: 10,\n  imageCrossOrigin: null,\n  keyRepeatKeyupBonus: 40,\n  keyRepeatLimit: 180,\n  mainSrcThumbnail: null,\n  nextLabel: 'Next image',\n  nextSrc: null,\n  nextSrcThumbnail: null,\n  onAfterOpen: function onAfterOpen() {},\n  onImageLoadError: function onImageLoadError() {},\n  onImageLoad: function onImageLoad() {},\n  onMoveNextRequest: function onMoveNextRequest() {},\n  onMovePrevRequest: function onMovePrevRequest() {},\n  prevLabel: 'Previous image',\n  prevSrc: null,\n  prevSrcThumbnail: null,\n  reactModalStyle: {},\n  wrapperClassName: '',\n  zoomInLabel: 'Zoom in',\n  zoomOutLabel: 'Zoom out',\n  imageLoadErrorMessage: 'This image failed to load'\n};\n\nexport default ReactImageLightbox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.props.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Async = require(\"./Async\");\n\nvar _Creatable = require(\"./Creatable\");\n\nvar _stateManager = _interopRequireDefault(require(\"./stateManager\"));\n\nvar _Select = _interopRequireDefault(require(\"./Select\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SelectCreatable = (0, _Creatable.makeCreatableSelect)(_Select.default);\nvar SelectCreatableState = (0, _stateManager.default)(SelectCreatable);\n\nvar _default = (0, _Async.makeAsyncSelect)(SelectCreatableState);\n\nexports.default = _default;","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n"],"sourceRoot":""}