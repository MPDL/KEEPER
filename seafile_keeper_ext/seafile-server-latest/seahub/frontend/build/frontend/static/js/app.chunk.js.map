{"version":3,"sources":["components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js","components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","../node_modules/reactstrap/es/Table.js","assets/icons sync //.svg$","assets/icons/monitor.svg","../node_modules/reactstrap/es/UncontrolledTooltip.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/system-notification.js","models/group.js","models/library-details.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/icon.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","components/dialog/assign-doi-dialog.js","../node_modules/react-select/async-creatable/dist/react-select-async-creatable.esm.js","components/keeper-archive-metadata-form.js","components/dialog/archive-library-dialog.js","components/dialog/certify-library-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/dialog/keeper-edit-metadata-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/dialog/list-tag-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/dirent-list-item.js","assets/berg_icon.png","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/bytesToUuid.js","../node_modules/react-tooltip/node_modules/uuid/dist/esm-browser/v4.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/dialog/image-dialog.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","components/dialog/copy-move-dirent-progress-dialog.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","components/context-menu/actions.js","../node_modules/svg-baker-runtime/browser-symbol.js","../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","../../node_modules/core-js/internals/global.js","../../node_modules/core-js/internals/fails.js","../../node_modules/core-js/internals/descriptors.js","../../node_modules/core-js/internals/function-bind-native.js","../../node_modules/core-js/internals/function-call.js","../../node_modules/core-js/internals/object-property-is-enumerable.js","../../node_modules/core-js/internals/create-property-descriptor.js","../../node_modules/core-js/internals/engine-v8-version.js","../../node_modules/core-js/internals/function-uncurry-this-raw.js","../../node_modules/core-js/internals/classof-raw.js","../../node_modules/core-js/internals/function-uncurry-this.js","../../node_modules/core-js/internals/indexed-object.js","../../node_modules/core-js/internals/is-null-or-undefined.js","../../node_modules/core-js/internals/require-object-coercible.js","../../node_modules/core-js/internals/to-indexed-object.js","../../node_modules/core-js/internals/document-all.js","../../node_modules/core-js/internals/is-callable.js","../../node_modules/core-js/internals/is-object.js","../../node_modules/core-js/internals/get-built-in.js","../../node_modules/core-js/internals/object-is-prototype-of.js","../../node_modules/core-js/internals/engine-user-agent.js","../../node_modules/core-js/internals/symbol-constructor-detection.js","../../node_modules/core-js/internals/use-symbol-as-uid.js","../../node_modules/core-js/internals/is-symbol.js","../../node_modules/core-js/internals/try-to-string.js","../../node_modules/core-js/internals/a-callable.js","../../node_modules/core-js/internals/get-method.js","../../node_modules/core-js/internals/ordinary-to-primitive.js","../../node_modules/core-js/internals/define-global-property.js","../../node_modules/core-js/internals/shared-store.js","../../node_modules/core-js/internals/shared.js","../../node_modules/core-js/internals/to-object.js","../../node_modules/core-js/internals/has-own-property.js","../../node_modules/core-js/internals/uid.js","../../node_modules/core-js/internals/well-known-symbol.js","../../node_modules/core-js/internals/to-primitive.js","../../node_modules/core-js/internals/to-property-key.js","../../node_modules/core-js/internals/document-create-element.js","../../node_modules/core-js/internals/ie8-dom-define.js","../../node_modules/core-js/internals/object-get-own-property-descriptor.js","../../node_modules/core-js/internals/v8-prototype-define-bug.js","../../node_modules/core-js/internals/an-object.js","../../node_modules/core-js/internals/object-define-property.js","../../node_modules/core-js/internals/create-non-enumerable-property.js","../../node_modules/core-js/internals/function-name.js","../../node_modules/core-js/internals/inspect-source.js","../../node_modules/core-js/internals/internal-state.js","../../node_modules/core-js/internals/weak-map-basic-detection.js","../../node_modules/core-js/internals/shared-key.js","../../node_modules/core-js/internals/hidden-keys.js","../../node_modules/core-js/internals/make-built-in.js","../../node_modules/core-js/internals/define-built-in.js","../../node_modules/core-js/internals/math-trunc.js","../../node_modules/core-js/internals/to-integer-or-infinity.js","../../node_modules/core-js/internals/to-absolute-index.js","../../node_modules/core-js/internals/to-length.js","../../node_modules/core-js/internals/length-of-array-like.js","../../node_modules/core-js/internals/array-includes.js","../../node_modules/core-js/internals/object-keys-internal.js","../../node_modules/core-js/internals/enum-bug-keys.js","../../node_modules/core-js/internals/object-get-own-property-names.js","../../node_modules/core-js/internals/object-get-own-property-symbols.js","../../node_modules/core-js/internals/own-keys.js","../../node_modules/core-js/internals/copy-constructor-properties.js","../../node_modules/core-js/internals/is-forced.js","../../node_modules/core-js/internals/export.js","../../node_modules/core-js/internals/function-bind-context.js","../../node_modules/core-js/internals/is-array.js","../../node_modules/core-js/internals/to-string-tag-support.js","../../node_modules/core-js/internals/classof.js","../../node_modules/core-js/internals/is-constructor.js","../../node_modules/core-js/internals/array-species-constructor.js","../../node_modules/core-js/internals/array-species-create.js","../../node_modules/core-js/internals/array-iteration.js","../../node_modules/core-js/internals/object-keys.js","../../node_modules/core-js/internals/object-define-properties.js","../../node_modules/core-js/internals/html.js","../../node_modules/core-js/internals/object-create.js","../../node_modules/core-js/internals/add-to-unscopables.js","../../node_modules/core-js/modules/es.array.find.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/defaultStyles.js","../../src/decorators/styler.js","../../src/index.js","../../src/decorators/trackRemoval.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js","../../src/utils/uuid.js"],"names":["callIfExists","func","_len","arguments","length","args","Array","_key","apply","hasOwnProp","obj","prop","Object","prototype","hasOwnProperty","call","uniqueId","Math","random","toString","substring","store","canUseDOM","Boolean","window","document","createElement","load","r","exports","storage","debug","e","process","DEBUG","module","require","log","console","Function","formatArgs","useColors","this","namespace","humanize","diff","c","color","splice","index","lastC","replace","match","save","namespaces","removeItem","type","navigator","userAgent","toLowerCase","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","chrome","local","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","err","message","enable","Emitter","key","mixin","on","addEventListener","event","fn","_callbacks","push","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","i","emit","len","slice","listeners","hasListeners","base64encoder","keys","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","test","isPhantomJS","dontSendBlobs","protocol","packets","open","close","ping","pong","upgrade","noop","packetslist","data","Blob","map","ary","each","done","result","next","eachWithIndex","el","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","undefined","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","encodeArrayBuffer","fr","FileReader","onload","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","base64","encodeBase64Object","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","tryDecode","Number","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","binaryIdentifier","size","lengthAry","bufferTail","buffers","tailArray","msgLength","total","TagItem","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","onMouseEnter","setState","isTagHighlighted","onMouseLeave","getRepoTagIdList","fileTagList","fileTag","repo_tag_id","onEditFileTag","_this$props","repoID","repoTag","filePath","repoTagIdList","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","errMessage","Utils","getErrorMsg","toaster","danger","deleteFileTag","state","_createClass","value","isTagSelected","_jsxs","className","concat","onClick","children","_jsx","backgroundColor","name","React","Component","TagList","_React$Component2","_super2","_this2","getRepoTagList","listRepoTags","res","repotagList","repo_tags","item","RepoTag","_this3","Fragment","ModalHeader","toggle","toggleCancel","gettext","ModalBody","href","createNewTag","ModalFooter","Button","EditFileTagDialog","_React$Component3","_super3","_this4","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","_this4$props","Modal","isOpen","autoFocus","CreateTagDialog","onClose","GlobalEventListener","handleShowEvent","show","handleHideEvent","hide","register","showCallback","hideCallback","unregister","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","detail","_e$detail$position","position","x","y","_e$detail","currentObject","menuList","isVisible","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","_window","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","_window2","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","_this2$state","_ref","rtl","opacity","pointerEvents","role","display","ref","menuItem","propTypes","PropTypes","string","cssModule","object","bordered","bool","borderless","striped","dark","hover","responsive","oneOfType","tag","tagPropType","responsiveTag","innerRef","Table","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","defaultProps","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","symbol","add","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","omitKeys","UncontrolledTooltip","_Component","defaultOpen","bind","_assertThisInitialized","_inheritsLoose","_proto","render","Tooltip","omit","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","Form","FormGroup","Label","for","Input","onKeyPress","onChange","Alert","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","failed","clearInterval","isLoading","errorMsg","failed_reason","zipProgress","zipped","toFixed","toggleDialog","location","fileServerRoot","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","_this$props$data","Loading","SystemNotification","isClosed","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","curNoteMsg","dangerouslySetInnerHTML","__html","title","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","LibraryDetails","repo_id","repo_name","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","a","b","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","url","dtableWebServer","getActiveClass","tab","currentTab","libdtExtend","libraryDetailsExtended","loadLibraryDetails","keeperAPI","listLibraryDetails","libraryDetailsList","libraryDetailsHeight","libraryDetailItems","closeSideBar","adminHeight","Link","to","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","_this5","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","renderLibraryDetails","draftCounts","canInvitePeople","renderSharedAdmin","renderCustomNavItems","_this6","AboutDialog","onCloseAboutDialog","src","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","onFooterExpandedToggle","collapsed","elementBodyStyle","maxHeight","borderBottomWidth","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","MainPanel","script","async","body","appendChild","DraftsView","moment","locale","lang","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onDropdownToggleClick","toggleOperationMenu","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","EmptyTip","Acticity","json","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","encodePath","serviceURL","fileLink","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","_Component2","onListCreatedFilesToggle","isListCreatedFiles","op","details","_this$props2","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","_Component3","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","_toConsumableArray","onScroll","loading","emptyTip","TableBody","getThumbnails","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","mobileItem","Starred","_Component4","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","currentPerm","_this$state","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","togglePermSelectDialog","isPermSelectDialogOpen","options","user","updateRepoSharePerm","unshare","unshareRepo","unshared","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditing","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","SortOptions","_e$target$value$split","_e$target$value$split2","_slicedToArray","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","CommonToolbar","searchPlaceholder","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","objUrl","deletedTip","obj_id","rel","ShareLinkPermissionEditor","view_cnt","ShareAdminLink","ShareAdminShareLinks","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","ShareLink","SortOptionsDialog","CommonOperationConfirmationDialog","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","doi","LibsMobileThead","requireContext","Icon","iconClass","xlinkHref","RepoMonitoredIcon","placement","freezeItem","freezed","sortBySize","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","server","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","shared_by","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","createRef","DirPathBar","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","passwd","storages","libraryTemplates","repoPasswordMinLength","Select","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","onKeyDown","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","nextProps","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","CreatableSelect","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","mode","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","LibSubFolderSetGroupPermissionDialog","folderName","maxWidth","Rename","onRenameConfirm","_this$validateInput","validateInput","isValid","onRenameCancel","renameInput","focus","hasSuffix","endIndex","lastIndexOf","setSelectionRange","MylibRepoMenu","onMenuItemKeyDown","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","showAssignDoiMenuItem","showArchiveLibraryMenuItem","showCertifyLibraryMenuItem","showEditMetadatayMenuItem","folderPermEnabled","monitorOp","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","translateOperations","translateResult","divider","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","AssignDoiDialog","addDoi","AsyncCreatableSelect","forwardRef","stateManagerProps","useAsync","creatableProps","useStateManager","selectProps","useCreatable","mpgInstituteOptions","defaultResourceType","resourceTypes","defaultAuthors","firstName","lastName","affs","defaultDirectors","defaultPublisher","defaultMd","authors","publisher","year","institute","department","directors","resourceType","license","errors","defaultValidMd","InfoArea","toggleHelp","helpTooltipOpen","toggleError","errorTooltipOpen","fontWeight","delay","helpText","KeeperArchiveMetadataForm","isFieldValid","isFormValid","validMd","outer","_step","_iterator","_createForOfIteratorHelper","s","f","setButtons","isButton1Disabled","isSaved","isButton2Disabled","getValidMd","md","k","onButton1","onButton2","handleAuthorAddFields","values","setAuthorInputFields","handleAuthorRemoveFields","handleAuthorInputChange","handleAuthorAffInputChange","aidx","handleAuthorAffAddFields","handleAuthorAffRemoveFields","handleDirectorAddFields","setDirectorInputFields","handleDirectorRemoveFields","handleDirectorInputChange","onResourceSelectChange","resourceOptions","filterInstitutes","input","promiseOptions","Promise","handleInstituteChange","insName","validationProps","valid","invalid","validationInSelects","validationInAuthors","nidx","validationInDirectors","getArchiveMetadata","newState","getMpgInstitutes","res2","_this$setState","_this7","hideDialog","header","paddingBottom","row","Col","sm","Row","inputField","_","isClearable","cacheOptions","form","button1Label","button2Label","ArchiveLibraryDialog","onUpdateArchiveMetadata","updateArchiveMetadata","onArchiveClick","archiveLibrary","resp","quota","CertifyLibraryDialog","canCertify","certifyLibrary","certifyOnBloxberg","handleCanArchiveResponse","d","default_error","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","onAssignDoiToggle","onArchiveLibraryToggle","onCertifyLibraryToggle","onEditMetadataToggle","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","isAssignDoiDialogShow","onArchiveLibraryHide","isArchiveLibraryDialogShow","canArchive","onCertifyLibraryHide","isCertifyLibraryDialogShow","onEditMetadataHide","isEditMetadataDialogShow","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","MediaQuery","query","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","collabServer","CollabServer","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","CreateFile","isDuplicated","onAddFile","handleCheck","pos","fileType","isdraft","addFileCancel","onAfterModelOpened","newInput","onOpened","KeeperEditMetadataDialog","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","create","isArchiveBtnShow","isEditMetadataBtnShow","isCertifyBtnShow","content","showShareBtn","isSupportUploadFolder","CreateFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","_this$state2","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","ItemDropdownMenu","tagName","toggleClass","getMenuList","MoveDirentDialog","CopyDirentDialog","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkOperation","zIndex","TagColor","togglePopover","isPopoverOpen","selectTagColor","newColor","updateRepoTag","tagColor","colorList","Popover","PopoverBody","defaultChecked","TagName","toggleMode","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","ListTagDialog","onListTagCancel","onCreateRepoTag","targetTagID","deleteRepoTag","repo_tag","DirTool","onShowListRepoTag","isRepoTagDialogShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onListTaggedFileToggle","currentTag","isFile","isMarkdownFile","trashUrl","ListTaggedFilesDialog","updateUsedRepoTags","CurDirPath","onDeleteRepoTag","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","entry","search","highlightedDisplay","focused","_this$props3","oldTime","CommentItem","ParticipantsList","participants","showIconTip","MentionsInput","defaultStyle","Mention","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","convertComment","mdFile","processor","html","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","active","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","isImg","isVideo","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","onItemCertify","certifyFile","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onConvertWithONLYOFFICE","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","isArray","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isSelected","isHandleContextMenuEvent","getDirentItemMenuList","ReactTooltip","delayHide","effect","_customPermission$per","preview","activeDirent","_this$props4","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","unix","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","DirentListView","prepareImageItem","useThumbnail","isGIF","thumbnailSizeForOriginal","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","dragStartPosition","ImageDialog","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","readmeMarkdown","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","WikiMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","progress","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","getUpdateLink","_this$props7","pop","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","getFileDownloadLink","getFileContent","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","FileTag","_res$data3","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","_res$data4","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","_Fragment","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data5","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","_componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee","repoRes","permissionID","permissionRes","wrap","_context","prev","decodeURIComponent","sent","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","stop","unwatchRepo","_getAsyncCopyMoveProgress","_callee2","_message","_context2","queryAsyncOperationProgress","abrupt","successful","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","toggleItemFreezed","Member","_React$PureComponent","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","RoleEditor","currentRole","onRoleChanged","PureComponent","ManageMembersDialog","listGroupMembers","page","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","isFreezed","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","_this$state3","InputGroupText","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","inputNewName","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","MainContentWrapper","WrapperedComponent","Wrapper","GeneralToolBar","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","contentClassName","ReactDom","getElementById","getRandomValues","crypto","msCrypto","rnds8","rng","byteToHex","bytesToUuid","buf","bth","v4","rnds","ii","listenerId","ButtonDropdown","str","qs","qry","pairs","pair","constructor","imageTitle","Lightbox","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","binary","isBuf","Encoder","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","start","tryParse","decodeString","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","self","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","doOpen","doClose","send","write","onOpen","writable","onData","onPacket","selectTagcolor","createTag","createRepoTag","newTag","canSave","copyToClipboard","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","ReadmeDialog","readmeContent","MarkdownViewer","showTOC","scriptSource","onListTaggedFiles","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","re","parts","m","exec","uri","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","arr","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","isView","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","processPacketQueue","shift","subsLength","disconnect","reset","onclose","reason","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","poll","pause","doPoll","callbackfn","doWrite","schema","sid","withNativeBlob","withNativeFile","File","toJSON","alphabet","seed","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","updateTabTitle","headingList","offsetTop","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","index2","originalPath","pathNormalize","isInternalFileLink","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","links","progressStyle","lineHeight","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","parseuri","loc","createDebug","prevTime","enabled","curr","ms","coerce","formatter","val","logFn","abs","selectColor","init","instances","stack","disable","skips","instance","h","plural","ceil","isNaN","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","empty","Request","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","abv","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","removeChild","iframe","insertAt","getElementsByTagName","insertBefore","head","area","iframeId","complete","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","factor","pow","rand","deviation","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","factory","SpriteSymbol","viewBox","createCommonjsModule","this$1","global","deepmerge","isMergeableObject","emptyTarget","cloneIfNecessary","optionsArgument","defaultArrayMerge","destination","mergeObject","arrayMerge","all","namespaces_1","default","svg","xlink","defaultAttrs","wrapInSvgString","attrsRendered","attrs","attr","objectToAttrsString","BrowserSpriteSymbol","SpriteSymbol$$1","__proto__","prototypeAccessors","isMounted","createFromExistingNode","outerHTML","unmount","mount","mountTarget","querySelector","hasImportNode","importNode","doc","DOMParser","parseFromString","childNodes","svg$1","xlink$1","defaultConfig","Sprite","existing","remove","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","getUrlWithoutFragment","angular","run","$rootScope","$on","oldUrl","selector","xLinkNS","xLinkAttrName","specialUrlCharsPattern","sprite","attList","attSelector","updateUrls","references","replaceWith","startsWithEncoded","replaceWithEncoded","nodes","matcher","arrayfied","matched","selectAttributes","localName","setAttributeNS","updateReferences","Events","BrowserSprite","Sprite$$1","cfg","emitter","handler","evt","_emitter","_autoConfigure","baseUrl","handleLocationChange","_handleLocationChange","spriteNode","symbolNode","updatedNodes","textContent","evalStylesIEWorkaround","isNewSymbol","attach","prepend","mountNode","usages","ready$1","fns","hack","doScroll","domContentLoaded","definition","spriteNodeId","spriteGlobalVarName","loadSprite","it","fails","require$$0","NATIVE_BIND","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","V","descriptor","bitmap","configurable","FunctionPrototype","uncurryThisWithBind","uncurryThisRaw","stringSlice","classofRaw","require$$1","classof","require$$2","$Object","isNullOrUndefined","$TypeError","TypeError","requireObjectCoercible","IndexedObject","toIndexedObject","documentAll","IS_HTMLDDA","argument","isCallable","aFunction","isPrototypeOf","Deno","versions","v8","V8_VERSION","Symbol","sham","iterator","getBuiltIn","require$$3","$Symbol","$String","tryToString","aCallable","isObject","defineGlobalProperty","SHARED","sharedModule","copyright","toObject","hasOwn","uncurryThis","postfix","uid","shared","NATIVE_SYMBOL","require$$4","USE_SYMBOL_AS_UID","require$$5","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","wellKnownSymbol","isSymbol","getMethod","P","ordinaryToPrimitive","pref","valueOf","TO_PRIMITIVE","toPrimitive","exoticToPrim","toPropertyKey","EXISTS","documentCreateElement","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","require$$6","IE8_DOM_DEFINE","require$$7","$getOwnPropertyDescriptor","O","anObject","V8_PROTOTYPE_DEFINE_BUG","$defineProperty","ENUMERABLE","CONFIGURABLE","WRITABLE","Attributes","definePropertyModule","createNonEnumerableProperty","getDescriptor","PROPER","functionToString","inspectSource","WeakMap","sharedKey","NATIVE_WEAK_MAP","hiddenKeys","OBJECT_ALREADY_INITIALIZED","metadata","facade","STATE","enforce","getterFor","TYPE","CONFIGURABLE_FUNCTION_NAME","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","makeBuiltIn","makeBuiltInModule","getter","setter","arity","trunc","toIntegerOrInfinity","number","toLength","lengthOfArrayLike","toAbsoluteIndex","integer","createMethod","IS_INCLUDES","$this","fromIndex","internalObjectKeys","getOwnPropertyNames","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","replacement","isForced","feature","detection","normalize","POLYFILL","NATIVE","defineBuiltIn","simple","unsafe","nonConfigurable","nonWritable","copyConstructorProperties","exceptions","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","CORRECT_ARGUMENTS","tryGet","callee","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","isConstructor","SPECIES","$Array","arraySpeciesConstructor","originalArray","C","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","every","findIndex","filterReject","enumBugKeys","objectKeys","Properties","activeXDocument","definePropertiesModule","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","LT","NullProtoObjectViaActiveX","temp","parentWindow","ActiveXObject","domain","iframeDocument","JS","contentWindow","F","NullProtoObjectViaIFrame","UNSCOPABLES","ArrayPrototype","$","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","stat","dontCallGetSet","forced","$find","addToUnscopables","FIND","SKIPS_HOLES","proto","HIDE","REBUILD","SHOW","initEvent","checkStatus","dataEventOff","isCapture","currentTarget","currentItem","hideTooltip","setUntargetItems","getTargetArray","showTooltip","targetArray","customListeners","bodyListener","forId","lastTarget","respectEffect","customEvent","tip","parentElement","isCustomEvent","isTargetBelongsToTooltip","getEffect","makeProxy","findCustomEvents","dataAttribute","getBody","place","desiredPlace","getDimensions","tipWidth","tipHeight","targetWidth","targetHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffsetX","extraOffsetY","windowWidth","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","offsetX","getTipOffsetTop","offsetY","t","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placeIsInside","right","newPlace","chosen","choose","isNewState","boundingClientRect","targetTop","targetLeft","disToMouse","currentParent","computedStyle","getComputedStyle","getPropertyValue","TipContent","getContent","multiline","regexp","parseAria","ariaObj","fill","defaultColors","background","border","arrow","warning","info","light","DEFAULT_PADDING","DEFAULT_RADIUS","tooltip","generateTooltipStyle","uuid","customColors","hasBorder","radius","textColor","borderColor","arrowColor","arrowRadius","tooltipRadius","generateStyle","getDefaultPopupColors","getPopupColors","CONSTANT","rebuild","globalRebuild","unbindListener","bindListener","globalShow","hasTarget","globalHide","staticMethods","bindWindowEvents","resizeHide","onWindowResize","unbindWindowEvents","windowListener","ele","customBindListener","eventOff","dataEvent","customListener","customUnbindListener","bodyMode","isBodyMode","bindBodyListener","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","unbindBodyListener","bodyModeListeners","mouseover","mousemove","updateTooltip","mouseout","targetEventOff","borderClass","customRadius","extraClass","delayShow","currentEvent","ariaProps","isEmptyTip","originTooltip","isMultiline","delayShowLoop","delayHideLoop","delayReshow","intervalUpdateContent","methodArray","insecure","disableInternalStyle","injectStyles","clearTimer","removeScrollListener","tooltipRef","domRoot","matches","msMatchesSelector","mozMatchesSelector","escaped","nodeListToArray","shadowRoot","globalEventOff","unbindBasicListener","isCaptureMode","bindRemovalTracker","unbindRemovalTracker","getTipContent","isGlobalCall","switchToSolid","FocusEvent","scrollHide","getPosition","overridePosition","reshowDelay","delayUpdate","updateState","addScrollListener","updatePosition","afterShow","disableProp","getTooltipContent","eventTarget","mouseOnToolTip","delayTime","isInvisible","isScroll","afterHide","isMyElement","resetState","listenForTooltipExit","removeListenerForTooltipExit","hideTooltipOnScroll","callbackAfter","tooltipClass","hasCustomColors","clickable","supportedWrappers","wrapperClassName","htmlContent","any","class","newAriaProps","MutationObserver","WebKitMutationObserver","MozMutationObserver","observer","mutations","m1","mutation","m2","removedNodes","observe","childList","subtree","removalTracker"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","var map = {\n\t\"./monitor.svg\": 1715\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1714;","import SpriteSymbol from \"../../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"monitor\",\n  \"use\": \"monitor-usage\",\n  \"viewBox\": \"0 0 32 32\",\n  \"content\": \"<symbol xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" viewBox=\\\"0 0 32 32\\\" id=\\\"monitor\\\"><g><g transform=\\\"translate(1.000000, 1.000000)\\\"><path class=\\\"st0\\\" fill=\\\"currentColor\\\" d=\\\"M25.1,20.8c-0.5-0.2-0.8-0.6-0.9-1.1v-4.7c0-4.4-4.2-7.3-6-8.3c-0.1-0.5-0.4-1.4-1-2\\n\\t\\t\\tc-0.6-0.6-1.4-0.9-2.3-0.8h-0.1c-0.8,0-1.6,0.3-2.3,0.8c-0.7,0.6-0.9,1.5-1,2c-1.8,0.9-6,3.8-6,8.3v4.6c0,0.5-0.4,0.9-0.9,1.1\\n\\t\\t\\tc-1.6,0.7-1.8,2.1-1.4,3.1c0.2,0.5,0.6,1,3.6,1h2.5c0.2,2.6,2.5,4.6,5.4,4.6s5.3-2.1,5.4-4.6h2.6c3,0,3.4-0.5,3.6-1\\n\\t\\t\\tC26.9,22.9,26.7,21.5,25.1,20.8L25.1,20.8z M14.9,27.8c-1.9,0-3.4-1.3-3.6-2.9h7.1C18.3,26.5,16.8,27.8,14.9,27.8L14.9,27.8z\\n\\t\\t\\t M22.9,23.1H7c-0.6,0-1.3,0-1.9-0.1c0-0.3,0.1-0.4,0.5-0.6c1.1-0.5,1.9-1.5,1.9-2.7v-4.7c0-3.9,4.5-6.5,5.3-6.9L13.4,8V7.4\\n\\t\\t\\tc0-0.2,0.1-1.7,1.5-1.7H15c1.4,0,1.5,1.5,1.5,1.7V8L17,8.2c0.8,0.3,5.3,2.9,5.3,6.9v4.7c0,1.2,0.8,2.2,1.9,2.7\\n\\t\\t\\tc0.4,0.2,0.5,0.3,0.5,0.6C24.2,23.1,23.5,23.1,22.9,23.1L22.9,23.1z\\\" /><path class=\\\"st0\\\" d=\\\"M23.9,0.2c0.4,0.3,0.6,0.9,0.3,1.3l-2.1,3.2c-0.3,0.4-0.9,0.6-1.3,0.3s-0.6-0.9-0.3-1.3l2.1-3.2\\n\\t\\t\\tC22.8,0,23.4-0.1,23.9,0.2z M29.9,7.1c0.2,0.5,0,1.1-0.5,1.3L25.9,10c-0.5,0.2-1,0-1.3-0.5c-0.2-0.5,0-1,0.5-1.3l3.5-1.6\\n\\t\\t\\tC29.1,6.4,29.7,6.6,29.9,7.1L29.9,7.1z M0.1,7.1c0.1-0.2,0.3-0.4,0.5-0.5c0.2-0.1,0.5-0.1,0.7,0l3.5,1.6c0.3,0.1,0.5,0.5,0.5,0.8\\n\\t\\t\\tc0,0.3-0.1,0.7-0.4,0.9c-0.3,0.2-0.6,0.2-1,0.1L0.6,8.4C0.1,8.2-0.1,7.6,0.1,7.1L0.1,7.1z M6.1,0.2C6.3,0,6.6,0,6.8,0\\n\\t\\t\\ts0.5,0.2,0.6,0.4l2.1,3.2c0.2,0.3,0.2,0.7,0.1,1S9.1,5.2,8.8,5.2C8.4,5.2,8.1,5,7.9,4.7L5.8,1.5C5.7,1.3,5.6,1,5.7,0.8\\n\\t\\t\\tC5.8,0.5,5.9,0.3,6.1,0.2L6.1,0.2L6.1,0.2z\\\" /></g></g></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from './Tooltip';\nimport { omit } from './utils';\nvar omitKeys = ['defaultOpen'];\n\nvar UncontrolledTooltip = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(UncontrolledTooltip, _Component);\n\n  function UncontrolledTooltip(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.state = {\n      isOpen: props.defaultOpen || false\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UncontrolledTooltip.prototype;\n\n  _proto.toggle = function toggle() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    });\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(Tooltip, _extends({\n      isOpen: this.state.isOpen,\n      toggle: this.toggle\n    }, omit(this.props, omitKeys)));\n  };\n\n  return UncontrolledTooltip;\n}(Component);\n\nexport { UncontrolledTooltip as default };\nUncontrolledTooltip.propTypes = _objectSpread({\n  defaultOpen: PropTypes.bool\n}, Tooltip.propTypes);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        this.setState({\n          isLoading: false,\n          errorMsg: data.failed_reason\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","class LibraryDetails {\n  constructor(object) {\n    this.repo_id= object.repo_id;\n    this.repo_name = object.repo_name;\n  }\n}\n\nexport default LibraryDetails;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"@gatsbyjs/reach-router\";\nimport { Badge } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  canAddRepo,\n  canGenerateShareLink,\n  canGenerateUploadLink,\n  canInvitePeople,\n  dtableWebServer,\n  enableOCM,\n  enableOCMViaWebdav,\n} from \"../utils/constants\";\nimport { Utils } from \"../utils/utils\";\nimport toaster from \"./toast\";\nimport Group from \"../models/group\";\n//KEEPER\nimport { seafileAPI, keeperAPI } from \"../utils/seafile-api\";\nimport LibraryDetails from \"../models/library-details\";\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from \"../utils/constants\";\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar: false,\n      groupItems: [],\n      libraryDetailsExtended: false,\n      libraryDetailItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n    this.libraryDetailsHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI\n      .listGroups()\n      .then((res) => {\n        let groupList = res.data.map((item) => {\n          let group = new Group(item);\n          return group;\n        });\n\n        this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n        _this.setState({\n          groupItems: groupList.sort((a, b) => {\n            return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (\n      window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100\n    ) {\n      if (\n        !window.confirm(\n          gettext(\n            \"A file is being uploaded. Are you sure you want to leave this page?\"\n          )\n        )\n      ) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? \"active\" : \"\";\n  };\n\n  renderSharedGroups() {\n    let style = { height: 0 };\n    if (this.state.groupsExtended) {\n      style = { height: this.groupsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"groups/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\"groups\")}`}\n            onClick={(e) => this.tabItemClick(e, \"groups\")}\n          >\n            <span className=\"sharp\" aria-hidden=\"true\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"All Groups\")}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map((item) => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link\n                to={siteRoot + \"group/\" + item.id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.name\n                )}`}\n                onClick={(e) => this.tabItemClick(e, item.name, item.id)}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = { height: height };\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-share-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-share-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-share-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-upload-links/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-upload-links\"\n            )}`}\n            title={gettext(\"Links\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-upload-links\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Links\")}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column ${\n          this.state.sharedExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link\n              to={siteRoot + \"share-admin-libs/\"}\n              className={`nav-link ellipsis ${this.getActiveClass(\n                \"share-admin-libs\"\n              )}`}\n              title={gettext(\"Libraries\")}\n              onClick={(e) => this.tabItemClick(e, \"share-admin-libs\")}\n            >\n              <span aria-hidden=\"true\" className=\"sharp\">\n                #\n              </span>\n              <span className=\"nav-text\">{gettext(\"Libraries\")}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link\n            to={siteRoot + \"share-admin-folders/\"}\n            className={`nav-link ellipsis ${this.getActiveClass(\n              \"share-admin-folders\"\n            )}`}\n            title={gettext(\"Folders\")}\n            onClick={(e) => this.tabItemClick(e, \"share-admin-folders\")}\n          >\n            <span aria-hidden=\"true\" className=\"sharp\">\n              #\n            </span>\n            <span className=\"nav-text\">{gettext(\"Folders\")}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return customNavItems.map((item, idx) => {\n      return (\n        <li key={idx} className=\"nav-item\">\n          <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n            <span className={item.icon} aria-hidden=\"true\"></span>\n            <span className=\"nav-text\">{item.desc}</span>\n          </a>\n        </li>\n      );\n    });\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext(\"Files\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"my-libs/\"}\n                  className={`nav-link ellipsis ${\n                    this.getActiveClass(\"my-libs\") ||\n                    this.getActiveClass(\"deleted\")\n                  }`}\n                  title={gettext(\"My Libraries\")}\n                  onClick={(e) => this.tabItemClick(e, \"my-libs\")}\n                >\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"My Libraries\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                to={siteRoot + \"shared-libs/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"shared-libs\"\n                )}`}\n                title={gettext(\"Shared with me\")}\n                onClick={(e) => this.tabItemClick(e, \"shared-libs\")}\n              >\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Shared with me\")}</span>\n              </Link>\n            </li>\n            {canViewOrg && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"org\")}\n              >\n                <Link\n                  to={siteRoot + \"org/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\"org\")}`}\n                  title={gettext(\"Shared with all\")}\n                >\n                  <span\n                    className=\"sf2-icon-organization\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">{gettext(\"Shared with all\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Shared with groups\")}\n                onClick={this.grpsExtend}\n              >\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Shared with groups\")}\n                </span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.groupsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"shared-with-ocm/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"shared-with-ocm\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"shared-with-ocm\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {enableOCMViaWebdav && (\n              <li className=\"nav-item\">\n                <Link\n                  to={siteRoot + \"ocm-via-webdav/\"}\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"ocm-via-webdav\"\n                  )}`}\n                  title={gettext(\"Shared from other servers\")}\n                  onClick={(e) => this.tabItemClick(e, \"ocm-via-webdav\")}\n                >\n                  <span\n                    className=\"sf3-font-share-from-other-servers sf3-font\"\n                    aria-hidden=\"true\"\n                  ></span>\n                  <span className=\"nav-text\">\n                    {gettext(\"Shared from other servers\")}\n                  </span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER lib details button. FEXME! */}\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Library Details\")}\n                onClick={this.libdtExtend}\n              >\n                {/* <span */}\n                {/*   className={`toggle-icon float-right fas ${ */}\n                {/*     this.state.libraryDetailsExtended */}\n                {/*       ? \"fa-caret-down\" */}\n                {/*       : \"fa-caret-left\" */}\n                {/*   }`} */}\n                {/*   aria-hidden=\"true\" */}\n                {/* ></span> */}\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">\n                  {gettext(\"Library Details\")}\n                </span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.libraryDetailsExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n                {/* <span className=\"sf2-icon-list-view\" aria-hidden=\"true\"></span> */}\n                {/* <span className=\"nav-text\">{gettext(\"Library Details\")}</span> */}\n              </a>\n              {this.renderLibraryDetails()}\n            </li>\n\n\n          </ul>\n\n          <h3 className=\"sf-heading\">{gettext(\"Tools\")}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"starred\"\n                )}`}\n                to={siteRoot + \"starred/\"}\n                title={gettext(\"Favorites\")}\n                onClick={(e) => this.tabItemClick(e, \"starred\")}\n              >\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Favorites\")}</span>\n              </Link>\n            </li>\n            {showActivity && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"dashboard\"\n                  )}`}\n                  to={siteRoot + \"dashboard/\"}\n                  title={gettext(\"Activities\")}\n                  onClick={(e) => this.tabItemClick(e, \"dashboard\")}\n                >\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Activities\")}</span>\n                </Link>\n              </li>\n            )}\n            {/* KEEPER */}\n            {/* <li className=\"nav-item\"> */}\n            {/*   <Link */}\n            {/*     className={`nav-link ellipsis ${this.getActiveClass( */}\n            {/*       \"published\" */}\n            {/*     )}`} */}\n            {/*     to={siteRoot + \"published/\"} */}\n            {/*     title={gettext(\"Published Libraries\")} */}\n            {/*     onClick={(e) => this.tabItemClick(e, \"published\")} */}\n            {/*   > */}\n            {/*     <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span> */}\n            {/*     <span className=\"nav-text\"> */}\n            {/*       {gettext(\"Published Libraries\")} */}\n            {/*     </span> */}\n            {/*   </Link> */}\n            {/* </li> */}\n            {isDocs && (\n              <li\n                className=\"nav-item\"\n                onClick={(e) => this.tabItemClick(e, \"drafts\")}\n              >\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"drafts\"\n                  )}`}\n                  to={siteRoot + \"drafts/\"}\n                  title={gettext(\"Drafts\")}\n                >\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Drafts\")}</span>\n                  {this.props.draftCounts > 0 && (\n                    <span id=\"draft-num\">{this.props.draftCounts}</span>\n                  )}\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  \"linked-devices\"\n                )}`}\n                to={siteRoot + \"linked-devices/\"}\n                title={gettext(\"Linked Devices\")}\n                onClick={(e) => this.tabItemClick(e, \"linked-devices\")}\n              >\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Linked Devices\")}</span>\n              </Link>\n            </li>\n            {canInvitePeople && (\n              <li className=\"nav-item\">\n                <Link\n                  className={`nav-link ellipsis ${this.getActiveClass(\n                    \"invitations\"\n                  )}`}\n                  to={siteRoot + \"invitations/\"}\n                  title={gettext(\"Invite Guest\")}\n                  onClick={(e) => this.tabItemClick(e, \"invitations\")}\n                >\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext(\"Invite Guest\")}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a\n                className=\"nav-link ellipsis\"\n                title={gettext(\"Share Admin\")}\n                onClick={this.shExtend}\n              >\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext(\"Share Admin\")}</span>\n                <span\n                  className={`toggle-icon fas ${\n                    this.state.sharedExtended\n                      ? \"fa-caret-down\"\n                      : \"fa-caret-left\"\n                  }`}\n                  aria-hidden=\"true\"\n                ></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer && (\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span\n              className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\"\n              aria-hidden=\"true\"\n            ></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        )}\n      </div>\n    );\n  }\n  // KEEPER\n  libdtExtend = () => {\n    this.setState({\n      libraryDetailsExtended: !this.state.libraryDetailsExtended,\n    });\n    this.loadLibraryDetails();\n  };\n\n  loadLibraryDetails = () => {\n    let _this = this;\n    keeperAPI\n      .listLibraryDetails()\n      .then((res) => {\n        let libraryDetailsList = res.data.map((item) => {\n          let libraryDetailsItem = new LibraryDetails(item);\n          return libraryDetailsItem;\n        });\n\n        this.libraryDetailsHeight =\n          (libraryDetailsList.length + 1) * _this.listHeight;\n        _this.setState({\n          libraryDetailItems: libraryDetailsList.sort((a, b) => {\n            return a.repo_name.toLowerCase() < b.repo_name.toLowerCase()\n              ? -1\n              : 1;\n          }),\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  renderLibraryDetails() {\n    let style = { height: 0 };\n    if (this.state.libraryDetailsExtended) {\n      style = { height: this.libraryDetailsHeight };\n    }\n    return (\n      <ul\n        className={`nav sub-nav nav-pills flex-column grp-list ${\n          this.state.groupsExtended ? \"side-panel-slide\" : \"side-panel-slide-up\"\n        }`}\n        style={style}\n      >\n        {this.state.libraryDetailItems.map((item) => {\n          return (\n            <li key={item.repo_id} className=\"nav-item\">\n              <a\n                href={siteRoot + \"landing-page/libs/\" + item.repo_id + \"/\"}\n                className={`nav-link ellipsis ${this.getActiveClass(\n                  item.repo_name\n                )}`}\n              >\n                <span className=\"sharp\" aria-hidden=\"true\">\n                  #\n                </span>\n                <span className=\"nav-text\">{item.repo_name}</span>\n              </a>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Modal, ModalBody } from \"reactstrap\";\nimport {\n  gettext,\n  lang,\n  mediaUrl,\n  logoPath,\n  logoWidth,\n  logoHeight,\n  siteTitle,\n  seafileVersion,\n  additionalAboutDialogLinks,\n  aboutDialogCustomHtml,\n} from \"../../utils/constants\";\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}>\n            <span aria-hidden=\"true\">×</span>\n          </button>\n          <div className=\"about-content\">\n            <p>\n              <img\n                src={mediaUrl + logoPath}\n                height={logoHeight}\n                width={logoWidth}\n                title={siteTitle}\n                alt=\"logo\"\n              />\n            </p>\n            <p>\n              {gettext(\"Server Version: \")}\n              {seafileVersion}\n              <br />© 2024 {gettext(\"KEEPER\")}\n            </p>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n      collapsed: true,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({ isAboutDialogShow: !this.state.isAboutDialogShow });\n  };\n\n  onFooterExpandedToggle = () => {\n    this.setState({ collapsed: !this.state.collapsed });\n  };\n\n  render() {\n    const elementBodyStyle = {\n      maxHeight: this.state.collapsed ? '0' : '30rem',\n      borderBottomWidth: this.state.collapsed ? '0' : '1px',\n    };\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer\">\n          <div id=\"footer-header\">\n            <span\n              aria-hidden=\"true\"\n              className={\n                (this.state.collapsed\n                  ? \"keeper-icon-triangle-up\"\n                  : \"keeper-icon-triangle-down\") + \" vam\"\n              }\n              onClick={this.onFooterExpandedToggle}\n            />\n            &nbsp;\n            <a\n              href={siteRoot + 'project-catalog/'}\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext('Project Catalog')}\n            </a>\n            <a\n              href=\"https://mpdl.zendesk.com/hc/en-us/categories/360001234340-Keeper\"\n              target=\"_blank\"\n              className=\"item\"\n            >\n              {gettext('Help / Knowledge Base')}\n            </a>\n            <a\n              className=\"item cursor-pointer last-item\"\n              onClick={this.onAboutDialogToggle}\n            >\n              {gettext('About')}\n            </a>\n          </div>\n\n          <div id=\"footer-body\" style={elementBodyStyle}>\n            <br />\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>What you need to know</h4>\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/d17ecbb967/\"\n                  target=\"_blank\"\n                >\n                  About Keeper\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/1b0bfceac2/\"\n                  target=\"_blank\"\n                >\n                  Cared Data Commitment\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/2206ad0c0a8346cb8f9e/\"\n                  target=\"_blank\"\n                >\n                  Terms of Service\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>Client</h4>\n                <a href=\"/download_client_program/\" target=\"_blank\">\n                  Download the Keeper client for Windows, Linux, Mac, Android\n                  and iPhone\n                </a>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"left\">\n                <h4>The software behind Keeper</h4>\n                <a href=\"https://seafile.com/en/home/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"seafile-logo\"\n                    src=\"/media/custom/seafile_logo_footer.png\"\n                  />\n                  &nbsp;© 2023 Seafile\n                </a>\n              </div>\n              <div className=\"right\">\n                <h4>A service by</h4>\n                <a href=\"https://www.mpdl.mpg.de/\" target=\"_blank\">\n                  <img\n                    className=\"logo\"\n                    id=\"MPDL-logo\"\n                    src=\"/media/custom/mpdl.png\"\n                  />\n                </a>\n                <br />\n                <br />\n                <a href=\"mailto:keeper@mpdl.mpg.de\" target=\"_blank\">\n                  Contact Keeper Support\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/17e4e9d648/\"\n                  target=\"_blank\"\n                >\n                  Impressum\n                </a>\n                <br />\n                <a\n                  href=\"https://keeper.mpdl.mpg.de/f/bf2c8a977f70428587eb/\"\n                  target=\"_blank\"\n                >\n                  Privacy Policy\n                </a>\n              </div>\n            </div>\n          </div>\n          {this.state.isAboutDialogShow && (\n            <ModalPortal>\n              <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n            </ModalPortal>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://static.zdassets.com/ekr/snippet.js?key=32977f9b-455d-428b-8dd5-f4c65aad0daa\";\n    script.id = \"ze-snippet\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  render() {\n    return <div className=\"main-panel\">{this.props.children}</div>;\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n    \n  }\n  \n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  }\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  }\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  }\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  }\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n    // KEEPER\n    if (object.doi != undefined) {\n      this.doi = object.doi;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../css/icon.css';\n\nconst importAll = (requireContext) => {\n  requireContext.keys().forEach(requireContext);\n};\ntry {\n  importAll(require.context('../assets/icons', true, /\\.svg$/));\n} catch (error) {\n  // eslint-disable-next-line no-console\n  console.log(error);\n}\n\nconst Icon = (props) => {\n  const { className, symbol } = props;\n  const iconClass = `seafile-multicolor-icon seafile-multicolor-icon-${symbol} ${className || ''}`;\n  return (\n    <svg className={iconClass}>\n      <use xlinkHref={`#${symbol}`} />\n    </svg>\n  );\n};\n\nIcon.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport default Icon;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  }\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares()\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n\t</td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n\t  {item.is_dir ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>\n\t  {this.props.path ? \"\" : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n\tif (index === 0) {\n          nodePath = '/';\n\t} else {\n          nodePath += item + '/';\n\t}\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  }\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Dropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n} from \"reactstrap\";\nimport {\n  gettext,\n  isPro,\n  folderPermEnabled,\n  enableRepoSnapshotLabel,\n  enableResetEncryptedRepoPassword,\n  isEmailConfigured,\n  enableRepoAutoDel,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, \"toggle\");\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == \"Enter\" || e.key == \"Space\") {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === \"Rename\") {\n      this.setState({ isItemMenuShow: !this.state.isItemMenuShow });\n      return;\n    }\n\n    this.setState({ isItemMenuShow: !this.state.isItemMenuShow }, () => {\n      if (this.state.isItemMenuShow) {\n        this.props.onFreezedItem();\n      } else {\n        this.props.onUnfreezedItem();\n      }\n    });\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem =\n      isPro &&\n      repo.encrypted &&\n      enableResetEncryptedRepoPassword &&\n      isEmailConfigured;\n    let operations = [\"Rename\", \"Transfer\"];\n    // KEEPER\n    let showAssignDoiMenuItem = repo.doi && !repo.encrypted;\n    let showArchiveLibraryMenuItem = !repo.encrypted;\n    let showCertifyLibraryMenuItem = !repo.encrypted;\n    let showEditMetadatayMenuItem = !repo.encrypted;\n    if (folderPermEnabled) {\n      operations.push(\"Folder Permission\");\n    }\n    operations.push(\"Share Links Admin\", \"Divider\");\n\n    if (repo.encrypted) {\n      operations.push(\"Change Password\");\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push(\"Reset Password\");\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored\n        ? \"Unwatch File Changes\"\n        : \"Watch File Changes\";\n      operations.push(monitorOp);\n    }\n\n    operations.push(\"History Setting\", \"API Token\");\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push(\"Label Current State\");\n    }\n    if (enableRepoAutoDel) {\n      operations.push(\"Old Files Auto Delete\");\n    }  \n    //KEEPER\n    operations.push(\"Divider\");\n    if (showAssignDoiMenuItem) {\n      operations.push(\"Assign DOI to current state\");\n    }\n    if (showArchiveLibraryMenuItem) {\n      operations.push(\"Archive Library\");\n    }\n    if (showCertifyLibraryMenuItem) {\n      operations.push(\"Certify Library\");\n    }\n    if (showEditMetadatayMenuItem) {\n      operations.push(\"Edit Metadata\");\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = \"\";\n    switch (item) {\n      case \"Star\":\n        translateResult = gettext(\"Star\");\n        break;\n      case \"Unstar\":\n        translateResult = gettext(\"Unstar\");\n        break;\n      case \"Share\":\n        translateResult = gettext(\"Share\");\n        break;\n      case \"Delete\":\n        translateResult = gettext(\"Delete\");\n        break;\n      case \"Rename\":\n        translateResult = gettext(\"Rename\");\n        break;\n      case \"Transfer\":\n        translateResult = gettext(\"Transfer\");\n        break;\n      case \"History Setting\":\n        translateResult = gettext(\"History Setting\");\n        break;\n      case \"Change Password\":\n        translateResult = gettext(\"Change Password\");\n        break;\n      case \"Reset Password\":\n        translateResult = gettext(\"Reset Password\");\n        break;\n      case \"Watch File Changes\":\n        translateResult = gettext(\"Watch File Changes\");\n        break;\n      case \"Unwatch File Changes\":\n        translateResult = gettext(\"Unwatch File Changes\");\n        break;\n      case \"Folder Permission\":\n        translateResult = gettext(\"Folder Permission\");\n        break;\n      case \"Label Current State\":\n        translateResult = gettext(\"Label Current State\");\n        break;\n      case \"API Token\":\n        translateResult = \"API Token\"; // translation is not needed here\n        break;\n      case \"Share Links Admin\":\n        translateResult = gettext(\"Share Links Admin\");\n        break;\n      case \"Old Files Auto Delete\":\n        translateResult = gettext(\"Auto deletion\");\n        break;\n      //KEEPER\n      case \"Assign DOI to current state\":\n        translateResult = gettext(\"Assign DOI to current state\");\n        break;\n      case \"Archive Library\":\n        translateResult = gettext(\"Archive Library\");\n        break;\n      case \"Certify Library\":\n        translateResult = gettext(\"Certify Library\");\n        break;\n      case \"Edit Metadata\":\n        translateResult = gettext(\"Edit Metadata\");\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown\n          isOpen={this.state.isItemMenuShow}\n          toggle={this.toggleOperationMenu}\n        >\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext(\"More Operations\")}\n            aria-label={gettext(\"More Operations\")}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu>\n            {operations.map((item, index) => {\n              if (item == \"Divider\") {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem\n                    key={index}\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                    onKeyDown={this.onMenuItemKeyDown}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift(\"Delete\");\n    operations.unshift(\"Share\");\n    this.props.isStarred\n      ? operations.unshift(\"Unstar\")\n      : operations.unshift(\"Star\");\n\n    return (\n      <Dropdown\n        isOpen={this.state.isItemMenuShow}\n        toggle={this.toggleOperationMenu}\n      >\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext(\"More Operations\")}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div\n          className={`${this.state.isItemMenuShow ? \"\" : \"d-none\"}`}\n          onClick={this.toggleOperationMenu}\n        >\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != \"Divider\") {\n                return (\n                  <DropdownItem\n                    key={index}\n                    className=\"mobile-menu-item\"\n                    data-toggle={item}\n                    onClick={this.onMenuItemClick}\n                  >\n                    {this.translateOperations(item)}\n                  </DropdownItem>\n                );\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\" role=\"tablist\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'shareLinks'} aria-controls=\"share-links-panel\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\" role=\"tab\" aria-selected={activeTab === 'uploadLinks'} aria-controls=\"upload-links-panel\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}} role=\"tabpanel\" id={activeTab === 'shareLinks' ? 'share-links-panel' : 'upload-links-panel'}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap'; \nimport { gettext } from '../../utils/constants';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass AssignDoiDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  formSubmit = () => {\n    const {repoID, repoName} = this.props;\n    this.props.toggleDialog();\n    keeperAPI.addDoi(repoID).then((res) => {\n      if (res.data && res.data['msg']) {\n        toaster.success(res.data['msg'], {duration: 3});\n      }\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg, {duration: 3});\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}> <span>{gettext('Assign DOI to {library_name}').replace('{library_name}','')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n        <ModalBody>\n          {gettext(\"Please note: a DOI identifier will be assigned to the current state of the selected library (snapshot). The DOI will persistently reference to the snapshot and not the latest state of the library. A DOI can only be created once per library.\")}\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Assign DOI')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAssignDoiDialog.propTypes = propTypes;\n\nexport default AssignDoiDialog;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-40119e12.esm.js';\nimport { u as useAsync } from '../../dist/useAsync-fd9b28d9.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useCreatable } from '../../dist/useCreatable-36230047.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-a86253bb.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar AsyncCreatableSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var stateManagerProps = useAsync(props);\n  var creatableProps = useStateManager(stateManagerProps);\n  var selectProps = useCreatable(creatableProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\n\nexport default AsyncCreatableSelect;\n","import React, {Fragment} from 'react';\nimport Select from 'react-select';\nimport AsyncCreatableSelect from 'react-select/async-creatable';\nimport {Utils} from '../utils/utils';\nimport {gettext,} from '../utils/constants';\nimport {keeperAPI} from '../utils/seafile-api';\nimport toaster from './toast';\nimport {Col, Modal, ModalHeader, ModalBody, ModalFooter, FormGroup, Input, Label, Row, Tooltip} from 'reactstrap';\nimport PropTypes from 'prop-types';\n\nimport '../css/toolbar.css';\nimport '../css/search.css';\n\nimport '../css/user-settings.css';\nimport '../css/keeper-archive-metadata-form.css';\n\nlet mpgInstituteOptions = [];\n\nconst defaultResourceType = \"Library\";\nconst resourceTypes = [\"Library\", \"Project\"];\n\nconst defaultAuthors = [{firstName: \"\", lastName: \"\", affs: [\"\"]}];\nconst defaultDirectors = [{firstName: \"\", lastName: \"\"}];\nconst defaultPublisher = gettext(\"MPDL Keeper Service, Max-Planck-Gesellschaft zur Förderung der Wissenschaften e. V.\");\n\nconst defaultMd = {\n  title: \"\",\n  authors: defaultAuthors,\n  publisher: defaultPublisher,\n  description: \"\",\n  year: \"\",\n  institute: \"\",\n  department: \"\",\n  directors: defaultDirectors,\n  resourceType: defaultResourceType,\n  license: \"\",\n  errors: \"\",\n};\n\nconst defaultValidMd = {\n  title: true,\n  authors: [[true, true]],\n  publisher: true,\n  description: true,\n  year: true,\n  institute: true,\n  department: true,\n  directors: [[true, true]],\n  resourceType: true,\n};\n\nconst infoAreaPropTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nclass InfoArea extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      helpTooltipOpen: false,\n      errorTooltipOpen: false,\n    };\n  }\n\n  toggleHelp = () => {\n    this.setState({\n      helpTooltipOpen: !this.state.helpTooltipOpen,\n    });\n  };\n\n  toggleError = () => {\n    this.setState({\n      errorTooltipOpen: !this.state.errorTooltipOpen,\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"input-tip pt-0\">\n          {this.props.id != \"license\" &&\n          <span style={{color: \"red\", fontWeight: \"900\"}}>*&nbsp;&nbsp;</span>\n          }\n          <i className=\"fas fa-question-circle\" id={this.props.id + \"-help\"}/>\n          <Tooltip\n            toggle={this.toggleHelp}\n            delay={{show: 0, hide: 0}}\n            target={this.props.id + \"-help\"}\n            placement=\"right\"\n            isOpen={this.state.helpTooltipOpen}\n          >\n            {this.props.helpText}\n          </Tooltip>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nInfoArea.propTypes = infoAreaPropTypes;\n\n\nconst keeperArchiveMetadataFormPropTypes = {\n  repoID: PropTypes.string.isRequired,\n};\n\nclass KeeperArchiveMetadataForm extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...defaultMd,\n      validMd: defaultValidMd,\n      isSaved: true,\n      isButton1Disabled: false,\n      isButton2Disabled: true,\n    };\n\n  }\n\n  componentDidMount() {\n    keeperAPI\n      .getArchiveMetadata(this.props.repoID)\n      .then((res) => {\n        let newState = this.state;\n        if ('data' in res) {\n          Object.keys(defaultMd).map((k) => {\n            newState[k] = k in res.data ? res.data[k] : \"\";\n          });\n          if (!(\"authors\" in newState && newState.authors.length > 0)) {\n            newState.authors = defaultAuthors;\n          }\n          if (!(\"directors\" in newState && newState.directors.length > 0)) {\n            newState.directors = defaultDirectors;\n          }\n          if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n            newState.publisher = defaultPublisher;\n          }\n          if (\n            !(\"resourceType\" in newState && newState.resourceType && newState.resourceType.trim())\n          ) {\n            newState.resourceType = defaultResourceType;\n          }\n        } else {\n          newState = defaultMd;\n        }\n\n        newState.validMd = this.getValidMd(newState);\n\n        this.setState(newState, () => this.setButtons());\n\n        keeperAPI.getMpgInstitutes().then((res2) => {\n          res2.data.map((v) => {\n            mpgInstituteOptions.push({value: v, label: v});\n          });\n        });\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  }\n\n  isFieldValid = (key, value) => {\n    if (!key || !value)\n      return false;\n    let isValid = true;\n    if (key == \"title\" || key == \"description\" || key == \"publisher\" || key == \"department\" || key == \"institute\") {\n      isValid = value.trim() != \"\";\n    } else if (key == \"year\") {\n      const reg = new RegExp(\"^\\\\d{4}$\");\n      //const parsed = parseInt(value, 10);\n      //isValid = !isNaN(parsed) && parsed > 0;\n      isValid = reg.test(value);\n    } else if (key == \"author\" || key == \"director\") {\n      isValid = [Boolean(value.firstName && value.firstName.trim()), Boolean(value.lastName && value.lastName.trim())];\n    }\n    return isValid;\n  }\n\n  isFormValid = (validMd) => {\n    let isValid = true;\n    outer: for (let key in validMd) {\n      if (key == \"authors\" || key == \"directors\") {\n        for (let a of validMd[key])\n          if (!a[0] || !a[1]) {\n            isValid = false;\n            break outer;\n          }\n      } else if (!validMd[key]) {\n        isValid = false;\n        break outer;\n      }\n    }\n    return isValid;\n  }\n\n  setButtons = () => {\n    const isValid = this.isFormValid(this.state.validMd);\n    this.setState({\n      isButton1Disabled: this.state.isSaved && isValid,\n      isButton2Disabled: !this.state.isSaved || !isValid,\n    });\n  }\n\n  getValidMd = (md) => {\n    Object.keys(defaultValidMd).map(k => {\n      if (k == \"authors\" || k == \"directors\") {\n        for (let idx in md[k]) {\n          this.state.validMd[k][idx] = this.isFieldValid(k.slice(0, -1), md[k][idx]);\n        }\n      } else {\n        this.state.validMd[k] = this.isFieldValid(k, md[k]);\n      }\n    });\n    return this.state.validMd;\n  }\n\n  onButton1 = e => {\n    e.preventDefault();\n    this.props.onButton1(defaultMd, this.state)\n      .then(res => {\n        res.validMd = this.getValidMd(res);\n        res.isSaved = true;\n        this.setState(res, () => this.setButtons());\n        toaster.success(\n          gettext(\"Success.\") + (this.state.isButton2Disabled ? \"\" : \" \" + gettext(\"Now you can archive.\")),\n          {duration: 3}\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onButton2 = e => {\n    this.props.onButton2()\n      .then(msg => {\n        toaster.success(gettext(msg), {duration: 3});\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  handleInputChange(e, key) {\n    this.state.validMd[key] = this.isFieldValid(key, e.target.value);\n    this.setState({\n      [key]: e.target.value,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  setAuthorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.authors[idx] = this.isFieldValid(\"author\", values[idx]);\n    }\n    this.setState({\n      authors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => {\n      this.setButtons();\n    }\n    );\n  }\n\n  handleAuthorAddFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\", affs: [\"\"]});\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorRemoveFields = idx => {\n    const values = [...this.state.authors];\n    values.splice(idx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorInputChange = (idx, e) => {\n    const values = [...this.state.authors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffInputChange = (idx, aidx, e) => {\n    const values = [...this.state.authors];\n    values[idx].affs[aidx] = e.target.value;\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffAddFields = (idx, aidx) => {\n    const values = [...this.state.authors];\n    values[idx].affs.splice(aidx + 1, 0, \"\");\n    this.setAuthorInputFields(values);\n  };\n\n  handleAuthorAffRemoveFields = (index, aidx) => {\n    const values = [...this.state.authors];\n    values[index].affs.splice(aidx, 1);\n    this.setAuthorInputFields(values);\n  };\n\n  setDirectorInputFields(values) {\n    for (let idx in values) {\n      this.state.validMd.directors[idx] = this.isFieldValid(\"director\", values[idx]);\n    }\n    this.setState({\n      directors: values,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  }\n\n  handleDirectorAddFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx + 1, 0, {firstName: \"\", lastName: \"\"});\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorRemoveFields = idx => {\n    const values = [...this.state.directors];\n    values.splice(idx, 1);\n    this.setDirectorInputFields(values);\n  };\n\n  handleDirectorInputChange = (idx, e) => {\n    const values = [...this.state.directors];\n    if (e.target.name === \"firstName\") {\n      values[idx].firstName = e.target.value;\n    } else {\n      values[idx].lastName = e.target.value;\n    }\n    this.setDirectorInputFields(values);\n  };\n\n  onResourceSelectChange = selectedItem => {\n    this.setState({\n      resourceType: selectedItem.value,\n    });\n  };\n\n  resourceOptions = resourceTypes.map((item) => {\n    return {value: item, label: gettext(item)};\n  });\n\n  filterInstitutes = input => {\n    return mpgInstituteOptions.filter((i) =>\n      i.label.toLowerCase().includes(input.toLowerCase())\n    );\n  };\n\n  promiseOptions = input =>\n    new Promise((resolve) => {\n      resolve(this.filterInstitutes(input));\n    });\n\n  handleInstituteChange = option => {\n    let insName =\n      option == null\n        ? \"\"\n        : !(\"value\" in option) || option.value.trim() === \"\"\n          ? \"\"\n          : option.value;\n    this.state.validMd.institute = this.isFieldValid(\"institute\", insName);\n    this.setState({\n      institute: insName,\n      validMd: this.state.validMd,\n      isSaved: false,\n    },\n    () => this.setButtons()\n    );\n  };\n\n  validationProps = key => {\n    return (this.state.validMd[key] ? {valid: true} : {invalid: true});\n  }\n\n  validationInSelects = key => {\n    return (this.state.validMd[key] ? \"is-valid\" : \"is-invalid\");\n  }\n\n  validationInAuthors = (idx, nidx) => {\n    return (this.state.validMd.authors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  validationInDirectors = (idx, nidx) => {\n    return (this.state.validMd.directors[idx][nidx] ? {valid: true} : {invalid: true});\n  }\n\n  render() {\n\n    return (\n\n      <Fragment>\n        <Modal isOpen={true}>\n\n          <form method=\"post\">\n\n            <ModalHeader toggle={this.props.hideDialog}>\n              {this.props.header}\n            </ModalHeader>\n            <ModalBody>\n              {this.props.body}\n\n              <div className=\"h-100 d-flex flex-column\">\n                <div className=\"flex-auto d-flex o-hidden\">\n                  <div className=\"main-panel d-flex flex-column\">\n                    <div className=\"content position-relative\" style={{paddingBottom: \"0rem\"}}>\n\n                      {/*Title*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-title\"\n                            sm={1}\n                          >\n                            {gettext(\"Title\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                type=\"textarea\"\n                                className=\"form-control\"\n                                placeholder={gettext(\"Title of your research project\") + \"...\"}\n                                value={this.state.title}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"title\");\n                                }}\n                                {...this.validationProps(\"title\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea id=\"title\"\n                                helpText={gettext(\"Please enter the title of your research project.\")}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Authors*/}\n                      <FormGroup row className=\"md-item\">\n                        {this.state.authors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-authors\"\n                              sm={1}\n                              className=\"pt-3\"\n                              for=\"lbl-authors\"\n                            >\n                              {gettext(\"Author\") +\n                              (this.state.authors.length > 1\n                                ? \" #\" + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <Col sm={4} className=\"form-group md-item\">\n                              <Label for=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 0)}\n                              />\n                            </Col>\n                            <div className=\"form-group col-sm-5 md-item\">\n                              <label htmlFor=\"lastName\">\n                                {gettext('Last Name')}:\n                              </label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleAuthorInputChange(index, e)\n                                }\n                                {...this.validationInAuthors(index, 1)}\n                              />\n                            </div>\n                            <div className=\"form-group col-sm-1\">\n                              {this.state.authors.length > 1 && (\n                                <button\n                                  className=\"author-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleAuthorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"author-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleAuthorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </div>\n                            {index == 0 &&\n                            <span className=\"info-area-names\">\n                              <InfoArea\n                                id=\"author\"\n                                className=\"info-area-names\"\n                                helpText={gettext(\"Please enter the authors and affiliation of your research project.\")}\n                              />\n                            </span>\n                            }\n\n                            {inputField.affs.map((_, aidx) => (\n                              <React.Fragment\n                                key={`${inputField}~${index}~${aidx}`}\n                              >\n                                <div className=\"form-group col-sm-11 ml-2\">\n                                  <label\n                                    className=\"offset-sm-1\"\n                                    htmlFor=\"lbl-affiliation\"\n                                  >\n                                    {gettext('Affiliation') +\n                                    (inputField.affs.length > 1\n                                      ? ' #' + (aidx + 1)\n                                      : \"\")}\n                                    :\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control  offset-sm-1 col-sm-11\"\n                                    value={inputField.affs[aidx]}\n                                    onChange={(e) =>\n                                      this.handleAuthorAffInputChange(\n                                        index,\n                                        aidx,\n                                        e\n                                      )\n                                    }\n                                  />\n                                </div>\n                                <div className=\"form-group\">\n                                  {inputField.affs.length > 1 && (\n                                    <button\n                                      className=\"affiliation-control btn btn-link\"\n                                      type=\"button\"\n                                      onClick={() =>\n                                        this.handleAuthorAffRemoveFields(\n                                          index,\n                                          aidx\n                                        )\n                                      }\n                                    >\n                                      -\n                                    </button>\n                                  )}\n                                  <button\n                                    className=\"affiliation-control btn btn-link\"\n                                    type=\"button\"\n                                    onClick={() =>\n                                      this.handleAuthorAffAddFields(index, aidx)\n                                    }\n                                  >\n                                    +\n                                  </button>\n                                </div>\n                              </React.Fragment>\n                            ))}\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Publisher*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-publisher\"\n                            sm={1}\n                            htmlFor=\"publisher\"\n                          >\n                            {gettext('Publisher')}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"publisher\"\n                                type=\"textarea\"\n                                style={{height: \"4em\"}}\n                                placeholder={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.publisher}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"publisher\");\n                                }}\n                                {...this.validationProps(\"publisher\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"publisher\"\n                                helpText={gettext(\"Please enter the name of entity that holds, archives, publishes prints, distributes, releases, issues, or produces the resource\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n                      </FormGroup>\n\n                      {/*Description*/}\n                      <FormGroup row className=\"md-item\">\n                        <Col sm={12}>\n                          <Label\n                            id=\"lbl-description\"\n                            sm={1}\n                            htmlFor=\"description\"\n                          >\n                            {gettext(\"Description\")}:\n                          </Label>\n                          <Row>\n                            <Col sm={11}>\n                              <Input\n                                id=\"description\"\n                                type=\"textarea\"\n                                style={{height: \"6em\"}}\n                                placeholder={gettext(\"Please enter the description of your research project\") + \"...\"}\n                                className=\"form-control\"\n                                value={this.state.description}\n                                onChange={(e) => {\n                                  this.handleInputChange(e, \"description\");\n                                }}\n                                {...this.validationProps(\"description\")}\n                              />\n                            </Col>\n                            <Col sm={1}>\n                              <InfoArea\n                                id=\"description\"\n                                helpText={gettext(\"Please enter the description of your research project\") + \".\"}\n                              />\n                            </Col>\n                          </Row>\n                        </Col>\n\n                      </FormGroup>\n\n                      {/*Year*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-year\"\n                          sm={1}\n                          className=\"pt-0\"\n                          for=\"lbl-year\"\n                        >\n                          {gettext(\"Year\")}:\n                        </Label>\n                        <Col sm={4}>\n                          <Input\n                            className=\"form-control\"\n                            placeholder={gettext(\"Year of project start...\")}\n                            value={this.state.year}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"year\");\n                            }}\n                            {...this.validationProps(\"year\")}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"year\"\n                          helpText={gettext(\"Please enter year of project start.\")}\n                        />\n                      </FormGroup>\n\n                      {/*Institute*/}\n                      <FormGroup row className=\"md-item\">\n                        <Label\n                          id=\"lbl-institute\"\n                          className=\"pt-3\"\n                          sm={1}\n                          for=\"institute\"\n                        >\n                          {gettext('Institute')}:\n                        </Label>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label>{gettext('Institute name')}:</Label>\n                          <AsyncCreatableSelect\n                            id=\"institute\"\n                            className={this.state.validMd.institute ? \"is-valid\" : \"is-invalid\"}\n                            isClearable\n                            cacheOptions\n                            value={{\n                              value: this.state.institute,\n                              label: this.state.institute,\n                            }}\n                            onChange={this.handleInstituteChange}\n                            loadOptions={this.promiseOptions}\n                            {...this.validationProps(\"institute\")}\n                          />\n                        </Col>\n                        <Col sm={5} className=\"form-group md-item\">\n                          <Label for=\"department\">\n                            {gettext('Department')}:\n                          </Label>\n                          <Input\n                            value={this.state.department}\n                            onChange={(e) =>\n                              this.handleInputChange(e, \"department\")\n                            }\n                            {...this.validationProps(\"department\")}\n                          />\n                        </Col>\n                        <span className=\"info-area-names\">\n                          <InfoArea\n                            id=\"institute\"\n                            helpText={gettext(\"Please enter the related Max Planck Institute for this research project.\")}\n                          />\n                        </span>\n                        {this.state.directors.map((inputField, index) => (\n                          <React.Fragment key={`${inputField}~${index}`}>\n                            <Label\n                              id=\"lbl-directors\"\n                              sm={2}\n                              className=\"form-group offset-sm-1 pt-3\"\n                              for=\"directors\"\n                            >\n                              {gettext('Director or PI') +\n                              (this.state.directors.length > 1\n                                ? ' #' + (index + 1)\n                                : \"\")}\n                              :\n                            </Label>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label form=\"firstName\">\n                                {gettext('First Name')}:\n                              </Label>\n                              <Input\n                                name=\"firstName\"\n                                value={inputField.firstName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 0)}\n\n                              />\n                            </FormGroup>\n                            <FormGroup className=\"col-sm-4 md-item\">\n                              <Label for=\"lastName\">\n                                {gettext('Last Name')}:\n                              </Label>\n                              <Input\n                                name=\"lastName\"\n                                value={inputField.lastName}\n                                onChange={(e) =>\n                                  this.handleDirectorInputChange(index, e)\n                                }\n                                {...this.validationInDirectors(index, 1)}\n                              />\n                            </FormGroup>\n                            <FormGroup>\n                              {this.state.directors.length > 1 && (\n                                <button\n                                  className=\"director-control btn btn-link\"\n                                  type=\"button\"\n                                  onClick={() =>\n                                    this.handleDirectorRemoveFields(index)\n                                  }\n                                >\n                                  -\n                                </button>\n                              )}\n                              <button\n                                className=\"director-control btn btn-link\"\n                                type=\"button\"\n                                onClick={() => this.handleDirectorAddFields(index)}\n                              >\n                                +\n                              </button>\n                            </FormGroup>\n                          </React.Fragment>\n                        ))}\n                      </FormGroup>\n\n                      {/*Resource Type*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-resource-type\"\n                          sm={2}\n                          className=\"pt-0\"\n                          for=\"resource-type\"\n                        >\n                          {gettext('Resource Type')}:\n                        </Label>\n                        <Col sm={3}>\n                          <Select\n                            id=\"resource-type\"\n                            value={{\n                              value: this.state.resourceType,\n                              label: gettext(this.state.resourceType)\n                            }}\n                            options={this.resourceOptions}\n                            onChange={this.onResourceSelectChange}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"resource-type\"\n                          helpText={gettext(\"Please enter the resource type of the entity. Allowed values for this field: Library (default), Project.\")}\n                        />\n                      </Row>\n\n                      {/*License*/}\n                      <Row className=\"form-group md-item\">\n                        <Label\n                          id=\"lbl-license\"\n                          className=\"pt-0\"\n                          sm={1}\n                          for=\"license\"\n                        >\n                          {gettext(\"License\")}:\n                        </Label>\n                        <Col sm={7}>\n                          <Input\n                            id=\"license\"\n                            placeholder={gettext(\"Please enter the license\") + \"...\"}\n                            className=\"form-control\"\n                            value={this.state.license}\n                            onChange={(e) => {\n                              this.handleInputChange(e, \"license\");\n                            }}\n                          />\n                        </Col>\n                        <InfoArea\n                          id=\"license\" helpText={gettext(\"Please enter the license\") + \".\"}\n                        />\n                      </Row>\n                      {/*<br />*/}\n                      {/*<pre>{JSON.stringify(this.state, null, 2)}</pre>*/}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              {this.props.onButton1 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-1 col-sm-3\"\n                disabled={this.state.isButton1Disabled}\n                onClick={(e) => this.onButton1(e)}>\n                {this.props.button1Label}\n              </button>\n              }\n              {this.props.onButton2 &&\n              <button type=\"submit\"\n                className=\"btn btn-outline-primary offset-sm-9 col-sm-3\"\n                disabled={this.state.isButton2Disabled}\n                onClick={(e) => this.onButton2(e)}>\n                {this.props.button2Label}\n              </button>\n              }\n            </ModalFooter>\n          </form>\n        </Modal>\n      </Fragment>\n    );\n  }\n}\n\nKeeperArchiveMetadataForm.propTypes = keeperArchiveMetadataFormPropTypes;\n\nexport default KeeperArchiveMetadataForm;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalBody, ModalFooter, ModalHeader} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\nimport KeeperArchiveMetadataForm from '../keeper-archive-metadata-form';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass ArchiveLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onUpdateArchiveMetadata = (defaultMd, state) => {\n        let newState = {};\n        Object.keys(defaultMd).map(k => {\n            newState[k] = state[k];\n        });\n        //return promise, not run!\n        return keeperAPI\n            .updateArchiveMetadata(this.props.repoID, newState)\n            .then((res) => {\n                newState = res.data;\n\n                newState.validMd = state.validMd;\n\n                //if publisher is empty, apply defaultPublisher\n                if (!(\"publisher\" in newState && newState.publisher && newState.publisher.trim())) {\n                    newState.publisher = defaultMd.publisher;\n                    newState.validMd.publisher = true;\n                }\n\n                return newState;\n            })\n            .catch((error) => {\n                let errMessage = Utils.getErrorMsg(error);\n                toaster.danger(errMessage);\n            });\n    }\n\n    onArchiveClick = (a, b) => {\n        this.props.hideDialog();\n        //return promise, not run!\n        return keeperAPI.archiveLibrary(this.props.repoID)\n            .then((resp) => {\n                return resp.data.msg;\n        });\n    }\n\n    render() {\n        const archive_info = gettext(\"By archiving this library, the current state of everything contained within \" +\n            \"it will be archived on a dedicated archiving system. For more information, please follow the link: \" +\n            \"{archive_info_link} This library can be archived {quota} more times. Please, fill out the following archive metadata form.\").replace(\"{quota}\",\n            this.props.quota);\n        const split = archive_info.split('{archive_info_link}')\n        return (\n                <KeeperArchiveMetadataForm\n                    hideDialog={this.props.hideDialog}\n                    repoID={this.props.repoID}\n                    header={\n                        <Fragment>\n                            <span>{gettext('Archive {library_name}').replace('{library_name}', '')}</span>\n                            <span style={{color: '#57a5b8'}}>{this.props.repoName}</span>\n                            <span> {gettext('library')}</span>\n                        </Fragment>\n                    }\n                    body={\n                        <Fragment>\n                            {split[0]}\n                            <a href=\"https://mpdl.zendesk.com/hc/en-us/articles/360011432700-Archiving\"\n                                target=\"_blank\">{gettext(\"Information on Archiving\")}</a>.\n                            {split[1]}\n                        </Fragment>\n                    }\n                    onButton1={this.onUpdateArchiveMetadata}\n                    button1Label={gettext(\"Save metadata\")}\n                    onButton2={this.onArchiveClick}\n                    button2Label={gettext(\"Archive\")}\n                />\n        )\n    }\n}\n\nArchiveLibraryDialog.propTypes = propTypes;\n\nexport default ArchiveLibraryDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal, ModalHeader, ModalBody, ModalFooter} from 'reactstrap';\nimport {gettext} from '../../utils/constants';\nimport {keeperAPI} from '../../utils/seafile-api';\nimport {Utils} from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n    repoID: PropTypes.string.isRequired,\n    repoName: PropTypes.string.isRequired,\n    toggleDialog: PropTypes.func.isRequired,\n    hideDialog: PropTypes.func.isRequired\n};\n\nclass CertifyLibraryDialog extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\n    formSubmit = () => {\n        this.props.hideDialog();\n        const {repoID} = this.props;\n        keeperAPI.canCertify(repoID, 'dir', '/').then(() => {\n            this.certifyLibrary()\n        }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        })\n    }\n\n    certifyLibrary = () => {\n        const {repoID, repoName} = this.props;\n        toaster.success(gettext('Your files with the library {repoName} are currently being certified. We will inform you once the task has successfully finished. This may take a while.').replace('{repoName}', repoName), {duration: 3});\n        keeperAPI.certifyOnBloxberg(repoID, '/', 'dir', repoName).then(() => {\n            }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n        });\n    }\n\n    render() {\n        return (\n            <Modal isOpen={true} toggle={this.props.hideDialog}>\n                <ModalHeader toggle={this.props.hideDialog}>\n                    <span>{gettext('Certify')}</span> <span style={{color: '#57a5b8'}}>{this.props.repoName}</span> </ModalHeader>\n                <ModalBody>\n                    <span>{gettext('Certify all files within the library via the bloxberg blockchain. A new entry under “Library Details” on the left sidebar will be created, where you can access the certified version and the file and a proof of certification. Certifying may take some time, depending on the size of the library. Adding metadata is optional, but recommended.')}</span>\n                </ModalBody>\n                <ModalFooter>\n                    <button className=\"btn btn-primary\" onClick={this.formSubmit}>{gettext('Certify')}</button>\n                </ModalFooter>\n            </Modal>\n        )\n    }\n}\n\nCertifyLibraryDialog.propTypes = propTypes;\n\nexport default CertifyLibraryDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\n// KEEPER\nimport { keeperAPI, seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../../components/dialog/repo-share-upload-links-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n// KEEPER\nimport AssignDoiDialog from '../../components/dialog/assign-doi-dialog';\nimport ArchiveLibraryDialog from '../../components/dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../../components/dialog/certify-library-dialog';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\n// KEEPER\nvar handleCanArchiveResponse = (obj, resp) => {\n  const d = resp.data;\n  //alert(JSON.stringify(d));\n  let msg, error;\n  const default_error =\n    'Can not archive library due to unknown reason, please contact support.';\n  if (d.status === 'success') obj.setState({ quota: d.quota });\n  else if (d.status === 'in_processing') msg = d.msg;\n  else if (d.status === 'quota_expired')\n    error = gettext(\n      'Cannot archive, since the maximum number of archives for this library has been reached. Please contact Keeper support.'\n    );\n  else if (d.status === 'snapshot_archived')\n    error = gettext(\n      'Cannot archive, since the library snapshot has already been archived.'\n    );\n  else if (d.status === 'is_too_big')\n    error = gettext('Cannot archive, since the library is too large.');\n  else if (d.status === 'metadata_error') {\n    //pass, error will be handled via archive metadata form\n  } else if (d.status === 'system_error') error = d.msg || default_error;\n  else error = default_error;\n  if (error) toaster.danger(error);\n  else if (msg) toaster.success(msg);\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n      isAssignDoiDialogShow: false,\n      isArchiveLibraryDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'Assign DOI to current state':\n        this.onAssignDoiToggle();\n        break;\n      case 'Archive Library':\n        this.onArchiveLibraryToggle();\n        break;\n      case 'Certify Library':\n        this.onCertifyLibraryToggle();\n        break;\n      case 'Edit Metadata':\n        this.onEditMetadataToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  // KEEPER \n  onAssignDoiToggle = () => {\n    this.setState({ isAssignDoiDialogShow: !this.state.isAssignDoiDialogShow });\n  };\n\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isArchiveLibraryDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repo.repo_id)\n      .then((resp) => {\n        const d = resp.data;\n\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success')\n          this.setState({ isEditMetadataDialogShow: true });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: 'system_error', msg: errorMsg },\n        });\n      });\n  };\n\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n        {/* KEEPER */}\n        {this.state.isAssignDoiDialogShow && (\n          <ModalPortal>\n            <AssignDoiDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onAssignDoiToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              quota={this.state.quota}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n// KEEPER\nexport { handleCanArchiveResponse };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      // no default\n    }\n  }\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n            }\n          })}\n        </Fragment>\n      );\n    }\n  }\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  }\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} aria-label={gettext('Detail')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { gettext } from \"../../utils/constants\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport { Utils } from \"../../utils/utils\";\nimport toaster from \"../toast\";\nimport KeeperArchiveMetadataForm from \"../keeper-archive-metadata-form\";\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  hideDialog: PropTypes.func.isRequired,\n};\n\nclass KeeperEditMetadataDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onUpdateArchiveMetadata = (defaultMd, state) => {\n    this.props.hideDialog();\n    let newState = {};\n    Object.keys(defaultMd).map((k) => {\n      newState[k] = state[k];\n    });\n    //return promise, not run!\n    return keeperAPI\n      .updateArchiveMetadata(this.props.repoID, newState)\n      .then((res) => {\n        newState = res.data;\n        newState.validMd = state.validMd;\n        //if publisher is empty, apply defaultPublisher\n        if (\n          !(\n            \"publisher\" in newState &&\n            newState.publisher &&\n            newState.publisher.trim()\n          )\n        ) {\n          newState.publisher = defaultMd.publisher;\n          newState.validMd.publisher = true;\n        }\n        return newState;\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  render() {\n    const title = gettext(\"Edit Metadata for {library_name} library\") \n    const split = title.split(\"{library_name}\")\n\n    return (\n      <KeeperArchiveMetadataForm\n        hideDialog={this.props.hideDialog}\n        repoID={this.props.repoID}\n        header={\n          <Fragment>\n            {split[0]}\n            <span style={{ color: \"#57a5b8\" }}> {this.props.repoName}</span>\n            {split.length>1 && split[1]}\n          </Fragment>\n        }\n        onButton1={this.onUpdateArchiveMetadata}\n        button1Label={gettext(\"Save metadata\")}\n      />\n    );\n  }\n}\n\nKeeperEditMetadataDialog.propTypes = propTypes;\n\nexport default KeeperEditMetadataDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n// KEEPER\nimport ArchiveLibraryDialog from '../dialog/archive-library-dialog';\nimport CertifyLibraryDialog from '../dialog/certify-library-dialog';\nimport KeeperEditMetadataDialog from '../dialog/keeper-edit-metadata-dialog';\nimport { keeperAPI } from '../../utils/seafile-api';\nimport { handleCanArchiveResponse } from '../../pages/my-libs/mylib-repo-list-item';\n\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // KEEPER\n  isRepoOwner: PropTypes.bool.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false,\n      // KEEPER\n      isArchiveLibraryDialogShow: false,\n      isEditMetadataDialogShow: false,\n      isCertifyLibraryDialogShow: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '',\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  // KEEPER\n  onArchiveLibraryHide = () => {\n    this.setState({ isArchiveLibraryDialogShow: false });\n  };\n\n  onArchiveLibraryToggle = () => {\n    keeperAPI\n      .canArchive(this.props.repoID)\n      .then((resp) => {\n        const d = resp.data;\n        handleCanArchiveResponse(this, resp);\n        if (d.status === 'success' || d.status === 'metadata_error')\n          this.setState({\n            isArchiveLibraryDialogShow: true,\n            quota: d.quota,\n          });\n      })\n      .catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        handleCanArchiveResponse(this, {\n          data: { status: \"system_error\", msg: errorMsg },\n        });\n      });\n  };\n\n  onEditMetadataHide = () => {\n    this.setState({ isEditMetadataDialogShow: false });\n  };\n\n  onEditMetadataToggle = () => {\n    this.setState({ isEditMetadataDialogShow: true });\n  };\n\n  onCertifyLibraryHide = () => {\n    this.setState({ isCertifyLibraryDialogShow: false });\n  };\n\n  onCertifyLibraryToggle = () => {\n    this.setState({ isCertifyLibraryDialogShow: true });\n  };\n\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    // KEEPER\n    let isArchiveBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isEditMetadataBtnShow =\n      !this.props.repoEncrypted && this.props.isRepoOwner;\n    let isCertifyBtnShow = !this.props.repoEncrypted && this.props.isRepoOwner;\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n          {/* KEEPER */}\n          {isArchiveBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Archive')}\n              onClick={this.onArchiveLibraryToggle}\n            >\n              {gettext('Archive')}\n            </button>\n          )}\n          {isCertifyBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Certify')}\n              onClick={this.onCertifyLibraryToggle}\n            >\n              {gettext('Certify')}\n            </button>\n          )}\n          {isEditMetadataBtnShow && (\n            <button\n              className=\"btn btn-secondary operation-item\"\n              title={gettext('Metadata')}\n              onClick={this.onEditMetadataToggle}\n            >\n              {gettext('Metadata')}\n            </button>\n          )}  \n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n        {/* KEEPER */}\n        {this.state.isArchiveLibraryDialogShow && (\n          <ModalPortal>\n            <ArchiveLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              quota={this.state.quota}\n              hideDialog={this.onArchiveLibraryHide}\n              toggleDialog={this.onArchiveLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditMetadataDialogShow && (\n          <ModalPortal>\n            <KeeperEditMetadataDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onEditMetadataHide}\n              toggleDialog={this.onEditMetadataToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCertifyLibraryDialogShow && (\n          <ModalPortal>\n            <CertifyLibraryDialog\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              hideDialog={this.onCertifyLibraryHide}\n              toggleDialog={this.onCertifyLibraryToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isRepoOwner={this.props.isRepoOwner}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  }\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer w-4 h-4 rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  }\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n  }\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  }\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagColor from './tag-color';\nimport TagName from './tag-name';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  }\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  }\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (userPerm === 'rw') {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" href=\"#\" role=\"button\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true} autoFocus={false}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    const { commentsList } = this.state;\n    return (\n      <div className=\"seafile-comment detail-comments h-100\">\n        <div className=\"flex-fill o-auto\">\n          {commentsList.length > 0 ? (\n            <ul className=\"seafile-comment-list\">\n              {commentsList.map((item, index = 0, arr) => {\n                let oldTime = (new Date(item.created_at)).getTime();\n                let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n                return (\n                  <CommentItem\n                    key={item.id}\n                    item={item}\n                    time={time}\n                    deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment}\n                    editComment={this.editComment}\n                  />\n                );\n              })\n              }\n            </ul>) :\n            <p className=\"text-center my-4\">{gettext('No comment yet.')}</p>\n          }\n        </div>\n        <div className=\"seafile-comment-footer flex-shrink-0\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment...')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <div className=\"comment-submit-container\">\n            <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={dirent ? dirent.file_tags : fileTags}\n                onFileTagChanged={this.props.onFileTagChanged}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab} className=\"flex-fill o-auto\">\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport MD5 from \"MD5\";\nimport moment from \"moment\";\nimport { UncontrolledTooltip } from \"reactstrap\";\nimport { Dropdown, DropdownToggle, DropdownItem } from \"reactstrap\";\nimport {\n  gettext,\n  siteRoot,\n  mediaUrl,\n  username,\n  useGoFileserver,\n  fileServerRoot,\n} from \"../../utils/constants\";\nimport { Utils } from \"../../utils/utils\";\nimport { seafileAPI } from \"../../utils/seafile-api\";\nimport URLDecorator from \"../../utils/url-decorator\";\nimport ItemDropdownMenu from \"../dropdown-menu/item-dropdown-menu\";\nimport Rename from \"../rename\";\nimport ModalPortal from \"../modal-portal\";\nimport MoveDirentDialog from \"../dialog/move-dirent-dialog\";\nimport CopyDirentDialog from \"../dialog/copy-dirent-dialog\";\nimport ShareDialog from \"../dialog/share-dialog\";\nimport ZipDownloadDialog from \"../dialog/zip-download-dialog\";\nimport EditFileTagDialog from \"../dialog/edit-filetag-dialog\";\nimport LibSubFolderPermissionDialog from \"../dialog/lib-sub-folder-permission-dialog\";\n\nimport \"../../css/dirent-list-item.css\";\nimport toaster from \"../toast\";\n// KEEPER\nimport ReactTooltip from \"react-tooltip\";\nimport { keeperAPI } from \"../../utils/seafile-api\";\nimport bergImage from \"../../assets/berg_icon.png\";\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(\n      dirent.permission\n    );\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === \"rw\";\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false, // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.isItemFreezed !== this.props.isItemFreezed &&\n      !nextProps.isItemFreezed\n    ) {\n      this.setState(\n        {\n          highlight: false,\n          isOperationShow: false,\n        },\n        () => {\n          if (\n            nextProps.activeDirent &&\n            nextProps.activeDirent.name === nextProps.dirent.name\n          ) {\n            this.setState({ isOperationShow: true });\n          }\n        }\n      );\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen,\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({ isDragTipShow: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({ isDragTipShow: false });\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI\n        .unstarItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", false);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    } else {\n      seafileAPI\n        .starItem(repoID, filePath)\n        .then(() => {\n          this.props.updateDirent(this.props.dirent, \"starred\", true);\n        })\n        .catch((error) => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == \"TD\") {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n  // KEEPER\n  onItemCertify = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    keeperAPI\n      .canCertify(repoID, dirent.type, filePath)\n      .then(() => {\n        this.certifyFile();\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  certifyFile = () => {\n    const { dirent, repoID } = this.props;\n    let filePath = this.getDirentPath(dirent);\n    toaster.success(gettext(\"Certify the file through bloxberg...\"), {\n      duration: 3,\n    });\n    keeperAPI\n      .certifyOnBloxberg(repoID, filePath, dirent.type, dirent.name)\n      .then(() => {\n        toaster.success(gettext(\"Transaction succeeded\"));\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  closeSharedDialog = () => {\n    this.setState({ isShareDialogShow: !this.state.isShareDialogShow });\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute(\"data-op\");\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch (operation) {\n      case \"Download\":\n        this.onItemDownload(event);\n        break;\n      case \"Share\":\n        this.onItemShare(event);\n        break;\n      case \"Delete\":\n        this.onItemDelete(event);\n        break;\n      case \"Rename\":\n        this.onItemRenameToggle();\n        break;\n      case \"Move\":\n        this.onItemMoveToggle();\n        break;\n      case \"Copy\":\n        this.onItemCopyToggle();\n        break;\n      case \"Tags\":\n        this.onEditFileTagToggle();\n        break;\n      case \"Permission\":\n        this.onPermissionItem();\n        break;\n      case \"Unlock\":\n        this.onUnlockItem();\n        break;\n      case \"Lock\":\n        this.onLockItem();\n        break;\n      case \"Comment\":\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail(\"comments\");\n        break;\n      case \"History\":\n        this.onHistory();\n        break;\n      case \"Access Log\":\n        this.onAccessLog();\n        break;\n      case \"Open via Client\":\n        this.onOpenViaClient();\n        break;\n      case \"Convert with ONLYOFFICE\":\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow,\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false,\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag, // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({ isMoveDialogShow: !this.state.isMoveDialogShow });\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({ isCopyDialogShow: !this.state.isCopyDialogShow });\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen,\n    });\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .lockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", true);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", true);\n        let lockName = username.split(\"@\");\n        this.props.updateDirent(\n          this.props.dirent,\n          \"lock_owner_name\",\n          lockName[0]\n        );\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI\n      .unlockfile(repoID, filePath)\n      .then(() => {\n        this.props.updateDirent(this.props.dirent, \"is_locked\", false);\n        this.props.updateDirent(this.props.dirent, \"locked_by_me\", false);\n        this.props.updateDirent(this.props.dirent, \"lock_owner_name\", \"\");\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"file_revisions\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path =\n      siteRoot +\n      \"repo/file-access/\" +\n      this.props.repoID +\n      \"/?p=\" +\n      encodeURIComponent(filePath);\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({\n      type: \"open_via_client\",\n      repoID: repoID,\n      filePath: filePath,\n    });\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n\n    seafileAPI\n      .onlyofficeConvert(repoID, filePath)\n      .then((res) => {\n        this.props.loadDirentList(res.data.parent_dir);\n      })\n      .catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === \"dir\") {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true,\n        });\n      } else {\n        seafileAPI\n          .zipDownload(repoID, this.props.path, this.props.dirent.name)\n          .then((res) => {\n            const zipToken = res.data[\"zip_token\"];\n            location.href = `${fileServerRoot}zip/${zipToken}`;\n          })\n          .catch((error) => {\n            let errorMsg = Utils.getErrorMsg(error);\n            this.setState({\n              isLoading: false,\n              errorMsg: errorMsg,\n            });\n          });\n      }\n    } else {\n      let url = URLDecorator.getUrl({\n        type: \"download_file_url\",\n        repoID: repoID,\n        filePath: direntPath,\n      });\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false,\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === \"/\" ? path + dirent.name : path + \"/\" + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({ isShowTagTooltip: !this.state.isShowTagTooltip });\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = \"move\";\n    let { selectedDirentList } = this.props;\n    if (\n      selectedDirentList.length > 0 &&\n      selectedDirentList.includes(this.props.dirent)\n    ) {\n      // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList = selectedDirentList.map((item) => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {\n          nodeDirent: item,\n          nodeParentPath: this.props.path,\n          nodeRootPath: nodeRootPath,\n        };\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData(\"applicaiton/drag-item-info\", selectedList);\n      return;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {\n      nodeDirent: this.props.dirent,\n      nodeParentPath: this.props.path,\n      nodeRootPath: nodeRootPath,\n    };\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData(\"applicaiton/drag-item-info\", dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n      this.setState({ isDropTipshow: true });\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === \"copy\") {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = \"move\";\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    }\n    this.setState({ isDropTipshow: false });\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({ isDropTipshow: false });\n    if (e.dataTransfer.files.length) {\n      // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === \"dir\") {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData(\n      \"applicaiton/drag-item-info\"\n    );\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) {\n      //move items\n      let direntPaths = dragStartItemData.map((draggedItem) => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(\n        this.props.path,\n        this.props.dirent.name\n      );\n\n      if (\n        direntPaths.some((direntPath) => {\n          return direntPath === selectedPath;\n        })\n      ) {\n        //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === \"dir\" && nodeDirent.type === \"dir\") {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(\n      this.props.currentRepoInfo,\n      nodeDirent,\n      selectedPath,\n      nodeParentPath\n    );\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(\n      currentRepoInfo,\n      dirent.permission,\n      dirent\n    );\n                // {this.props.isRepoOwner &&\n                //   dirent.permission === \"rw\" &&\n    //   dirent.type === \"file\" && (\n    //   isRepoOwner\n    console.log(this.props.isRepoOwner);    \n    console.log(dirent.permission);    \n    console.log(dirent.type);    \n \n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ? (\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        ) : (\n          <Fragment>\n            {this.state.isOperationShow && (\n              <div className=\"operations\">\n                {(dirent.permission === \"rw\" ||\n                  dirent.permission === \"r\" ||\n                  (isCustomPermission && canDownload)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-download\"\n                    title={gettext(\"Download\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Download\")}\n                    onClick={this.onItemDownload}\n                  ></a>\n                )}\n                {showShareBtn && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-share\"\n                    title={gettext(\"Share\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Share\")}\n                    onClick={this.onItemShare}\n                  ></a>\n                )}\n                {(dirent.permission === \"rw\" ||\n                  (isCustomPermission && canDelete)) && (\n                  <a\n                    href=\"#\"\n                    className=\"op-icon sf2-icon-delete\"\n                    title={gettext(\"Delete\")}\n                    role=\"button\"\n                    aria-label={gettext(\"Delete\")}\n                    onClick={this.onItemDelete}\n                  ></a>\n                )}\n                {/* KEEPER bxb button */}                                                                                                         \n                {this.props.isRepoOwner &&\n                  dirent.permission === \"rw\" &&\n                  dirent.type === \"file\" && (\n                    <a className=\"op-icon\" data-tip data-for=\"bloxberg\">\n                      <img\n                        className=\"small-icon\"\n                        src={bergImage}\n                        onClick={this.onItemCertify}\n                      />\n                      <ReactTooltip\n                        className=\"hover-keep\"\n                        id=\"bloxberg\"\n                        delayHide={1000}\n                        effect=\"solid\"\n                      >\n                        <span className=\"tooltip-bold\">\n                          {gettext(\n                            \"Certify your file via the bloxberg blockchain.\"\n                          )}\n                        </span>\n                      </ReactTooltip>\n                    </a>\n                )}\n                                    \n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={\"sf2-icon-caret-down\"}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            )}\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = \"\";\n    if (this.props.currentRepoInfo) {\n      dirHref =\n        siteRoot +\n        \"library/\" +\n        this.props.repoID +\n        \"/\" +\n        this.props.currentRepoInfo.repo_name +\n        Utils.encodePath(direntPath);\n    }\n    let fileHref =\n      siteRoot +\n      \"lib/\" +\n      this.props.repoID +\n      \"/file\" +\n      Utils.encodePath(direntPath);\n\n    let toolTipID = \"\";\n    let tagTitle = \"\";\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map((item) => item.name).join(\" \");\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? \"tr-highlight \" : \"\";\n    trClass += this.state.isDropTipshow ? \"tr-drop-effect\" : \"\";\n    trClass +=\n      activeDirent && activeDirent.name === dirent.name ? \"tr-active\" : \"\";\n    trClass += dirent.isSelected ? \"tr-active\" : \"\";\n\n    let lockedInfo = gettext(\"locked by {name}\").replace(\n      \"{name}\",\n      dirent.lock_owner_name\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td\n          className={`pl10 ${this.state.isDragTipShow ? \"tr-drag-effect\" : \"\"}`}\n        >\n          <input\n            type=\"checkbox\"\n            className=\"vam\"\n            onChange={this.onItemSelected}\n            checked={dirent.isSelected}\n          />\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && (\n            <a\n              href=\"#\"\n              role=\"button\"\n              aria-label={dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n              onClick={this.onItemStarred}\n            >\n              <i\n                className={`fa-star ${\n                  dirent.starred ? \"fas\" : \"far star-empty\"\n                }`}\n              ></i>\n            </a>\n          )}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                ref=\"drag_icon\"\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                onClick={this.onItemClick}\n                alt=\"\"\n              />\n            ) : (\n              <img ref=\"drag_icon\" src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n            <div\n              ref=\"empty_content\"\n              style={{ position: \"absolute\", width: \"1px\", height: \"1px\" }}\n            ></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\" onClick={this.onItemClick}>\n                  {dirent.name}\n                </a>\n              ) : (\n                <a\n                  href={dirent.type === \"dir\" ? dirHref : fileHref}\n                  onClick={this.onItemClick}\n                >\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {dirent.type !== \"dir\" &&\n            dirent.file_tags &&\n            dirent.file_tags.length > 0 && (\n              <Fragment>\n                <div\n                  id={`tag-list-title-${toolTipID}`}\n                  className=\"dirent-item tag-list tag-list-stacked\"\n                >\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span\n                        className=\"file-tag\"\n                        key={fileTag.id}\n                        style={{\n                          zIndex: length - index,\n                          backgroundColor: fileTag.color,\n                        }}\n                      ></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip\n                  target={`tag-list-title-${toolTipID}`}\n                  placement=\"bottom\"\n                >\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td\n          className=\"last-update\"\n          title={moment.unix(dirent.mtime).format(\"llll\")}\n        >\n          {dirent.mtime_relative}\n        </td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {this.canPreview && dirent.encoded_thumbnail_src ? (\n              <img\n                src={`${siteRoot}${dirent.encoded_thumbnail_src}`}\n                className=\"thumbnail cursor-pointer\"\n                alt=\"\"\n              />\n            ) : (\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            )}\n            {dirent.is_locked && (\n              <img\n                className=\"locked\"\n                src={mediaUrl + \"img/file-locked-32.png\"}\n                alt={gettext(\"locked\")}\n                title={lockedInfo}\n              />\n            )}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && (\n            <Rename\n              hasSuffix={dirent.type !== \"dir\"}\n              name={dirent.name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {!dirent.isDir() && !this.canPreview ? (\n                <a className=\"sf-link\">{dirent.name}</a>\n              ) : (\n                <a href={dirent.type === \"dir\" ? dirHref : fileHref}>\n                  {dirent.name}\n                </a>\n              )}\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext(\"More Operations\")}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div\n              className={this.state.isOpMenuOpen ? \"\" : \"d-none\"}\n              onClick={this.toggleOpMenu}\n            >\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined && (\n                  <DropdownItem\n                    className=\"mobile-menu-item\"\n                    onClick={this.onItemStarred}\n                  >\n                    {dirent.starred ? gettext(\"Unstar\") : gettext(\"Star\")}\n                  </DropdownItem>\n                )}\n                {this.props\n                  .getDirentItemMenuList(dirent, true)\n                  .map((item, index) => {\n                    if (item != \"Divider\" && item.key != \"Open via Client\") {\n                      return (\n                        <DropdownItem\n                          className=\"mobile-menu-item\"\n                          key={index}\n                          data-op={item.key}\n                          onClick={this.onMobileMenuItemClick}\n                        >\n                          {item.value}\n                        </DropdownItem>\n                      );\n                    } else {\n                      return null;\n                    }\n                  })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isEditFileTagShow && (\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        )}\n        {this.state.isZipDialogOpen && (\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAFECAMAAAFqkvmEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIyQzlCRTQzMzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIyQzlCRTQ0MzlDODExRTlBRDg0QjcyMTBEQTEzMjkxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjJDOUJFNDEzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJDOUJFNDIzOUM4MTFFOUFEODRCNzIxMERBMTMyOTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6zgL64AAABgFBMVEWt0daNvsTL4ua01dphpa1xrrXd7O7F3+NSm6bP5eiJvMKlzdG52N0xhZzG4OShytCdyM5EkqN2sbh+tby82t1VnaeFusGYxcqaxszW6OuDub9qqrGoz9RdoqnS5uk4ip7h7vDO5OeTwsjZ6uzZ6u3V6OrN4+c1iJ6RwMdZoKmy1Nl4srlyq7vU5+qSwceBt76Mu8jA3OBLl6Rkp6/Y6exYnK9ko7Tb6+2DtsN9s8HK4uY9jZ9Mlamdx9CRv8q21tuHucWx0tlAj6N5sb/K4OXc6+6VwsyIu8LX6Ou319trqLiu0dfD3uK+29+KvMar0NWmzNTC3eHC3eJNmKXA2uBfoLJoprZdoa7H3uSYw82jytKbxs/S5Oily9Nbn7CYxM1uq7fJ4eXK4uXT5+rI4OTR5el8tLt7tLuVw8l0sLbI4eTI4eWgyc9vrbRtrLNsq7Joqa9nqa+v09dfpKvf7e9RmKt2r73M4edgo658s7yjy9BnqLFrqbSfyNFXn6cAAAA2nrm/AAAAgHRSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ADgFS2cAABqTSURBVHjarNU/SwNBEIbxDYZ4KQYJylkIYiEeBuxuC4lNmpRaBCzsjGnsU4Y3Xz2Z9bzcTXb2jzjdwvx4ii3G7HLH/JOgKlcAmYKASZ4AAhHjTwBFjgBCEaMkdGK0BGBTxexXIFW0AMTPOiqWR8ERiosO4Mio/ooI9GZHUWH7gu4OYhwUfYAXJ2xAkBDlM4tVQAiwLQdOkCpk4rIcvLI4V4UA3wdx7QQpgnxiwWKtCAFunLhwovIKkVg24oPFyitEYtiINyfePUIkZq2Ys3jwCJF4bMXZJ4vpiRAJ6ogrFuMTAb3xI26FqEQiLhBvPPXERCaiAimNuiMK8ReKsEeBtMZ9K8RyoQpqhEVqY9QIpAtygjLExgnkiOoP13kvAKv1roMgDAVgWEzQQTEydHCxXoIOmkBcMDExxs3JODk4GfUBvI7w6nJABEqh5xj3fjlNm/Rv5U85J9ecHHNObjk55Sa55OSQM3LHHSzgP1fcxAEz0/D8nZc1HBa7lgKwTMF9QwWc7EPlP1yrSwn4GoBTAoSn0HsBGOHzvddCsEDX29bmAM7YeOu2NggBtt2TACwBtHDp1gG0Q2Bgys0icABwxIT7GoFGCJ7qbpsx2AJAZPseg1sVwEpV7XECNgD6ymgnoFkHUBWA+C1Igx2AiyrZOXDKAJ4rtgJ4iAmdFJgJRyQHTmmuJWD4BUy45CLAP2DqISe48lazYhClmnvoCbWSUsuBEQBDtqEi0KOX/S0ALfaykzAQBWA4BEWIHbVRMEZCUZHGKBFIyyXeEhaagJG4cCGsBFy4VMGdfXaLpdPbMHNOaWfbZL40aTPnH/woEKdQJzEL2UWKxiVUs7R24xG67qCOQ5C9zR69oPiO+8gF4jvuIxf8hyWJWggGAIlWYBUGAY3pQIGdMHTfpkZWFNiAeeZYj1NN7ZSsJCwDDKswpnNhrK4gLAf+J+2iJRQ6oQUeYMZ0yRYyjZCCAMg9PNqCM06hBD6gXuYSiTtbGPVDCCoXILtz4XhgC5MaWlD4wLkl7N/YwsYWUpD5wIct7LxSYYISBMC6I2wPqfCGENJ84NAtbA6oMAILWf5X9OkV+nkqlKsgocXd3+is+YWvHhXKOkDQ+YD8HRSSSSocKULhig+kz1iCJFEhQwQC/0c2p1q2sFejwjvhCgJgfhnGFp4doUAQV/ThhDH8gp4190OEigpMfO+qw9+hcjCDJL7BaDWwoLXFiW8Eb4cxwsmvKPGNYM7ihJLET3wjEORooal5BDCAEFIplwAHUMKUCggAJxQXAkEtpSNfz/SXRvfip916ur0fDvK9pFRjCybxJwCz9vfaRBDEATxWpWlwCqsN2Ki5FtIG5CppatpCMGlSBBFrxQehD2maJy2KT2kEodd/3Vx+zKWXu53Z3Rswr4H7MMndbvb7jfh5+r8CpI/rIA3kZeOA8G6uigJF2bhh+jg25QBfOM6YrydKCmgIxyXRglgXz2NE4pjFFT0vnveANFCsSedJmcdJS8dcXzqvyjiuSjigqEwBCJwSNxpQaTmSZN4WXXbPNW6LVzsxASqbMnneHDiqbLrFeakxw/SyMAZ2ZPLC6dc8DAFwAdJjjPCyMAHKMnlkuP9vTYGqNeBrf9ffVWfAmkzeqe625sCNJXCjP/43Edj1JfJUVdpFYGQF6MPIoFE4RWBF2QD6AbxS4fNXBPoWABHCHJQKD44RGHhZA/BsDLzJIdA2BogBribACQKrYAoQgfb3CfCjh8CqIUAMcD0DahEAZoA+ioSnM+B5H4F1I4AY4DECrQiALPNyBH71EfhpABA54e8F4CICgA/U9QMsAn9vERiwAf0A+RdpQDebvB/uAy97CKwwASJIPYgBXyKgwQJq+gG8OJA7RyBh58kZ7zOPloBcBIwYgB+YAq87CGwrGiD2mVcJwMMBAu9IQP8MB/UkoN1GYJuqQ8iQMxF4so7APgF4VN+SCGycIbAGLoXO+N1kYP8TAmWXPqfIAcAeCN+lgbJbX8QA0usiqllmAntOfRQHSPvHKbXTs4Edq74rH/CBbjKgOE0FC/jg0KfxgMMkQL/Te0bAW9+6r2MCrWWgyPqEuEBFmfWBXmAKdGIAsdPXjYEjsOwb2cCfe8DHgLFKmAHvwa7P5AOLdaYK2C8DAKz6UgMgqku9QGSCIdj0sSbAcF7Hcu8gYwA4ADgA07rXsE9uhn3y5eG3q9Hp8UmtdXHbO++0z1KArnzd+08A6u7+p2kgjAN4BzI23COcvCgydwM3G7BomYwNR1Yc0ZjIS0RAEA3hLWo0JuqGxoT+7Vpe9tZr1/a5a9f7bb/tk7bX+972bcX/ATykAiXsAurt1/PuEQDooxBmARizyyjshVYAV9MjqCEVQH1DFJRQCqD55/l8CAXQkvOAhE4AbUHVBwJfAZgWuUBDJQDGKl34vY2nAJhJWzRBEg0QTuAnAMuWgQyhEIDNVoFQguQDQNcpdLtAtQfoegm6W6B03pIm0M2CvIM9dXEEySeAOAJeQMDhThOzx12pqUELKDjeLIuZCbXM/IISrADAxX5fe3hWdwqZ+fGV7SAFrgDtBOWsYAiyai04gUuAQWic9vnl6KUge06CEoCsux5wXccie9VrwfEMDUbgBVDP/zRZbQhSmxCEAKjuaVzkf9hKNwtSPeC/AEq6x/E/PMNpulUQj4PfAiC65wFQTZsED8FfAQagw9kKQ+CRIAUBGBswCCZBD/gngBwGcG9sILKyyBAcgV8CiHn//qPwxBBEFosMwSH4I8ABhi8FkWKRITiR/RB0SpT2y9Pha8Hj5WWGoL8iXFBGAeRPDcHU+jpD0E8EC1RAXMM5+qhZ8DmiMgT9S6pIgYIBkNLtVsGdqfK8WXBrWxEnyKMA5Eu74O5BOWsW3FLyogQEAyi97TMLhvZfxs2Ck2UiRoAC0FgfS/BtaO+ZWfD1gIoQUAxAnv7OFgwO7q+aBYcS8BcABgDvJqwEf2+eb5oFhyPAW4AD3JiwESTfr5kFR7vAV4AD/PlhK9j4mDALehyutp12xGXUEXjaQSAlNYbAGcFhR5yiAJ0FPzc0hsARQRIP+OVEMPNaYwgmgY/Ae6Y3APedCXqfawyBA4KTEjrBxIFppwKtV2MIJvEVbiRAdy5IaAmGIC5jBRhAzHh/gHPBSGKNIYhXcAJMps8Z9xA3gpG1OYbgtIYRYCIxubiHuBLMza0yBKkF1bMAkyjJ5RTsTvCGKUgpHivcKEDlagrmIkgV814EKgZQqj/kjYvguEzcC85QeaY+g3ESzA5StwJUppcbMxgvwazmssKNyvTNMxg3QXbXXYUbBWi+fvgJxk9dVLgpNwBPwSvmQ58l/oDWj1wFLILEPVHqIgUPwImAK4C3INP5nTKcAdwFmc4dcRkVB8QLCp064pQvQICgINsJMJE4xjz9BAheVKwFGEDO4i1kAgTRmpUAkyiJxfUjRBDdUZkCFMDq+hEjiC4yKtyoSFyyPP0ECarlvEmAAVDroydKUE2SNgEm08s2p58wQXWLtggwiVK2O3riBOnfTRVuFMD+6AkUpD/UK9xGEzScY8mH510LH/8EYO9uf9q2ojCAO0Qtacft6g53RctmaLumpZlEocmSmgSaqKHAeBkMttKxdN2YtqrTpokwqRLZvz5ejeMc2/f6nHMdS/Q7Un86H+Ak5z7PpeBSMLCCpbQLbJF2gUj/O30r7YJcV6Q+aSDlWQk59seYvILTD5wsTVEJLAKL/S0mr8D9yExP2AO94OKi1hHpFHg+tUxn4ob3JljPEMgTN+xuujNDer8BNUX6BL4PXtOXeuL/DlfHEJhTT/hDT2gF/d9CT4t0CYAPv9OVPAMdAvAPweAdQbqyc+BLgFyKBAFfQKQn/Sfom3QrPYLA8p+U5BcFHzNYaRFYycQX0eUXCbmIhwEWWAkFMFEJIi5iOPdNPRlSzsCnYEXe9IitwRZUIs/CBj3HS+Ksim/ppxDIHDgPdhKZ1F0V29KvLYlskLPUJA+r4H1zaQAEskfm8L4pBkAgfdsG/ZUtfhGJCxzpE+FN4D/buFdOPM9O4bywfwji/r2nImGByqF/39Jf7xwJmkkn8qncF/qHIL4+EoyJRAVqh/K+ffNg+0QwX0pUoHYh2btviqsngi9FggLVtwo9QyhXzwQtM0GB6omkdwhi/0yA+51g6BxB11uKUKq7grydmED9SvVi6Rf7ruALkZAg1oOX86XfzHsEkyIRQby3s+f7phj3CPYKiQhiPtk53Tft73oET5LI1oz7+rchTkfQI7jWSEAQ+9XU8RDOszVdwb/600Hjv18+3jcL4z7BREe7APFsSphuOuiF4IHufFPMC2xTNMb7BXFXnWTyTZuAQHNCK+oNudk4uA8IDoo6BbgRLLgZs17BkM6MWdQjcmd24XZzAhDEW3WSyJi9vXC9WQUEb/Wl5KJGYJeOBAvVDUDQNnUJsDG/C9cz1Sog+FlXzi/qHXzh+xNBpjoHCNZtTQJsUPGxoFIBBL/qSSrGjWDmTPCw8hwQPBdaBBZmBJ+4ggoguKEjaxmXBvHGFdytLAOCOaFBgMpa/u1CcJwW3SfQkBaNy6i84hH8Pr8LCL4VzAJUNNZ04bFXkFkFBMOzzAJcSOWtHsGnq68BwQ3BKsDlXduPewUPM5BgizWxGxezecsnuJN5BQgUh6AmWMJGjvsEd+tjgKDImDmOG8EffYI79deAQG0ISgJUwJpjAoJ2aw8QzLOlpuN2yyuA4GarDQjeCSYBLjV9ExTcbD0ABG2m3HfcCP4EBR+32oBAZdXRlvueCxC8bz8DBIbNIcDslpb4K0DwoV0DBApDMPSMQDwKFHyobQCCUY7sfdQIPgsUfFQ7BARvC+QC3GLzeYhg/XAFEGzQtwcg1vuc+DtEkH+/AwiGGsQCZHtAqCC/MwIIyPsPUIvNTLhgdx0QDHVeUQqQDRQRgrX1EUBA3OCACr6eiRTkIUG5QifAVlBECZbzc4CAsIMCtd6bjoRgbQ0SSH2ro6WDIlrwz1oWEExQtWig1nvHkRIsL0MCmVVHS4uGhGByOQsIiHpASrj4dEnB5OQzQFAzKQS4ETySFGQn5wABSZMJagQFU1qQzb4DBM9tvICgyURKsJgdAQTX8F0suAT4aQXB4uIwIIi8nTKYR6AgGFkcBQToNhkb2yKgIBgdHQYEUccKnG0yufM2GWnBCiDYw/XhCHSNgIpgZWUYEERco0YJNjGLTVdZsAEJOlPxBfgRqAmegILwIRhs672n0QcrKB/EFVAUCagJvgEFoUNg6yQyHUJBsxxPgNstu4SCsBcKBtMInAapYCpWLxTJCIgEX4kYgim6XigCwWGMZivcet8lFgQPganZyiQXzNmqAsxu6a00oRIEvlrj6eaaZhD8oNguhl1s6AVjBSVBh6oejVCwp9SPhu355BCMNRQEJm0/GpHgqULDG2YE072/yikF4KrD0PBmsQnkO+ow672/2odUUC7KCcg76sgE0i17mN3SYRVUSzIC+pY9OoFkTyBiBO5iwyWoz0YLGHoCCQVSTYeI3RJouKIW7JpRAo6mQ0pBZFdjnbriilwwYocLqEdAL/BVNfoFU1SLDaPA9xjboFvvrcC2SVrBCydEUCRbbDgFL0WwgL7wk0MQ0vhZIvyrmlNwVQQJCBcbXoF31TF4dktmgXcIWjpL6QXbRUhg0v5JxyrwDMEgGoGjWXCx6hhE631Xs2Bf9AtQxbemdkHd9AsEzwjYBO4QSJpvbTMBQd7uFWBGYIX9LJvgfAhaunt5BL3tw2wjYBSMF3oEmPbhzYQEP3r6kzG7ZS58fIyC8YYrmGJsOC7YTqNhmrOznU7pp62t8vb20pviQbNarVTmVzP1VqtdO9xZP0IcGUbh+6JAwQu3AbqW1gJo8d9ld+8g/PtfgPbu/qmJIwzg+BNQSCyLnhIVjVyikCiGmkQiZA4DQsUiEIIUp8IwFJVWW1tbmzBtLdd/vRdQDJCX5+5279m93I7yu/MZzO7zzd6p/y8ICIIVEAQEHi5r35AOCIgFmCdvQA0Imn7nj+maHw1AIQGj9lhXVg0IKAUODLSAgGLl2ee05z8DUEXgaCJrGegBgddritVXpZzPDFQg0NjxruczA1BP4MCABQTeLZ2dbtthPxmAAgK5RqHFPwagpICvDCQnYKzZ1zuivjEA2QXCzbu7TwxAVQHLIOUPA1BW4NCgGBCIFWjz7ZqaQSYgIBSofZnPBwYgr0AK8w0zXf2YKSlBBilQe1Wo6gaguMCBwYOAQICAjetvhuJBWUaCNLN3AVHxqA9SCti8f6h2zJSPYJ3ZvwGqtIF0BHnm5A6uygYgn4Cjy4cKR33JCDTm9PqnukEZfCKgcFAGvwioayATge5KQNmYCVIJuHn5uLIG8hAw1wKKxkyQSGDNNDvRAOQRCJtmRxqAvwRUjPogi0DUNPkZZAICQgHLwEZQfirBaAmkEEhxFDgMyqjXT/6XZ3l6A/ChADrq51nxVpl8tEROkBEggIz6GisO3xpfoDYAegHdFLAQQVljW8MWwfg08RaKmKAgSABhoLOtiQOCwe9TrHMJ0sIE2kZ9nfVNfCIgNgBiAcM0BRpoLfYAAxNHBCO7s6wzCfJCBVoasFSyp45gJEJoAKQCs6Yp2MBoKnCMYORVlXUeQd5loHER9dnscOUkgWWQ6TACzQOBJlG/JnCaYOgBkQH4WqBhUGbVSqURgWWQ7iAC3SMB01w7YZBh1XgTgt05EgPwucDJoJxhz+NNCYb2KL4fDEQCOdOkMEjXBJoTREoEBhQEzFOB+piZZoV4S4LIDJvqAAJ+kdKuwfqhQCuCxLbnAQE6QOBzUM6zYrwtQWTTawPoBIFDA43NxxEEyS2PAwJ4LxA1TRqDuTiKILnorQF0hkCNYH2vjCNIdns6vAaPBVJEAoz9MLe3t40jSA54aQCdInDxybm5vblNHEHXgMH8SJAhE7AOZxcvPzl3rjB3aNCeoKvXu4AAXgroJpFA6sfLNYLQpblCEUfw0jsDzwjSZAI5lvr72iFBaLJQM8AQvNyZYv4iSAuOlK0E9EvXPhOErlkGPTgCyyDjIwI6Ac0SuPeFIHS5MFl6jCN4ve6JgTcEeUKB2Uv36glCM5MHBhgCyyDtE4K8h3ngtMAJgtulycmZQRxBf9oDAy8IpggFpi6dIvg6ZP0eDOIIetPiA4IHBBqZgMGmfmxAcPP25ExpCEfQOyncAHwtUP2pIcHN2zMzpSSOwDLQFCfQyQR0Vr3bhODNzZlSqQtH0PtCsAGIF8hRCeTvNiV486ZUyqziCHq3xQ6vwacC0VRNoDnBlTelTOgZjqB/RaiBWAJGKPDXxZYEV65kQsVnOAKxBiBYIEwn0Ibg6tVQsdiHI+gXGXHAlwKM3X/bnuBq0TLAEfT3iTMAHwqEGfv4FkNwoVic78YR9C8LG16DSAGyQPPxLI7gwvz8fDeO4PWSKAPwncAaY/+exRK8swxGcQQ/LwkKCCBMgChS5ljq+lk8wfkX8y8AR/CLoIgjhiBDKfD+VzsE5zdfbC8iCXaE3MQBfwloTL/+mz2Cfza3N1eQBDsibuKAGAGiTKwx4/p7uwT/PNx8GEMS7Ai4iSOAIE0q4IDgq3cP92NIgpd73A1AhABZpNSuOyL46vz+fnkXR/CS+00c7gTrZAIGm/3dIUFsY3+jvIsj6JrhbMCbIE8ooP3hmCBW3tiIRXAEloEmMUGeMNBo910QWAZb5QSOoIvvLRC+BBqhwNp9VwQrsa1yLIkjSG7yHF6DLwSiKZa775JgZaUci+3gCLjeAgGfCITPuCaAFevnaxyBZcAkJCAL9VFmCXAgWFy0fu7gCJLfcQsIwFMgRyUQPcOF4MOHlZXFJRxBcpmXATcCskwctgT+5EXwyPpVWMIRJHY4BQTgJ7BGJXDnT24Eo6OLi49WcQS8DICbAE2kzDFm3uBJ0L34aHQVR5DY4fIoL1BdIGXe4EvQ/Wi0O4sjSCSqHF47DpwEyAKNeYc3wbT1N4skSHC4BQIqC2hMj97hT7Bg/c0iCSIPWIGegDKRmaYIgr7p6YUskiDy1G1AAJUFajNZIQR9Cwt9WSRBZI89JSWgy8Szh1NxMQQD1p8skiBScBcQwLUAUaQ0PnUJQQTWWs4iCXYzrgzcERQIBT7NowQSLK8iCXZLbgKCKwK6UK8fTQSFESwvL2eXkARD+y4MwJ2AQS0gkCCbzT5bQhJYBjoBAVkmjqbqpuKSEAyNOjYANwKzVAJ1M1mRBKs2CIa6nUYccCFAFmjqp+JCCZZsEAw9cxgQnBJolInMlJJgaMmZASgmED45k5WI4FXCUUBwRqATCpw4i8tE4MwAlBLInZ7JSkUwNuYg4oAzgRyRwOl5lGQEY/ZvgTggIAv1WqOJoGwEY7ZvgYATgTCRQKNpiHQEI3ZvgYDiAhISjNh8HwuoI9B4GiIhweAcWxdHQJaJZ5vNo2QkGLR1CwTUEDCazqOkJBjMsKoYArJIaTQ/h8hJ8K2NR3mBCgJ6i5OgpATjG2gDPAFZqI+2EpCWYLyMDQhgQ4AmUh4LNAoRjC8gDbAEaUKBlmdxeQnG+3ARB9ACRJGy3TREYoLxb1ABAaQXaHMSlJngFsoARUAW6sPtz+JSE9waQwQEwAnIEmhUIxhGGCAIpiQKNMoRDA+3jTjtCTQ6Acw5RHqC4XYRB6QV0HAnQfkJJp63NmhHoNMJ4M4hChBYBmnnBDpdpESeBFUgmCi0MgBZBbC7YCUIHre6BQJShnoDfw5Rg+BxsbkByBgpDRufP4oQWAaafQIyAd3ODkAVgp5yMwNQXEAdAsvAsEdA+IZ0W7tgdQh6phsHBJBPwN4OQCGCnoGGBiBXJrYtoBRBT8NbICBXJrb/VCOlCHoSDQxAJoGwgx2AWgSVhMEQBGSh3omAagSV4VMBAeQJ9WFHOwDVCCoTGmtDQJaJc872YMoRVConIs5JgnU6AWefPwoSVI5HHJAk1GtOdwAqEsSPRRyQI9Rrjj9/lCSI10cckCRSOt4BqEkQr4s4IIeA8//9FCWIf4k4IIGA4ebzR1WC+FHE+UJQZcHyeGkcn9YbLNrnlAYrIFB8/Q+YBTdUjX9zJQAAAABJRU5ErkJggg==\"","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission; \n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ? \n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func.isRequired,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  }\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size, permission});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            readmeMarkdown={this.state.readmeMarkdown}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleEditor from './select-editor/role-editor';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  }\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  }\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  }\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  }\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users...')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {…}, config: {…}, …}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FBD44A', '#EAA775', '#F4667C', '#DC82D2', '#9860E5', '#9F8CF1', '#59CB74', '#ADDF84', '#89D2EA', '#4ECCCB', '#46A1FD', '#C2C2C2'],\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  }\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let { repoID, currentPath, usedRepoTags, readmeMarkdown, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (readmeMarkdown === undefined) {\n      readmeMarkdown = null;\n    }\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank' rel=\"noreferrer\">{readmeMarkdown.name}</a>\n            </span>\n          }\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    } \n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm)\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onContainerClick = (event) => {\n    hideMenu();\n  }\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') { \n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = function (fn) {\n  return NATIVE_BIND ? uncurryThisWithBind(fn) : function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nvar toString = uncurryThisRaw({}.toString);\nvar stringSlice = uncurryThisRaw(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThisRaw = require('../internals/function-uncurry-this-raw');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThisRaw(fn);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.25.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export default {\n  GLOBAL: {\n    HIDE: '__react_tooltip_hide_event',\n    REBUILD: '__react_tooltip_rebuild_event',\n    SHOW: '__react_tooltip_show_event'\n  }\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from '../constant';\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent(eventName, false, true, opts);\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      this.showTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        true\n      );\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute('currentItem');\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === 'true') {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute('currentItem', 'true');\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute('currentItem', 'false');\n    } else {\n      targetArray[i].setAttribute('currentItem', 'true');\n    }\n  }\n};\n\nconst customListeners = {\n  id: '9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf',\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener }\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  }\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute('data-event');\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute('data-event') || event;\n    const dataEventOff = ele.getAttribute('data-event-off') || eventOff;\n\n    dataEvent.split(' ').forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(' ').forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute('data-event');\n    const dataEventOff = eventOff || ele.getAttribute('data-event-off');\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from './customEvent';\n\nconst makeProxy = (e) => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === 'function') {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function (callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  let tip = null;\n  let forId;\n  let target = e.target;\n  let lastTarget;\n  // walk up parent chain until tip is found\n  // there is no match if parent visible area is matched by mouse position, so some corner cases might not work as expected\n  while (tip === null && target !== null) {\n    lastTarget = target;\n    tip = target.getAttribute('data-tip') || null;\n    forId = target.getAttribute('data-for') || null;\n    target = target.parentElement;\n  }\n\n  target = lastTarget || e.target;\n\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === 'float') &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach((target) => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(' ').forEach((event) => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName('body')[0];\n\nexport default function (target) {\n  target.prototype.isBodyMode = function () {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function (targetArray) {\n    const { event, eventOff, possibleCustomEvents, possibleCustomEventsOff } =\n      this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, 'data-event');\n    const customEventsOff = findCustomEvents(targetArray, 'data-event-off');\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(' ')\n      .forEach((event) => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(' ')\n      .forEach((event) => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        (e) => {\n          const targetEventOff =\n            e.currentTarget.getAttribute('data-event-off') || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function (body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function (e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffsetX, extraOffsetY } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = (place) => {\n    const offsetX = defaultOffset[place].l;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetRight = (place) => {\n    const offsetX = defaultOffset[place].r;\n    return mouseX + offsetX + extraOffsetX;\n  };\n  const getTipOffsetTop = (place) => {\n    const offsetY = defaultOffset[place].t;\n    return mouseY + offsetY + extraOffsetY;\n  };\n  const getTipOffsetBottom = (place) => {\n    const offsetY = defaultOffset[place].b;\n    return mouseY + offsetY + extraOffsetY;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = (p) => getTipOffsetLeft(p) < 0;\n  const outsideRight = (p) => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = (p) => getTipOffsetTop(p) < 0;\n  const outsideBottom = (p) => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = (p) =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = (p) => !outside(p);\n\n  const placeIsInside = {\n    top: inside('top'),\n    bottom: inside('bottom'),\n    left: inside('left'),\n    right: inside('right')\n  };\n\n  function choose() {\n    const allPlaces = desiredPlace\n      .split(',')\n      .concat(place, ['top', 'bottom', 'left', 'right']);\n    for (const d of allPlaces) {\n      if (placeIsInside[d]) return d;\n    }\n    // if nothing is inside, just use the old place.\n    return place;\n  }\n\n  const chosen = choose();\n\n  let isNewState = false;\n  let newPlace;\n  if (chosen && chosen !== place) {\n    isNewState = true;\n    newPlace = chosen;\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace }\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10)\n    }\n  };\n}\n\nconst getDimensions = (node) => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10)\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } =\n    getDimensions(currentTarget);\n\n  if (effect === 'float') {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === 'float') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  } else if (effect === 'solid') {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2)\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = (offset) => {\n  let extraOffsetX = 0;\n  let extraOffsetY = 0;\n\n  if (Object.prototype.toString.apply(offset) === '[object String]') {\n    offset = JSON.parse(offset.toString().replace(/'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === 'top') {\n      extraOffsetY -= parseInt(offset[key], 10);\n    } else if (key === 'bottom') {\n      extraOffsetY += parseInt(offset[key], 10);\n    } else if (key === 'left') {\n      extraOffsetX -= parseInt(offset[key], 10);\n    } else if (key === 'right') {\n      extraOffsetX += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffsetX, extraOffsetY };\n};\n\n// Get the offset of the parent elements\nconst getParent = (currentTarget) => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    const computedStyle = window.getComputedStyle(currentParent);\n    // transform and will-change: transform change the containing block\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_Block\n    if (\n      computedStyle.getPropertyValue('transform') !== 'none' ||\n      computedStyle.getPropertyValue('will-change') === 'transform'\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from 'react';\n\nexport default function TipContent(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === 'false' || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Default pop-up style values (text color, background color).\n */\nconst defaultColors = {\n  dark: {\n    text: '#fff',\n    background: '#222',\n    border: 'transparent',\n    arrow: '#222'\n  },\n  success: {\n    text: '#fff',\n    background: '#8DC572',\n    border: 'transparent',\n    arrow: '#8DC572'\n  },\n  warning: {\n    text: '#fff',\n    background: '#F0AD4E',\n    border: 'transparent',\n    arrow: '#F0AD4E'\n  },\n  error: {\n    text: '#fff',\n    background: '#BE6464',\n    border: 'transparent',\n    arrow: '#BE6464'\n  },\n  info: {\n    text: '#fff',\n    background: '#337AB7',\n    border: 'transparent',\n    arrow: '#337AB7'\n  },\n  light: {\n    text: '#222',\n    background: '#fff',\n    border: 'transparent',\n    arrow: '#fff'\n  }\n};\n\nexport function getDefaultPopupColors(type) {\n  return defaultColors[type] ? { ...defaultColors[type] } : undefined;\n}\n\nexport const DEFAULT_PADDING = '8px 21px';\n\nexport const DEFAULT_RADIUS = {\n  tooltip: 3,\n  arrow: 0\n};\n","import {\n  getDefaultPopupColors,\n  DEFAULT_PADDING,\n  DEFAULT_RADIUS\n} from './defaultStyles';\n\n/**\n * Generates the specific tooltip style for use on render.\n */\nexport function generateTooltipStyle(\n  uuid,\n  customColors,\n  type,\n  hasBorder,\n  padding,\n  radius\n) {\n  return generateStyle(\n    uuid,\n    getPopupColors(customColors, type, hasBorder),\n    padding,\n    radius\n  );\n}\n\n/**\n * Generates the tooltip style rules based on the element-specified \"data-type\" property.\n */\nfunction generateStyle(\n  uuid,\n  colors,\n  padding = DEFAULT_PADDING,\n  radius = DEFAULT_RADIUS\n) {\n  const textColor = colors.text;\n  const backgroundColor = colors.background;\n  const borderColor = colors.border;\n  const arrowColor = colors.arrow;\n  const arrowRadius = radius.arrow;\n  const tooltipRadius = radius.tooltip;\n\n  return `\n  \t.${uuid} {\n\t    color: ${textColor};\n\t    background: ${backgroundColor};\n\t    border: 1px solid ${borderColor};\n\t    border-radius: ${tooltipRadius}px;\n\t    padding: ${padding};\n  \t}\n\n  \t.${uuid}.place-top {\n        margin-top: -10px;\n    }\n    .${uuid}.place-top::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: 2;\n        width: 20px;\n        height: 12px;\n    }\n    .${uuid}.place-top::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(135deg);\n    }\n\n    .${uuid}.place-bottom {\n        margin-top: 10px;\n    }\n    .${uuid}.place-bottom::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 18px;\n        height: 10px;\n    }\n    .${uuid}.place-bottom::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        top: -6px;\n        left: 50%;\n        margin-left: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-left {\n        margin-left: -10px;\n    }\n    .${uuid}.place-left::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-left::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        right: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(45deg);\n    }\n\n    .${uuid}.place-right {\n        margin-left: 10px;\n    }\n    .${uuid}.place-right::before {\n        content: \"\";\n        background-color: inherit;\n        position: absolute;\n        z-index: -1;\n        width: 10px;\n        height: 18px;\n    }\n    .${uuid}.place-right::after {\n        content: \"\";\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-top-right-radius: ${arrowRadius}px;\n        border: 1px solid ${borderColor};\n        background-color: ${arrowColor};\n        z-index: -2;\n        left: -6px;\n        top: 50%;\n        margin-top: -6px;\n        transform: rotate(-135deg);\n    }\n  `;\n}\n\nfunction getPopupColors(customColors, type, hasBorder) {\n  const textColor = customColors.text;\n  const backgroundColor = customColors.background;\n  const borderColor = customColors.border;\n  const arrowColor = customColors.arrow\n    ? customColors.arrow\n    : customColors.background;\n\n  const colors = getDefaultPopupColors(type);\n\n  if (textColor) {\n    colors.text = textColor;\n  }\n\n  if (backgroundColor) {\n    colors.background = backgroundColor;\n  }\n\n  if (hasBorder) {\n    if (borderColor) {\n      colors.border = borderColor;\n    } else {\n      colors.border = type === 'light' ? 'black' : 'white';\n    }\n  }\n\n  if (arrowColor) {\n    colors.arrow = arrowColor;\n  }\n\n  return colors;\n}\n","/* eslint-disable no-unused-vars, dot-notation */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n/* Decorators */\nimport staticMethods from './decorators/staticMethods';\nimport windowListener from './decorators/windowListener';\nimport customEvent from './decorators/customEvent';\nimport isCapture from './decorators/isCapture';\nimport getEffect from './decorators/getEffect';\nimport bodyMode from './decorators/bodyMode';\nimport trackRemoval from './decorators/trackRemoval';\n\n/* Utils */\nimport getPosition from './utils/getPosition';\nimport getTipContent from './utils/getTipContent';\nimport { parseAria } from './utils/aria';\nimport nodeListToArray from './utils/nodeListToArray';\nimport { generateUUID } from './utils/uuid';\n\n/* CSS */\nimport baseCss from './index.scss';\nimport { generateTooltipStyle } from './decorators/styler';\n\n/* Polyfill */\nimport 'core-js/modules/es.array.find';\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static get propTypes() {\n    return {\n      uuid: PropTypes.string,\n      children: PropTypes.any,\n      place: PropTypes.string,\n      type: PropTypes.string,\n      effect: PropTypes.string,\n      offset: PropTypes.object,\n      padding: PropTypes.string,\n      multiline: PropTypes.bool,\n      border: PropTypes.bool,\n      borderClass: PropTypes.string,\n      textColor: PropTypes.string,\n      backgroundColor: PropTypes.string,\n      borderColor: PropTypes.string,\n      arrowColor: PropTypes.string,\n      arrowRadius: PropTypes.string,\n      tooltipRadius: PropTypes.string,\n      insecure: PropTypes.bool,\n      class: PropTypes.string,\n      className: PropTypes.string,\n      id: PropTypes.string,\n      html: PropTypes.bool,\n      delayHide: PropTypes.number,\n      delayUpdate: PropTypes.number,\n      delayShow: PropTypes.number,\n      event: PropTypes.string,\n      eventOff: PropTypes.string,\n      isCapture: PropTypes.bool,\n      globalEventOff: PropTypes.string,\n      getContent: PropTypes.any,\n      afterShow: PropTypes.func,\n      afterHide: PropTypes.func,\n      overridePosition: PropTypes.func,\n      disable: PropTypes.bool,\n      scrollHide: PropTypes.bool,\n      resizeHide: PropTypes.bool,\n      wrapper: PropTypes.string,\n      bodyMode: PropTypes.bool,\n      possibleCustomEvents: PropTypes.string,\n      possibleCustomEventsOff: PropTypes.string,\n      clickable: PropTypes.bool,\n      disableInternalStyle: PropTypes.bool\n    };\n  }\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: 'div',\n    clickable: false\n  };\n\n  static supportedWrappers = ['div', 'span'];\n\n  static displayName = 'ReactTooltip';\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uuid: props.uuid || generateUUID(),\n      place: props.place || 'top', // Direction of tooltip\n      desiredPlace: props.place || 'top',\n      type: props.type || 'dark', // Color theme of tooltip\n      effect: props.effect || 'float', // float or fixed\n      show: false,\n      border: false,\n      borderClass: 'border',\n      customColors: {},\n      customRadius: {},\n      offset: {},\n      padding: props.padding,\n      extraClass: '',\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || '',\n      possibleCustomEventsOff: props.possibleCustomEventsOff || '',\n      originTooltip: null,\n      isMultiline: false\n    };\n\n    this.bind([\n      'showTooltip',\n      'updateTooltip',\n      'hideTooltip',\n      'hideTooltipOnScroll',\n      'getTooltipContent',\n      'globalRebuild',\n      'globalShow',\n      'globalHide',\n      'onWindowResize',\n      'mouseOnToolTip'\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach((method) => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide, disableInternalStyle } = this.props;\n    this.mount = true;\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n\n    if (!disableInternalStyle) {\n      this.injectStyles(); // Inject styles for each DOM root having tooltip.\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some((props) => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener(this.state.currentTarget);\n    this.unbindWindowEvents();\n  }\n\n  /* Look for the closest DOM root having tooltip and inject styles. */\n  injectStyles() {\n    const { tooltipRef } = this;\n    if (!tooltipRef) {\n      return;\n    }\n\n    let parentNode = tooltipRef.parentNode;\n    while (parentNode.parentNode) {\n      parentNode = parentNode.parentNode;\n    }\n\n    let domRoot;\n\n    switch (parentNode.constructor.name) {\n      case 'Document':\n      case 'HTMLDocument':\n      case undefined:\n        domRoot = parentNode.head;\n        break;\n      case 'ShadowRoot':\n      default:\n        domRoot = parentNode;\n        break;\n    }\n\n    // Prevent styles duplication.\n    if (!domRoot.querySelector('style[data-react-tooltip]')) {\n      const style = document.createElement('style');\n      style.textContent = baseCss;\n      style.setAttribute('data-react-tooltip', 'true');\n\n      domRoot.appendChild(style);\n    }\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(':hover');\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = '[data-tip]:not([data-for])';\n    } else {\n      const escaped = id.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName('*'))\n      .filter((element) => element.shadowRoot)\n      .forEach((element) => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach((target) => {\n      if (target.getAttribute('currentItem') === null) {\n        target.setAttribute('currentItem', 'false');\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach((target) => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener('mouseenter', this.showTooltip, isCaptureMode);\n        target.addEventListener('focus', this.showTooltip, isCaptureMode);\n        if (effect === 'float') {\n          target.addEventListener(\n            'mousemove',\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n        target.addEventListener('blur', this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach((target) => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener('mouseenter', this.showTooltip, isCaptureMode);\n    target.removeEventListener('mousemove', this.updateTooltip, isCaptureMode);\n    target.removeEventListener('mouseleave', this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === 'string' && placeholder === '') ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (!this.tooltipRef) {\n      return;\n    }\n\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute('data-tip');\n    const isMultiline =\n      e.currentTarget.getAttribute('data-multiline') || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute('data-scroll-hide')) {\n      scrollHide = e.currentTarget.getAttribute('data-scroll-hide') === 'true';\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // adding aria-describedby to target to make tooltips read by screen readers\n    if (e && e.currentTarget && e.currentTarget.setAttribute) {\n      e.currentTarget.setAttribute(\n        'aria-describedby',\n        this.props.id || this.state.uuid\n      );\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute('data-place') || this.props.place || 'top';\n    const effect =\n      (switchToSolid && 'solid') || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute('data-offset') || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace.split(',')[0],\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState\n      ? result.newState.place\n      : desiredPlace.split(',')[0];\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    const target = e.currentTarget;\n\n    const reshowDelay = this.state.show\n      ? target.getAttribute('data-delay-update') || this.props.delayUpdate\n      : 0;\n\n    const self = this;\n\n    const updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute('data-type') || self.props.type || 'dark',\n          customColors: {\n            text:\n              target.getAttribute('data-text-color') ||\n              self.props.textColor ||\n              null,\n            background:\n              target.getAttribute('data-background-color') ||\n              self.props.backgroundColor ||\n              null,\n            border:\n              target.getAttribute('data-border-color') ||\n              self.props.borderColor ||\n              null,\n            arrow:\n              target.getAttribute('data-arrow-color') ||\n              self.props.arrowColor ||\n              null\n          },\n          customRadius: {\n            tooltip:\n              target.getAttribute('data-tooltip-radius') ||\n              self.props.tooltipRadius ||\n              '3',\n            arrow:\n              target.getAttribute('data-arrow-radius') ||\n              self.props.arrowRadius ||\n              '0'\n          },\n          effect: effect,\n          offset: offset,\n          padding: target.getAttribute('data-padding') || self.props.padding,\n          html:\n            (target.getAttribute('data-html')\n              ? target.getAttribute('data-html') === 'true'\n              : self.props.html) || false,\n          delayShow:\n            target.getAttribute('data-delay-show') || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute('data-delay-hide') || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute('data-delay-update') ||\n            self.props.delayUpdate ||\n            0,\n          border:\n            (target.getAttribute('data-border')\n              ? target.getAttribute('data-border') === 'true'\n              : self.props.border) || false,\n          borderClass:\n            target.getAttribute('data-border-class') ||\n            self.props.borderClass ||\n            'border',\n          extraClass:\n            target.getAttribute('data-class') ||\n            self.props.class ||\n            self.props.className ||\n            '',\n          disable:\n            (target.getAttribute('data-tip-disable')\n              ? target.getAttribute('data-tip-disable') === 'true'\n              : self.props.disable) || false,\n          currentTarget: target\n        },\n        () => {\n          if (scrollHide) {\n            self.addScrollListener(self.state.currentTarget);\n          }\n\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  '',\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({ isEmptyTip });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    // if the tooltip is empty, disable the tooltip\n    if (this.isEmptyTip(placeholder) || disable || disableProp) {\n      return;\n    }\n\n    const delayTime = !this.state.show ? parseInt(delayShow, 10) : 0;\n\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true\n          },\n          () => {\n            this.updatePosition(() => {\n              if (isInvisible && afterShow) {\n                afterShow(e);\n              }\n            });\n          }\n        );\n      }\n    };\n\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n    }\n    if (delayTime) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      this.delayShowLoop = null;\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener('mouseleave', this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide, disable: disableProp } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable || disableProp) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some((ele) => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    // clean up aria-describedby when hiding tooltip\n    if (e && e.currentTarget && e.currentTarget.removeAttribute) {\n      e.currentTarget.removeAttribute('aria-describedby');\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n\n      this.removeListenerForTooltipExit();\n\n      this.setState({ show: false }, () => {\n        this.removeScrollListener(this.state.currentTarget);\n        if (isVisible && afterHide) {\n          afterHide(e);\n        }\n      });\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener('scroll', this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.removeEventListener(\n      'scroll',\n      this.hideTooltipOnScroll,\n      isCaptureMode\n    );\n  }\n\n  // Calculation the position\n  updatePosition(callbackAfter) {\n    const { currentEvent, currentTarget, place, desiredPlace, effect, offset } =\n      this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition(callbackAfter);\n      });\n    }\n\n    if (callbackAfter && typeof callbackAfter === 'function') {\n      callbackAfter();\n    }\n\n    // Set tooltip position\n    node.style.left = result.position.left + 'px';\n    node.style.top = result.position.top + 'px';\n  }\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    if (this.delayShowLoop) {\n      clearTimeout(this.delayShowLoop);\n      this.delayShowLoop = null;\n    }\n    if (this.delayHideLoop) {\n      clearTimeout(this.delayHideLoop);\n      this.delayHideLoop = null;\n    }\n    if (this.delayReshow) {\n      clearTimeout(this.delayReshow);\n      this.delayReshow = null;\n    }\n    if (this.intervalUpdateContent) {\n      clearInterval(this.intervalUpdateContent);\n      this.intervalUpdateContent = null;\n    }\n  }\n\n  hasCustomColors() {\n    return Boolean(\n      Object.keys(this.state.customColors).find(\n        (color) => color !== 'border' && this.state.customColors[color]\n      ) ||\n        (this.state.border && this.state.customColors['border'])\n    );\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable, uuid } = this.state;\n    const content = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(content);\n    const style = this.props.disableInternalStyle\n      ? ''\n      : generateTooltipStyle(\n          this.state.uuid,\n          this.state.customColors,\n          this.state.type,\n          this.state.border,\n          this.state.padding,\n          this.state.customRadius\n        );\n\n    const tooltipClass =\n      '__react_component_tooltip' +\n      ` ${this.state.uuid}` +\n      (this.state.show && !disable && !isEmptyTip ? ' show' : '') +\n      (this.state.border ? ' ' + this.state.borderClass : '') +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.hasCustomColors() ? 'custom' : this.state.type}` + // dark, success, warning, error, info, light, custom\n      (this.props.delayUpdate ? ' allow_hover' : '') +\n      (this.props.clickable ? ' allow_click' : '');\n\n    let Wrapper = this.props.wrapper;\n\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(' ');\n\n    if (html) {\n      const htmlContent = `${content}${\n        style ? `\\n<style aria-hidden=\"true\">${style}</style>` : ''\n      }`;\n\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          ref={(ref) => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: htmlContent }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={`${wrapperClassName}`}\n          id={this.props.id || uuid}\n          {...ariaProps}\n          ref={(ref) => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {style && (\n            <style\n              dangerouslySetInnerHTML={{ __html: style }}\n              aria-hidden=\"true\"\n            />\n          )}\n          {content}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from '../constant';\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener('resize', this.onWindowResize);\n      window.addEventListener('resize', this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute('data-iscapture') === 'true') ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute('data-effect');\n    return dataEffect || this.props.effect || 'float';\n  };\n}\n","import { v4 as uuid } from 'uuid';\n\nexport function generateUUID() {\n  return 't' + uuid();\n}\n"],"sourceRoot":""}